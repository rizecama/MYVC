<?php
/**
 * @version		1.0.0 camassistant $
 * @package		camassistant
 * @copyright	Copyright © 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author		
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');

jimport('joomla.application.component.controller');

class invitationcodesController extends JController
{

	function __construct()
	{
		parent::__construct();
	}
	function display()
	{
	parent::display();
	}
	
	function checkcode()
	{
		$db =& JFactory::getDBO();
		$user =& JFactory::getUser();
		$code = JRequest::getVar('newcode','');
		$id = "SELECT id FROM #__users WHERE manager_invitecode = '".$code."'";
		$db->setQuery( $id );
		$result = $db->loadResult();
		if($result)
		$msg=1;
		else
		$msg=0;
		echo $msg; 
		exit;
	}
	function savevendorcode()
	{
	    $db =& JFactory::getDBO();
		$user =& JFactory::getUser();
		$code = JRequest::getVar('invitecode','');
	    $model = $this->getModel('invitationcodes');		
		$res = $model->adddtomyvendors($code);
		$msg='Invitation code REDEEMED successfully';
		$this->setRedirect( 'index.php?option=com_camassistant&controller=invitationcodes&task=vendorcode&Itemid=278',$msg);
	}
		
	
}
?>