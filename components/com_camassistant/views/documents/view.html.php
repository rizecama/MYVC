<?php
/**
 * @version		1.0.0 cam assistant $
 * @package		cam_assistant
 * @copyright	Copyright Â© 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author		
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');

jimport( 'joomla.application.component.view' );

class documentsViewDocuments extends Jview
{
	function display($tpl = null){
		$task=JRequest::getVar('task','');
		//code by lalitha
		if($task == 'vendor_docs')
		{
			$vendor_files = $this->get('vendordocs');
			$this->setLayout('vendor_docs_layout');
			$this->assignRef('vendor_files', $vendor_files);
			$taxid = $this->get('vendortaxid'); 
			$this->assignRef('taxid', $taxid);

			
		}
		//end of code by lalitha
		$model	=& $this->getModel();
		$pdocs	=& $this->get('Data1');
		$this->assignRef('pdocs', $pdocs);		
		//$pdocs = $this->get('pdocs');
		//echo "<pre>"; print_r($pdocs); exit;
		$pagination1 = & $this->get( 'Pagination1' );
		$this->assignRef('pagination1',	$pagination1);

		
		if($task=='pdocs')
		$this->setLayout('default1');
	//	$pdocs = $this->get('pdocs');


		$pfiles = $this->get('pfiles');
		$this->assignRef('pfiles', $pfiles);
		if($task=='pfiles')
		$this->setLayout('default2');


		$addfolder = $this->get('documents');
		$this->assignRef('documents', $addfolder);
		$cats = $this->get('categories');
		$this->assignRef('categories', $cats);
		
		if($task=='addfolder')
		$this->setLayout('default3');


		/*$openfiles = $this->get('openfiles');
		$this->assignRef('openfiles', $openfiles);*/
		if($task=='openfiles')
		{
			$path = $_REQUEST['path'];
			$model = $this->getModel('documents');
			$openfiles = $model->getopenfiles($path);
			$this->assignRef('openfiles', $openfiles);
			$this->setLayout('default4');
		}
		
		if($task=='addfile')
		$this->setLayout('fileupload');
	
		$efiles = $this->get('fileextensions');
		//print_r($efiles); 
		$this->assignRef('efiles', $efiles);

		
/////////////////////////////////////////////Shared documents//////////////////////////////

		$model	=& $this->getModel();
		//$this->setLayout('default');
		$sdocs	=& $this->get('Data');
		//$sdocs = $this->get('sdocs');
		//	$pagination = $model->getPagination();
		$pagination = & $this->get( 'Pagination' );
		$this->assignRef('pagination',	$pagination);
		
		
		$this->assignRef('sdocs', $sdocs);
		if($task=='sdocs')
//		echo "<pre>"; print_r($sdocs); exit;	
		$this->setLayout('sdefault');
		$sdocs = $this->get('sdocs');
			$camfirm = $this->get('camfirmid'); 
			$this->assignRef('camfirm', $camfirm);

		$sfiles = $this->get('sfiles');
		$this->assignRef('sfiles', $sfiles);
		if($task=='sfiles')
		$this->setLayout('sdefault2');

		$saddfolder = $this->get('documents');
		$this->assignRef('documents', $saddfolder);
		$scats = $this->get('scategories');
		$this->assignRef('scategories', $scats);
		
		if($task=='saddfolder')
		$this->setLayout('sdefault3');
		if($task=='saddfile')
		$this->setLayout('sfileupload');
		
		if($task=='sopenfiles')
		{
			$spath = $_REQUEST['spath'];
			$model = $this->getModel('documents');
			$sopenfiles = $model->getsopenfiles($spath);
			
			$camfirm = $this->get('camfirmid'); 
			$this->assignRef('camfirm', $camfirm);			
			
			$this->assignRef('sopenfiles', $sopenfiles);
			$this->setLayout('sdefault4');
		}

/////////////////////////////////////////////Shared documents Completed ///////////////////////////////
		
		parent::display($tpl);

	}
}

?>
