<?php
/**
 * @version		1.0.0 camsignup $
 * @package		camsignup
 * @copyright	Copyright Â© 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author		anand kumar
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');

// Your custom code here

//echo "<pre>"; print_r($_REQUEST);
  	$rfpid = JRequest::getVar('rfpno','');
?>
<link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700|Open+Sans+Condensed:700" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" type="text/css" href="templates/camassistant_left/css/style.css">
<script type="text/javascript" src="<?Php echo juri::base(); ?>/components/com_camassistant/skin/js/jquery-1.4.4.min.js"></script>	
<script type="text/javascript">
G = jQuery.noConflict();
function bid_submit()
{

frm = document.outsidevendor;
var phone1 = frm.phone1.value ;
var phone2 = frm.phone2.value ;
var phone3 = frm.phone3.value ;
var phone = phone1.concat(phone2, phone3);
if(frm.awardedvendor.value == '')
 {
 alert('Please enter a Company Name');
 frm.awardedvendor.focus();
 return;
 } 
 if(frm.amount.value == '')
 {
 alert('Please enter awarded amount');
 frm.amount.focus();
 return;
 } 
 else{
 format_val(frm.amount.value)
 } 
 
 if(frm.emailid.value || phone){
	var email = frm.emailid.value ;
	var atpos = email.indexOf("@");
    var dotpos = email.lastIndexOf(".");
	
		if(email) {
			if (atpos< 1 || dotpos<atpos+2 || dotpos+2>=email.length) {
				alert("Not a valid e-mail address");
				frm.emailid.focus();
				return;
			}
			
		}	
		if(phone) {
		 var numbers = /^[0-9]+$/; 
		 if(phone.match(numbers))  
		  {  
			if(phone.length < 10)
				 {
					 alert("Please enter correct phone number.");
					 frm.phone1.focus();
					 return;
				 }
			else{
					frm.submit();
			}	 
		  } 
		else
		  {
				alert("Please enter correct phone number."); 
				frm.phone1.focus();
				return;
		  }
	  }
	  else {
	  		frm.submit();
	  }
}


 else {
		 frm.submit();
 	}
}
function cancel(){
window.parent.document.getElementById( 'sbox-window' ).close();
window.parent.parent.location.reload();
}

function format_val(fieldvalue){
var i=0;
var ValidData="0123456789.,";
var Data=fieldvalue;
if(fieldvalue != "")
	for(i=0;i<Data.length;i++)
	{
		if(ValidData.indexOf(Data.charAt(i))==-1)
		{
			if( i == 0 ){
			alert ("Please enter numerals and decimal point only.");
			}
			
		}
		else{
			G.post("index2.php?option=com_camassistant&controller=proposals&task=vendor_proposal_edit_format_val", {fieldvalue:""+fieldvalue+""}, function(data){
			if(data.length >0) {
			G("#otheramount").val(data);
			}
			});
		}
	}


}

</script>
<form action="index.php?option=com_camassistant&controller=rfpcenter&task=saveoutsidevendors" method="post" name="outsidevendor" >

<div id="light_box001" style="width:660px;">

<div id="i_bar_terms">
<div id="i_bar_txt_terms">
<span> <font style="font-weight:bold; color:#FFF; font-size:14px;">OUTSIDE VENDOR INFO</font></span>
</div></div>
<p>Please fill in as much information about this Vendor as possible.  If you want to have an automated AWARD or REJECTION email sent to this Vendor, then you will have to enter their email address.</p>
<div id="lb_content02">
<div id="invite-popup" style="margin-top:20px; margin-left:17px; width:645px;">

<div class="invite-popup-main">
<div class="invite-popup-left">
<div class="red-arrow" style="top:33px;"><img width="10" height="20" src="templates/camassistant_left/images/red-arrow.jpg" alt=""></div>
<label>Company Name:</label>
<input name="awardedvendor" type="text" class="other_tfield" style="width:620px;"/>
</div>
</div>

<div class="invite-popup-main">
<div class="invite-popup-left">
<label>Contact Name:</label>
<input name="contactname" type="text" class="other_tfield" style="width:620px;"/>
</div>
</div>

<div class="invite-popup-main">
<div class="invite-popup-left">
<label>Phone Number:</label><br /><br />
<input name="phone1" type="text" class="other_tfield" style="width:50px; text-align:center" maxlength="3"/>&nbsp;-&nbsp;
<input name="phone2" type="text" class="other_tfield" style="width:50px; text-align:center" maxlength="3"/>&nbsp;-&nbsp;
<input name="phone3" type="text" class="other_tfield" style="width:50px; text-align:center" maxlength="4"/>
</div>
</div>

<div class="invite-popup-main">
<div class="invite-popup-left">
<label>Email Address:</label>
<input name="emailid" type="text" class="other_tfield" style="width:620px;"/>
</div>
</div>

<div class="invite-popup-main">
<div class="invite-popup-left" style="width:307px;">
<div class="red-arrow" style="top:33px;"><img width="10" height="20" src="templates/camassistant_left/images/red-arrow.jpg" alt=""></div>
<label>What was the agreed upon contract amount?</label>
<input name="amount" type="text" class="other_tfield" id="otheramount" onblur="javascript: format_val(this.value);" style="width:620px;"/>
</div>
</div>

<div class="clear"></div>
<div>
  <div id="topborder_row" align="center">
	<a href="#" class="newcancel" onclick="cancel();"></a>
	<a href="#" class="newsubmit" onclick="javascript:bid_submit();"></a>
    <!--<img src="templates/camassistant_left/images/Cancel_Short.png" alt="Go Back" width="109" height="48" onclick="cancel();" style="cursor:pointer;"/>
	<img src="templates/camassistant_left/images/Submit_Short.png" alt="submit" onclick="javascript:bid_submit();" style="margin-bottom:1px; cursor:pointer;" />-->
	</div>
<p></p></div>




</div>
</div>
</div>



	<input type="hidden" value="<?php echo $rfpid; ?>" name="rfpid"  />
	<input type="hidden" value="Awarded"  id="" name="Awarded"  />
	<input type="hidden" value="" name=""  />

	</form>

<?php exit; ?>