<?php
/**
 * @version		1.0.0 camassistant $
 * @package		camassistant
 * @copyright	Copyright Â© 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');
JHTML::_('behavior.modal');
JHTML::_('behavior.calendar');
jimport( 'joomla.html.html' );
JHTML::_('behavior.tooltip', '.hasTip2', $toolTipArray);
$propertyList=$this->propertyList;
$industryList=$this->industryList;
$reqCatList=$this->reqCatList;
$cat = $this->SPLReq_Category;
$Edit_reqCatList=$this->Edit_reqCatList;
$main = $Edit_reqCatList['main'];
$sub = $Edit_reqCatList['sub'];
$child = $Edit_reqCatList['child'];
$task_cnt = count($this->rfplinetasks);
$adddocs_cnt = count($this->rfpuploadfiles);
$model=$this->getModel('rfp');
$task = $_REQUEST['task'];
for($i=0;$i<count($reqCatList);$i++)
{
	$pid = $reqCatList[$i]['id'];
	$reqCatList2=$model->getSplRequiremntCats($pid);
	$reqCatList[$i]['subcat'] = $reqCatList2;
	//$cnt = count($reqCatList[$i]['subcat']);
	for($j=0;$j<count($reqCatList[$i]['subcat']);$j++)
	{
		$pid2 = $reqCatList[$i]['subcat'][$j]['id'];
		$reqCatList3=$model->getSplRequiremntCats($pid2);
		$reqCatList[$i]['subcat'][$j]['subcat2'] = $reqCatList3;
	}
}
//echo $reqCatList[1][subcat][0]['id'];
//$main = implode(',',$main);
//print_r($reqCatList);exit;
$user=& JFactory::getuser();
?> 
<?php
if($user->user_type == 13 && $user->accounttype=='master')
$itemid = '240';
else if($user->user_type == 13 && $user->accounttype!='master')
$itemid = '119';
else
$itemid = '129';
?>
<link rel="stylesheet" media="all" type="text/css" href="<?php echo Juri::base(); ?>components/com_camassistant/skin/css/jquery1.css" />
<script type="text/javascript" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/js/jquery-ui-1.8.6.custom.min.js"></script>
<script type="text/javascript" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/js/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/js/jquery.elastic.js"></script>
<script>

G = jQuery.noConflict();
window.addEvent('domready', function() {
			SqueezeBox.initialize({});
			$$('input.modal').each(function(el) {
				el.addEvent('click', function(e) {
				new Event(e).stop();
					inputString=G('#industry_id').val();
					if(inputString){
el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task=showindustryform&amp;formid='+inputString+'&lcnt='+id1+'';
var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 780, y:580}}"))
	SqueezeBox.fromElement(el,options);
					}else{
					alert('Please Select The industry');
					}
				});
			});

		});

G = jQuery.noConflict();
function deletelinetask(inputString){
	 if (confirm("Are you sure you want to delete")) {
		G.post("index2.php?option=com_camassistant&controller=rfp&task=deletelinetask", {queryString: ""+inputString+""}, function(data){
				G('#line_task'+inputString).html('');
			});

	 }
	}

function deletelineupload(taskid,num){
var res = confirm("Are you sure you want to remove this file from the RFP?");

if(res==true){
window.parent.document.getElementById('lineuploads'+taskid).value ='';
window.parent.document.getElementById('delimg'+taskid).style.display ='none';
window.parent.document.getElementById('uploadfile'+taskid).style.display ='none';
window.parent.document.getElementById('newSelector'+num).style.display ='none';
//window.parent.document.getElementById('downloadfile'+taskid).style.display ='none';
/*
if(taskid>20){
window.parent.document.getElementById('requiredoprice'+taskid).style.display ='none';
}
*/
//window.parent.document.getElementById('upload_file'+taskid).innerHTML ='<a href="javascript:linetaskupload(\''+taskid+'\');"><img src="<? //echo juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif" alt="upload a file"></a>';
    }
}
function deletelineupload_line(taskid){
var res = confirm("Are you sure you want to remove this file from the RFP?");

if(res==true){
  //alert(taskid);
window.parent.document.getElementById('line_uploads'+taskid).value ='';
window.parent.document.getElementById('upload_file'+taskid).style.display ='none';
window.parent.document.getElementById('downloadfile'+taskid).style.display ='none';
/*
if(taskid>20){
window.parent.document.getElementById('requiredoprice'+taskid).style.display ='none';
}

window.parent.document.getElementById('upload_file'+taskid).innerHTML ='<a href="javascript:linetaskupload(\''+taskid+'\');"><img src="<? echo juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif" alt="upload a file"></a>'; */
}
}
function addproperty(id){
if(id=='addp'){
el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task=addproperty';
var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 700, y:450}}"))
SqueezeBox.fromElement(el,options);
}
	/*G.post("index2.php?option=com_camassistant&controller=rfp&task=getpmid", {pid: ""+id+""}, function(data){
	G('.editlinkmans').attr('href','index.php?option=com_camassistant&controller=propertymanager&task=customer_edit_form&pmanager_id='+data+'&Itemid=<?php //echo $itemid; ?>');
	});*/
/*G.post("index2.php?option=com_camassistant&controller=rfp&task=getphonenumber", {pid: ""+id+""}, function(data){
document.getElementById('showphone').innerHTML = data;
document.getElementById('hidephone').style.display = 'none';
});
G.post("index2.php?option=com_camassistant&controller=rfp&task=gainmanager", {pid: ""+id+""}, function(data){
document.getElementById('manager_name').innerHTML = data;
document.getElementById('hiddenmanager').style.display = 'none';
});*/
	
G.post("index2.php?option=com_camassistant&controller=rfp&task=getimage", {pid: ""+id+""}, function(data){
document.getElementById('imagediv').innerHTML = data;
G('.basicinfo').show();
});
	
}

function linetaskupload(id){
property_id=G('#property_id').val();
inputString1=G('#industry_id').val();
//alert(property_id);
if((property_id)&&(inputString1)){

    el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task=upload_select&taskid='+id+'&pid='+property_id+'&mid='+<?php echo $user->id; ?>;
//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=popupdocs&task=opendocs&taskid='+id+'&pid='+property_id+'&mid='+<?php echo $user->id; ?>;
//SqueezeBox.fromElement(el);
var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 700, y:450}}"))
SqueezeBox.fromElement(el,options);
}else{
alert('Please Select the Property and Industry.');
}
}

function sowrfp(task) {
industry=G('#industry_id').val();
property=G('#property_id').val();
//if((industry)&&(property)){
	if(task=='pro_hired')
	{
		document.getElementById("licenced").checked=false;
		document.getElementById("submenu1").style.display='none';
		document.getElementById("sub_req_id1").checked=false;
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		document.getElementById('someone_engineer').style.display='none';
		el="index2.php?option=com_content&view=article&id=122";
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
		SqueezeBox.fromElement(el,options);
		//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;
	} else if(task=='pro_hired_camassitant'){
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		/*document.getElementById('line_task').style.display='';
		document.getElementById('upload_file').style.display='';*/
		document.getElementById('someone_engineer1').style.display='none';
		document.getElementById('someone_engineer2').style.display='none';
		document.getElementById('someone_engineer').style.display='';
		document.getElementById("choose_tasks1a").checked=false;
		document.getElementById("choose_tasks1b").checked=false;
		document.getElementById("licenced").checked=true;
		document.getElementById("submenu1").style.display='';
		document.getElementById("sub_req_id1").checked=true;
		//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;
	}  else if(task=='pro_hired_camassitant1'){
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		task='pro_hired_camassitant';
		/*document.getElementById('line_task').style.display='';
		document.getElementById('upload_file').style.display='';*/
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer1').style.display='';
		document.getElementById('someone_engineer2').style.display='none';
		document.getElementById("choose_tasks21").checked=false;
		document.getElementById("choose_tasks22").checked=false;
		/*el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&formid=23&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);*/

	} else if(task=='pro_hired_camassitant2'){
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer1').style.display='none';
		document.getElementById('someone_engineer2').style.display='';
		document.getElementById("choose_tasks31").checked=false;
		document.getElementById("choose_tasks32").checked=false;
		/*el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&formid=47&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);*/
		//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;
	} else if(task=='pro_hired_camassitant1_eng'){
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer1').style.display='';
		el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&direct=form&formid=106&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
	} else if(task=='pro_hired_camassitant2_arc'){
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer1').style.display='';
		el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&direct=form&formid=106&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
	} else if(task=='pro_hired_camassitant1_eng1'){
		document.getElementById('line_task').style.display='';
		document.getElementById('upload_file').style.display='';
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer2').style.display='';
		el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&direct=form&formid=106&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
	} else if(task=='pro_hired_camassitant2_arc1'){
		document.getElementById('line_task').style.display='';
		document.getElementById('upload_file').style.display='';
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer2').style.display='';
		el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&direct=form&formid=106&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
	} else {
		document.getElementById("licenced").checked=false;
		document.getElementById("submenu1").style.display='none';

		document.getElementById("sub_req_id1").checked=false;
		document.getElementById('someone_engineer').style.display='none';
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		el="index2.php?option=com_content&view=article&id=121";
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
		//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;
	}

	<?php /*?>el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;<?php */?>
	/*var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);*/
//}else{
	//alert('Please Fill the Property And Industry');
//}


}


//

//
function removeperform(){
G('#sub_performother').css('display','');
//G('#sub_perform1').css('display','none');
}
function showme(){
G('#sow_me').css('display','block');
G('#someone_me').css('display','none');
}
function showsomeone(){
G('#sow_me').css('display','none');
G('#someone_me').css('display','block');
}

function addEvent1() {
linetask=$('#line_task').html();
G('#newdiv').prepend(linetask);
}


//

//
function validate_sitevisit()
{
	var chks2 = document.getElementsByName('site_visit[]');
	var bidders_info = document.getElementsByName('bidders_info[]');
	var hasChecked2 = false;
	var details=0;
	for (var i = 0; i < chks2.length; i++)
	{
	if (chks2[i].checked)
	{
		if(bidders_info[i].value=='' || bidders_info[i].value=='Please provide details here')
		{
		document.getElementById('details').value='no';
		} else {
		document.getElementById('details').value='yes';
		}
		hasChecked2 = true;
		break;
	}
	}
	if (hasChecked2 == false)
	return false;
	else
	return true;
}
function fn_submitRFPd(rfpType)
{
	var frm=document.adminForm;
	if(frm.property_id.value=='')
	{
		alert("Please choose your property name");
		frm.property_id.focus();
		return;
	} else if(rfpType=='cancel'){
			var conf = confirm("Are you sure you want to leave the RFP and lose your current work?");
				if(conf == true){
				window.location.assign("index.php?option=com_camassistant&controller=rfpcenter&task=dashboard&Itemid=125")
				}
				else{
				}
	} else {
	frm.controller.value="rfp";
			 frm.task.value="submit_rfp";
			 frm.rfp_type.value=rfpType;
			 frm.submit();
	}
}
function fn_submitRFP(rfpType)
{
//alert("can");
	frm=document.adminForm;

	
	var sitevisit=validate_sitevisit();
	//alert(diff);
	/*for(var s=1; s<=id1; s++)
	{
		 if(document.getElementById('title_task'+s).value == 'Enter Title of Line Item Task')
		 {
		 alert('Please Enter Title of Line Item Task');
		 document.getElementById('title_task'+s).value='';
		 document.getElementById('title_task'+s).focus();
		 return ;
		 }
	 }*/
	if(frm.property_id.value=='')
	{
		alert("Please choose your property name");
		frm.property_id.focus();
		return;
	} else if(frm.projectName.value=='') {
		alert("Please enter Reference name");
		frm.projectName.focus();
		return;
	} else if(frm.industry_id.value=='') {
		alert("Please choose your Industry Name");
		frm.industry_id.focus();
		return;
	} else if(frm.proposalDueDate.value=='') {
		alert("Please select vendor proposal due Date");
		frm.proposalDueDate.focus();
		return;
	/*} else if(frm.proposalDueTime.value=='') {
		alert("Please select vendor proposal Ending Time");
		frm.proposalDueTime.focus();
		return;*/
	} else if(frm.proposalDueDate.value) {
		if(sitevisit==false) {
			alert("Please select at least one from the site visit list");
			return;
		} else if(document.getElementById('details').value=='no') {
			alert("Please enter the Site Visit information");
			return;
		}  /*else if(frm.terms.checked==false ) {
			alert("You must accept the terms and conditions to submit your RFP");
			frm.terms.focus();
			return;
		}*/ else {
			var lines = 0;
			G('.totalblocks').each(function(){
				lines++;
			});
			id1 = lines ;

			// var id1='1';

			for(var s=1; s<=id1; s++)
			{

				var idname = 'title_task'+s;
				 if(document.getElementById('title_task'+s).value == 'Enter Title of Line Item Task')
				 {
				 alert('Please Enter Title of Line Item Task');
				 document.getElementById('title_task'+s).value='';
				 document.getElementById('title_task'+s).focus();
				 return ;
				 }
				
				if(document.getElementById('line_taskdesc'+s).value == '')
				 {
				 alert('Please enter line item description');
				 document.getElementById('line_taskdesc'+s).value='';
				 document.getElementById('line_taskdesc'+s).focus();
				 return ;
				 }
					 
			 }
			frm.controller.value="rfp";
			//frm.task.value="update_rfp";
			frm.rfp_type.value=rfpType;
			frm.submit();
		}
	}
}

function openmenu(val)
{
	//alert(document.getElementById("submenu"+val).style.display);
	//alert(val);
	if(document.getElementById("submenu"+val).style.display=="none")
	{
	document.getElementById("submenu"+val).style.display="";
	if(val==11)
			document.getElementById('req_id19').checked=true;
	if(val==12 && document.getElementById('sub_req_id3').checked==true)
	document.getElementById('liability'+val).style.display='';
	//document.getElementById("sr_cat").checked="true";
	}
	else
	{
	document.getElementById("submenu"+val).style.display="none";
	//document.getElementById("sr_cat").checked="false";
	}

}//alert(document.getElementById("submenu"+val).style.display);
	/*if(document.getElementById("submenu"+val).style.display=="none")
	{
	document.getElementById("submenu"+val).style.display="";
	//document.getElementById("sr_cat").checked="true";
	}
	else
	{
	document.getElementById("submenu"+val).style.display="none";
	//document.getElementById("sr_cat").checked="false";
	}

}*/

	var task = '<?PHP echo $task; ?>';
	var id1 = '0';
	var cnt =  '';
	if(task == 'editrfp')
	 id1=<?PHP echo $task_cnt; ?>;
	 else if(id1=='0' && task != 'edit'){
	 id1='1';
	}
	//if(!id1)
//	id1=<?PHP //echo $task_cnt; ?>;

	var endid1;
	function addEvent1(pid)
	{
		//document.getElementById("removeevent1").style.display = "block";
		/*if (id1<10)
		{ */
			//alert(id1);
			if(id1 == '0')
			id1=<?PHP echo $task_cnt; ?>;
			id1++;
			
			var tot = 1;
			G('.totalblocks').each(function(){
				tot++;
			});
			id1 = tot ;
			
			var arrlicen=new Array();
			var ni = document.getElementById('newdiv');
			var numi = document.getElementById('theValue');
			//alert(numi.value);
			var num = (document.getElementById("theValue").value -1)+ 2;
			//alert(num);
			numi.value = num;
			var divIdName = "newSelect"+id1;
			 // newitem='<div id=\'line_task'+id1+'\'><div class="lineitem_pan_row"><p style="padding-top: 35px;"></p><span class="grey_12">Line Item #<span id=\'PLN_no'+id1+'\'>'+id1+'</span>:</span><div class="lineitem_pan"><input type="text" id=\'title_task'+id1+'\' value="Enter Title of Line Item Task" onblur="if (this.value == \'\') this.value = \'Enter Title of Line Item Task\'" onfocus="if (this.value == \'Enter Title of Line Item Task\')this.value = \'\'"  class="other_tfield" style="width: 300px;" name="linetaskname[]">&nbsp;<span class="redstar">*</span><input type="text" value="Frequency" onblur="if (this.value ==\'\') this.value =\'Frequency\'" onfocus="if (this.value == \'Frequency\') this.value = \'\'" class="other_tfield" style="width: 280px; margin-left: 32px;" name="rfpreference[]"><div class="clear"></div><p style="padding-top: 5px;"></p><textarea style="border: 1px solid rgb(215, 215, 215); padding: 5px; background: rgb(247, 247, 247) none repeat scroll 0% 0%; width: 625px; height: 45px; font-family: arial; font-size: 12px; color: rgb(125, 125, 125); -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" id="line_taskdesc'+id1+'" name="task_desc[]"></textarea></div><div style="float: left; padding-left: 10px;"><strong><input type="checkbox"   name="is_req_taskvendors[]" value="1">Require</strong> vendors to assign a <strong>Dollar Value</strong> to this Line Item. </div><div class="color_butons"><input type="hidden" checked="" id="line_uploads'+id1+'" name="linetask_uploads[]" value=""><span id="upload_file'+id1+'"><a href="javascript:linetaskupload('+id1+');"><img alt="upload a file" src="<?php //echo Juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif"></a></span><span id=\'PLN_delete'+id1+'\'> <a href="javascript:removeEvent1('+id1+');" ><img height="21"  alt="Add another line item task" src="<?php //echo Juri::base(); ?>components/com_camassistant/skin/images/removelineitemtask.gif"></a></span></div><div class="clear"></div></div></div>';
			 			// newitem='<div id=\'line_task'+id1+'\'><div class="lineitem_pan_row"><p style="padding-top: 35px;"></p><span class="grey_12">Line Item #'+id1+':</span><div class="lineitem_pan"><input id=\'title_task'+id1+'\' type="text" value="Enter Title of Line Item Task" onblur="if (this.value == \'\') this.value = \'Enter Title of Line Item Task\'" onfocus="if (this.value == \'Enter Title of Line Item Task\')this.value = \'\'"  class="other_tfield" style="width: 300px;" name="linetaskname[]">&nbsp;<span class="redstar">*</span><input type="text" value="Frequency" id="frequency'+id1+'" onblur="if (this.value ==\'\') this.value =\'Frequency\'" onfocus="if (this.value == \'Frequency\') this.value = \'\'" class="other_tfield" style="width: 239px; margin-left: 32px;" name="rfpreference[]"><span class="hasTip2" title="Example: one-time, upon scheduled visits, daily, weekly, bi-weekly, monthly, quarterly, annually, or specific dates."> <img align="right" style="margin-bottom:-8px; margin-right: 0px;" alt="info" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/info_icon3.png"></span><div class="clear"></div><p style="padding-top: 5px;"></p><textarea style="border: 1px solid rgb(215, 215, 215); padding: 5px; background: rgb(247, 247, 247) none repeat scroll 0% 0%; width: 625px; height: 45px; font-family: arial; font-size: 12px; color: rgb(125, 125, 125); -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" id="line_taskdesc'+id1+'" name="task_desc[]"></textarea></div><div style="float: left; padding-left: 10px;"><strong><input type="checkbox"   name="is_req_taskvendors['+id1+']" id="price'+id1+'" value="1">Require</strong> vendors to assign a <strong>Dollar Value</strong> to this Line Item. </div><div class="color_butons"><input type="hidden" checked="" id="line_uploads'+id1+'" name="linetask_uploads[]" ><span id="delimg'+id1+'" style="display:none" title="Remove From RFP"><img src="<?php echo Juri::base(); ?>templates/camassistant_left/images/delete.gif" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload('+id1+');"/></span><span id="upload_file'+id1+'" style="float:left;font-size:10px;width:auto;padding-right:5px;"><a href="javascript:void(0);" onclick="linetaskupload('+id1+');"><img alt="upload a file" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif"></a></span> <a href="javascript:removeEvent1('+id1+');" ><img height="21"  alt="Add another line item task" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/removelineitemtask.gif"></a></div><div class="clear"></div></div></div>';
	newitem='<div class="linetasksclass" id=\'line_task'+id1+'\'><div class="lineitem_pan_rfpline"><h3 class="lineitemheading">Line Item #<span id="LM_'+id1+'" class="blocknumbers">'+id1+'</span>:</h3><div class=""><input type="hidden" name="old_taskids[]" /><p style="height:10px"></p><strong>Title:</strong><br><input id=\'title_task'+id1+'\' type="text" value="Enter Title of Line Item Task" onblur="if (this.value == \'\') this.value = \'Enter Title of Line Item Task\'" onfocus="if (this.value == \'Enter Title of Line Item Task\')this.value = \'\'"  class="other_tfield" style="width: 618px;" name="linetaskname_2'+id1+'[]">&nbsp;<span class="redstar">*</span><div class="clear"></div><p style="padding-top: 17px;"></p><strong>Description:</strong><br><textarea style="border: 1px solid rgb(215, 215, 215); padding: 5px; width: 612px; height: 45px; font-family: arial; font-size: 12px; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" id="line_taskdesc'+id1+'" class="other_tfield_desc" name="task_desc_2'+id1+'[]"></textarea><span class="redstarnew">*</span><div style="float: left; margin-left:-6px;"><strong><table><tr><td><input type="checkbox" class="price_lines"  name="is_req_taskvendors_2'+id1+'[]" id="price'+id1+'" value="1" onclick="javascript:check_hiddenvalue('+id1+');"></td><input type="hidden" name="hidden_taskvendors_2'+id1+'[]" value="0" id="hidden_price'+id1+'" /></strong><td>Require Vendors to assign a dollar value to this Line Item</td></tr></table></div><div class="clear"></div><p style="height:20px;"></p><a class="upload_new_files_rfp" href="javascript:void(0);" onclick="addEventa2('+id1+');"></a><span class="deletelines_items" id="DL_'+id1+'" style="margin-left:10px;"><a href="javascript:removeEvent1('+id1+');" class="remove_lineitem_rfp_from" ></a></span></span> <div class="clear"></div><div class="newdivaclass" id="newdiva2'+id1+'"></div><input type="hidden" checked="" id="line_taskno" class="linetasknumbers" name="line_taskno[]" value="2'+id1 +'" ></div></div></div>';
			var newdiv = document.createElement('div');
			newdiv.setAttribute("id",divIdName);
			newdiv.setAttribute("class","totalblocks");
			newdiv.innerHTML = newitem;
			ni.appendChild(newdiv);
			// if(pid==''){
//G('#line_taskdesc'+id1).elastic();
//G('#line_taskdesc'+id1).trigger('update');
//}
	//}
	/*if(id1==10)
		document.getElementById("addevent1").style.display = "none";*/
	}

/*G(document).ready(function(){
for(j=1; j<=id1; j++){
G('#line_taskdesc'+j).elastic();
G('#line_taskdesc'+j).trigger('update');
}

});*/

/*	function autogrow(){
G('#line_taskdesc'+id1).elastic();
G('#line_taskdesc'+id1).trigger('update');
	}*/
	function remove_Event1(divNum)
	{
			G("div").remove("#newSelect"+divNum);
	}
	/*function removenewEvent1(divNum)
	{

		var res = confirm("Are you sure you want to permanently delete this Line Item Task?");
		if(res==true)
		{
			//divNum = document.getElementById("theValue").value;
			if(divNum != 0 )
			{
				var d = document.getElementById('newdiv');
				var olddiv = document.getElementById("newSelect"+divNum);
				d.removeChild(olddiv);

				var numi = document.getElementById('theValue');
				var num = document.getElementById("theValue").value -1;
				numi.value = num;
			}
			//id1--;
		 }

	}*/

	function removeEvent1(divNum)
	{

		var res = confirm("Are you sure you want to permanently delete this Line Item Task?");
		var idx;
		var idx2;
		var gtid;

		if(res==true)
		{
			G("div").remove("#newSelect"+divNum);
			var l = 1;
			G('.totalblocks').each(function(){
				//alert(divNum);
				G(this).attr("id","newSelect"+l);
				G(this).find('.blocknumbers').html(l);
				G(this).find('.blocknumbers').attr("id","LM_"+l);
				if(l == 1){
				G(this).find('.linetasknumbers').val("2"+l);
				G(this).find('.newdivaclass').attr("id","newdiva2"+l);
				G(this).find('.upload_new_files_rfp').attr("onclick","addEventa2("+l+");");
				G(this).find('.other_tfield').attr("name","linetaskname_2"+l+"[]");
				G(this).find('.other_tfield_desc').attr("name","task_desc_2"+l+"[]");
				}
				else{
				G(this).find('.linetasknumbers').val("2"+l);
				G(this).find('.newdivaclass').attr("id","newdiva2"+l);
				G(this).find('.upload_new_files_rfp').attr("onclick","addEventa2("+l+");");
				G(this).find('.other_tfield').attr("name","linetaskname_2"+l+"[]");
				G(this).find('.other_tfield_desc').attr("name","task_desc_2"+l+"[]");
				}
				G(this).find('.linetasksclass').attr("id","line_task"+l);
				G(this).find('.other_tfield').attr("id","title_task"+l);
				G(this).find('.other_tfield_desc').attr("id","line_taskdesc"+l);
				G(this).find('.deletelines_items').attr("id","DL_"+l);
				G(this).find('.deletelines_items').html('<a class="remove_lineitem_rfp_from" href="javascript:removeEvent1('+l+');"></a>');
				G(this).find('.price_lines').attr("id","price"+l);
				l++;
			});
				/*for(idx=1; idx<=id1; idx++)
				{
					if(idx == divNum)
					G("div").remove("#newSelect"+divNum);
					else if(idx > divNum)
					{
					idx2 = idx-1;
					G("#line_task"+idx).attr("id","line_task"+idx2);
					G("#title_task"+idx).attr("id","title_task"+idx2);
					G("#line_taskdesc"+idx).attr("id","line_taskdesc"+idx2);
					G("#newSelect"+idx).attr("id","newSelect"+idx2);
					G("#LM_"+idx).attr("id","LM_"+idx2);
					G("#LM_"+idx2).html(idx2);
					G("#DL_"+idx).attr("id","DL_"+idx2);
					G("#DL_"+idx2).html('<a class="remove_lineitem_rfp_from" href="javascript:removeEvent1('+idx2+');"></a>');
					G("#newdiva2"+idx).attr("id","newdiva2"+idx2);
					}
				}

			
			id1 = id1-1;*/
			var ai = 1;
			G('.upload_new_files_rfp').each(function(){
				G(this).attr("onclick","addEventa2("+ai+")");
				ai++;
			});

		}
	}


	/*if(id1<=cnt)
	document.getElementById("removeevent1").style.display = "none";*/

	//}
	function removeEventedit(divNum){


	//G("#title_task"+id).attr("id","title_task"+id);
		G("div").remove("#newSelect"+divNum);
		//G('#newSelect'+divNum).html('');
		id1 = id1-1;
		var x;
			for(x=2; x<=id1; x++)
			{
				gtid = parseInt(x)+1;
				if(x>=divNum)
				{
				//alert('if');
				gtid = parseInt(x)+1;
				G("#PLN_"+gtid).html(x); //to change divid value
				G("#PLN_no"+gtid).html(x);
				G("#PLN_no"+gtid).attr("id","PLN_no"+x);
				G("#newSelect"+gtid).attr("id","newSelect"+x);
				G("#line_task"+gtid).attr("id","line_task"+x);
				G("#title_task"+gtid).attr("id","title_task"+x);
				G("#line_taskdesc"+gtid).attr("id","line_taskdesc"+x);
				G("#PLN_delete"+gtid).attr("id","PLN_delete"+x);
				G("#PLN_delete"+x).html('<a class="remove_lineitem_rfp_from" href="javascript:removeEvent1('+x+');"></a>');
				}
				else
				{
				//alert('else');
				G("#PLN_"+x).html(x); //to change divid no
				G("#PLN_no"+x).html(x);
				G("#PLN_no"+x).attr("id","PLN_no"+x);
				G("#newSelect"+x).attr("id","newSelect"+x);
				G("#line_task"+x).attr("id","line_task"+x);
				G("#title_task"+x).attr("id","title_task"+x);
				G("#line_taskdesc"+x).attr("id","line_taskdesc"+x);
				G("#PLN_delete"+gtid).attr("id","PLN_delete"+x);
				G("#PLN_delete"+x).html('<a class="remove_lineitem_rfp_from" href="javascript:removeEvent1('+x+');"></a>');
				}
			}

	}

</script>

<script language="javascript">


	//

	var id2 =  '';
	var cnt2 =  '';
	if(!id2)
	id2=<?PHP echo $adddocs_cnt; ?>;
	if(id2=='0'){
	var id2='1';
	}
	var endid2;
	function addEvent2()
	{
		//document.getElementById("removeevent2").style.display = "block";
		/*if (id1<10)
		{ */

	//alert(id2);
	//var id2=1;
		id2++;
			var arrlicen2=new Array();
			var ni2 = document.getElementById('newdiv2');
			var numi2 = document.getElementById('theValues');
			var num2 = (document.getElementById("theValues").value -1)+ 2;
			//alert(num);
			numi2.value = num2;
			var divIdName2 = "newSelector"+num2;

                          newitem2='<table><tr><input type="hidden" name="old_docids[]" /><td><span id="delimg'+id2+''+num2+'" style="display:none" title="Remove From RFP"><img src="<?php echo Juri::base(); ?>templates/camassistant_left/images/red.png" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload('+id2+''+num2+','+num2+');"/></span></td><td><span id="uploadfile'+id2+''+num2+'" style="float:left;width:auto;padding-right:5px; font-size:14px;"></span></td><input type="hidden" checked="" id="lineuploads'+id2+''+num2+'" name="attachmnent[]" ><div class="clear"></div></tr></table>';
				//newitem2='<div id="upload_file"><div class="lineitem_pan_row"><span class="grey_12">Additional Document/Specifications #'+id2+':</span><div style="padding: 10px 0pt 10px 5px; height:30px;" class="lineitem_pan"><input type="hidden" name="old_docids[]" /><span id="delimg2'+id2+'" style="display:none" title="Remove From RFP"><img src="<?php echo Juri::base(); ?>templates/camassistant_left/images/delete.gif" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload(2'+id2+');"/></span><span id="upload_file2'+id2+'" style="float:left;font-size:10px;width:auto;padding-right:5px;"><a href="javascript:linetaskupload(2'+id2+');"><img alt="upload a file" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif"></a></span></div><input type="hidden" checked="" id="line_uploads2'+id2+'" name="attachmnent[]" ><div style="float: left; padding-left: 0px;"><span id="requiredoprice2'+id2+'" style="display:none;"  ><input type="checkbox" value="1" name="require_docprice[]" id="docprice'+id2+'" onclick="javascript:check_require_docprice('+id2+')"><input type="hidden" name="hidden_require_docprice[]" value="0" id="hidden_docprice'+id2+'" /><strong>Require</strong> vendors to assign a <strong>Dollar Value </strong>to this Attachment.</span></div><div class="color_butons"><a href="javascript:removeEvent2();"><img height="22"  alt="Upload another attachment" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/removeattachement.gif"></a></div><div class="clear"></div></div><div class="clear"></div>';
			//newitem2='<div id="upload_file"><div class="lineitem_pan_row"><span class="grey_12">Additional Document/Specifications #'+id2+':</span><div style="padding: 10px 0pt 10px 5px; height:30px;" class="lineitem_pan"><span id="delimg2'+id2+'" style="display:none" title="Remove From RFP"><img src="<?php echo Juri::base(); ?>templates/camassistant_left/images/delete.gif" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload(2'+id2+');"/></span><span id="upload_file2'+id2+'" style="float:left;font-size:10px;width:auto;padding-right:5px;"><a href="javascript:linetaskupload(2'+id2+');"><img alt="upload a file" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif"></a></span></div><input type="hidden" checked="" id="line_uploads2'+id2+'" name="attachmnent[]" ><div style="float: left; padding-left: 10px;"><span id="requiredoprice2'+id2+'" style="display:none;"  ><input type="checkbox" value="1" name="require_docprice['+id2+']"><strong>Require</strong> vendors to assign a <strong>Dollar Value </strong>to this Attachment.</span></div><div class="color_butons"><a href="javascript:removeEvent2('+num2+');"><img height="22"  alt="Upload another attachment" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/removeattachement.gif"></a></div><div class="clear"></div></div><div class="clear"></div></div>';
//newitem2='<div id="upload_file"><div class="lineitem_pan_row"><span class="grey_12">Additional Document/Specifications #'+id2+':</span><div style="padding: 10px 0pt 10px 5px;" class="lineitem_pan"><input type="file" name="attachmnent[]" /></div><div style="float: left; padding-left: 10px;"><input type="checkbox" value="" name="require_docprice[]"><strong>Require</strong> vendors to assign a <strong>Dollar Value </strong>to this Attachment.</div><div class="color_butons"><a href="javascript:removeEvent2();"><img height="22"  alt="Upload another attachment" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/removeattachement.gif"></a></div><div class="clear"></div></div></div>';


			var newdiv2 = document.createElement('div');
			newdiv2.setAttribute("id",divIdName2);
			newdiv2.innerHTML = newitem2;
			ni2.appendChild(newdiv2);
                        linetaskupload(id2+''+num2);
	//}
	/*if(id1==10)
		document.getElementById("addevent1").style.display = "none";*/
	}
         var id2 =  '';
	var cnt2 =  '';
	if(!id2)
	id2=<?PHP echo $adddocs_cnt; ?>;
	if(id2=='0'){
	var id2='1';
	}
	var endid2;
	function addEventa2(id2)
	{
		//document.getElementById("removeevent2").style.display = "block";
		/*if (id1<10)
		{ */

	//alert(id2);
	//var id2=1;
		//id2++;
               // alert(id2);
			var arrlicen2=new Array();
			var ni2 = document.getElementById('newdiva2'+id2);
			var numi2 = document.getElementById('theValue');
			var num2 = (document.getElementById("theValue").value -1)+ 2;
			//alert(num);
			numi2.value = num2;
			var divIdName2 = "newSelector"+num2;

                        newitem2='<table><tr><input type="hidden" name="old_docids[]" /><td><span id="delimg'+id2+''+num2+'" style="display:none" title="Remove From RFP"><img src="<?php echo Juri::base(); ?>templates/camassistant_left/images/red.png" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload('+id2+''+num2+','+num2+');"/></span></td><td><span id="uploadfile'+id2+''+num2+'" style="float:left;width:auto;padding-right:5px; font-size:14px;"></span></td><input type="hidden" value=" " name="linetask_uploads_2'+id2+'[]" id="lineuploads'+id2+''+num2+'"  ></tr></table>';


			var newdiva2 = document.createElement('div');
                        //alert(newdiva2);
			newdiva2.setAttribute("id",divIdName2);
			newdiva2.innerHTML = newitem2;
			ni2.appendChild(newdiva2);
	//}
	/*if(id1==10)
		document.getElementById("addevent1").style.display = "none";*/

		linetaskupload(id2+''+num2);
	}
	function remove_Event2(divNum2)
	{
           var res = confirm("Are you sure you want to remove this file from the RFP?");

                if(res==true){
			G("tr").remove("#upload_f"+divNum2);
                }

	}
	function removeEvent2()
	{
		divNum2 = document.getElementById("theValues").value;
		if(divNum2 != 0 )
		{
			var d2 = document.getElementById('newdiv2');
			var olddiv2 = document.getElementById("newSelector"+divNum2);
			d2.removeChild(olddiv2);
			var numi2 = document.getElementById('theValues');
			var num2 = document.getElementById("theValues").value -1;
			numi2.value = num2;
		}
		id2--;


	}


</script>

<script language="javascript" type="text/javascript">
function check_hiddenvalue(price_id)
{
	//alert(document.getElementById('price'+price_id).checked);
	if(document.getElementById('price'+price_id).checked==true)
	document.getElementById('hidden_price'+price_id).value=1;
	else
	document.getElementById('hidden_price'+price_id).value=0;
}
//
function check_require_docprice(doc_id)
{
	//alert(document.getElementById('price'+price_id).checked);
	if(document.getElementById('docprice'+doc_id).checked==true)
	document.getElementById('hidden_docprice'+doc_id).value=1;
	else
	document.getElementById('hidden_docprice'+doc_id).value=0;
}
</script>

<script type="text/javascript">


<!--
	function validateForm( frm ) {
		var valid = document.formvalidator.isValid(frm);
		if (valid == false) {
			// do field validation
			// your custom code here
			return false;
		} else {
			frm.submit();
		}
	}
	function fun_showdiv()
	{
		document.getElementById('showdiv').style.display='';
	}
	/*function open_new_window(url)
	{
	new_window = window.open(url,'window_name','toolbar=0,menubar=0,resizable=0,dependent=0,status=0,width=550,height=450,left=25,top=25')
	}*/

// -->
function firstindustry(indusid){
	G('#industry_id2 option').removeClass('selectedindustry') ;
	G('#industry_id2 option[value='+indusid+']').addClass('selectedindustry') ;
			// To get the special requirements for this industry
			G.post("index2.php?option=com_camassistant&controller=rfp&task=getspecialrequirements", {industryid: ""+indusid+""}, function(data){
			G('.newspecialrequirements').html(data);
			Custom.init();
			});
			//Completed
	if( indusid == G('#industry_id2 option:selected').val() ) {
	alert("You have already selected this industry below.");
	}
}


function duplicatefirstindustry(indusid){
			// To get the special requirements for this industry
			G.post("index2.php?option=com_camassistant&controller=rfp&task=getspecialrequirements", {industryid: ""+indusid+""}, function(data){
			G('.newspecialrequirements').html(data);
			
			});
			//Completed
}



function removealldocs(){
	var old_all_doc_id = document.getElementsByName('old_all_doc_id[]');
	for (var d = 1; d <= old_all_doc_id.length; d++) {
	G("div").remove("#upload_file"+d);
	}

	}
function getpopuppics(pid){
el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task=uploadpropertypic&pid='+pid;
var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 500, y:350}}"))
SqueezeBox.fromElement(el,options);
}
	
</script>
<script type="text/javascript">
	N = jQuery.noConflict();
	N(document).ready(function() {	
	// To get the general liability insurance sub items
	N('#generalliability').live('click',function(e) {
		if(this.hasClass('active')){
				N('#generalliability').removeClass('active');	
				N('.pre_general').hide();		
				N('.generaloptions').hide();
		}
		else{
				//N('#generalliability_sub').show(data);
				N('.pre_general').show();
				N('.generaloptions').show();
				N('#generalliability').addClass('active');
			}
	});
	//Completed	
	// To get the auto liability insurance sub items
	N('#autoliability').live('click',function(e) {
		if(this.hasClass('active')){
				N('#autoliability').removeClass('active');	
				N('.pre_auto').hide();		
		}
		else{
				//N('#generalliability_sub').show(data);
				N('.pre_auto').show();
				N('#autoliability').addClass('active');
				
			}
	});
	//Completed
	// To get the workers liability insurance sub items
	N('#workersliability').live('click',function(e) {
		if(this.hasClass('active')){
				N('#workersliability').removeClass('active');	
				N('.pre_workers').hide();		
		}
		else{
				//N('#generalliability_sub').show(data);
				N('.pre_workers').show();
				N('#workersliability').addClass('active');
				
			}
	});
	//Completed
	// To get the umbrella liability insurance sub items
	N('#umbrellaliability').live('click',function(e) {
		if(this.hasClass('active')){
				N('#umbrellaliability').removeClass('active');	
				N('.pre_umbrella').hide();		
		}
		else{
				//N('#generalliability_sub').show(data);
				N('.pre_umbrella').show();
				N('#umbrellaliability').addClass('active');
				
			}
	});
	//Completed
	// To get the umbrella liability insurance sub items
	N('#licensingliability').live('click',function(e) {
		if(this.hasClass('active')){
				N('#licensingliability').removeClass('active');	
				N('.pre_lic').hide();		
		}
		else{
				//N('#generalliability_sub').show(data);
				N('.pre_lic').show();
				N('#licensingliability').addClass('active');
							}
	});
	//Completed
	N('#workers_not').live('click',function(e) {
	N('.notaccepted').css('display','block');
	});	
	
	N('#workers_yes').live('click',function(e) {
	N('.notaccepted').css('display','none');
	});
	
	});
</script>
<script type='text/javascript'>
function add_commas_special(arg,x) {
var id = arg.getAttribute('id');
N.post("index2.php?option=com_camassistant&controller=rfpcenter&task=vendorinsstand_calc", {fieldvalue:""+x+""}, function(data){
	if(data != '0.00'){
		N('#'+id).val(data);
	}
	else{
		N('#'+id).val('');
	}
});
}
</script>
<style type="text/css">
.white_light_link {
	background-color:#FFF;
	border:1px solid #5096DB;
	display:none;
	height:250px;
	left:25%;
	overflow:auto;
	padding:5px;
	position:absolute;
	top:800px;
	bottom:0px;
	width:50%;
	z-index:1002;
}
</style>
<style type="text/css">
.checkbox {
	width: 19px;
	height: 25px;
	padding: 0 5px 0 0;
	background: url(checkbox.png) no-repeat;
	display: block;
	clear: left;
	float: left;
}
</style>
<script type="text/javascript">
var checkboxHeight = "25";
var radioHeight = "25";
var selectWidth = "190";


/* No need to change anything after this */


document.write('<style type="text/css">input.styled_3 { display: none; } select.styled_3 { position: relative; width: ' + selectWidth + 'px; opacity: 0; filter: alpha(opacity=0); z-index: 5; } .disabled { opacity: 0.5; filter: alpha(opacity=50); }</style>');

var Custom = {
	init: function() {
		var inputs = document.getElementsByTagName("input"), span = Array(), textnode, option, active;
		for(a = 0; a < inputs.length; a++) {
			if((inputs[a].type == "checkbox" || inputs[a].type == "radio") && inputs[a].className == "styled_3") {
				span[a] = document.createElement("span");
				span[a].className = inputs[a].type;

				if(inputs[a].checked == true) {
					if(inputs[a].type == "checkbox") {
						position = "0 -" + (checkboxHeight*2) + "px";
						span[a].style.backgroundPosition = position;
					} else {
						position = "0 -" + (radioHeight*2) + "px";
						span[a].style.backgroundPosition = position;
					}
				}
				inputs[a].parentNode.insertBefore(span[a], inputs[a]);
				inputs[a].onchange = Custom.clear;
				if(!inputs[a].getAttribute("disabled")) {
					span[a].onmousedown = Custom.pushed;
					span[a].onmouseup = Custom.check;
				} else {
					span[a].className = span[a].className += " disabled";
				}
			}
		}
		inputs = document.getElementsByTagName("select");
		for(a = 0; a < inputs.length; a++) {
			if(inputs[a].className == "styled_3") {
				option = inputs[a].getElementsByTagName("option");
				active = option[0].childNodes[0].nodeValue;
				textnode = document.createTextNode(active);
				for(b = 0; b < option.length; b++) {
					if(option[b].selected == true) {
						textnode = document.createTextNode(option[b].childNodes[0].nodeValue);
					}
				}
				span[a] = document.createElement("span");
				span[a].className = "select";
				span[a].id = "select" + inputs[a].name;
				span[a].appendChild(textnode);
				inputs[a].parentNode.insertBefore(span[a], inputs[a]);
				if(!inputs[a].getAttribute("disabled")) {
					inputs[a].onchange = Custom.choose;
				} else {
					inputs[a].previousSibling.className = inputs[a].previousSibling.className += " disabled";
				}
			}
		}
		document.onmouseup = Custom.clear;
	},
	pushed: function() {
		element = this.nextSibling;
		if(element.checked == true && element.type == "checkbox") {
			this.style.backgroundPosition = "0 -" + checkboxHeight*3 + "px";
		} else if(element.checked == true && element.type == "radio") {
			this.style.backgroundPosition = "0 -" + radioHeight*3 + "px";
		} else if(element.checked != true && element.type == "checkbox") {
			this.style.backgroundPosition = "0 -" + checkboxHeight + "px";
		} else {
			this.style.backgroundPosition = "0 -" + radioHeight + "px";
		}
	},
	clear: function() {
		inputs = document.getElementsByTagName("input");
		for(var b = 0; b < inputs.length; b++) {
			if(inputs[b].type == "checkbox" && inputs[b].checked == true && inputs[b].className == "styled_3") {
				inputs[b].previousSibling.style.backgroundPosition = "0 -" + checkboxHeight*2 + "px";
			} else if(inputs[b].type == "checkbox" && inputs[b].className == "styled_3") {
				inputs[b].previousSibling.style.backgroundPosition = "0 0";
			} else if(inputs[b].type == "radio" && inputs[b].checked == true && inputs[b].className == "styled_3") {
				inputs[b].previousSibling.style.backgroundPosition = "0 -" + radioHeight*2 + "px";
			} else if(inputs[b].type == "radio" && inputs[b].className == "styled_3") {
				inputs[b].previousSibling.style.backgroundPosition = "0 0";
			}
		}
	},
	choose: function() {
		option = this.getElementsByTagName("option");
		for(d = 0; d < option.length; d++) {
			if(option[d].selected == true) {
				document.getElementById("select" + this.name).childNodes[0].nodeValue = option[d].childNodes[0].nodeValue;
			}
		}
	}
}
window.onload = Custom.init;
</script>
<script type="text/javascript">
function PrintDiv() {    
	/*document.getElementById("topborder_row").style.display = 'none';
	document.getElementById("header").style.display = 'none';
	document.getElementById("navbar_in").style.display = 'none';
	document.getElementById("vender_left").style.display = 'none';
	document.getElementById("footer").style.display = 'none';
	document.getElementById("vender_right2").style.width = '907px';
	document.getElementById("vender_right2").style.marginTop = '200px';
	window.print();
	document.getElementById("topborder_row").style.display = '';
	document.getElementById("header").style.display = '';
	document.getElementById("navbar_in").style.display = '';
	document.getElementById("vender_left").style.display = '';
	document.getElementById("footer").style.display = '';
	document.getElementById("vender_right2").style.width = '673px';	
	document.getElementById("vender_right2").style.marginTop = '';*/
	var divToPrint = document.getElementById('vender_right2');
    var popupWin = window.open('', '_blank', 'width=300,height=300');
    popupWin.document.open();
    popupWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</html>');
    popupWin.document.close(); 	
		}	
</script>
<div align="center"><img src="templates/camassistant_left/images/step1.jpg"></div>
<p style="height:40px;"></p>

<div id="vender_right2">
<!-- Top menu starts -->
<!--div align="right" id="topborder_row" style="background:none;"><table><tr><td><input type="button" class="cancelrfpbutton"  onclick="javascript:fn_submitRFPd('cancel');"/></td>
<?php if($_REQUEST['var'] != 'view') { if($_REQUEST['show'] != 1){ ?>
<?php if ($_REQUEST['var']== 'draft' || $_REQUEST['var']== 'copy'){  ?>
<td><input type="button" class="saveasdraft" value="" name="draft" onclick="javascript:fn_submitRFPd('draft');"/></td>
<td><input type="button" class="review_submit" name="rfpbtn" onclick="javascript:fn_submitRFP('review');" style="width:159px;"/></td>
<?php } else if(($_REQUEST['var']== 'copy')||($_REQUEST['var']== 'draft')) { ?>
<td><input type="button" class="review_submit" name="rfpbtn" onclick="javascript:fn_submitRFP('review');" style="width:159px;"/></td>
<?php } else { ?>
<td><input type="button" class="review_submit" name="rfpbtn" onclick="javascript:fn_submitRFP('<?php echo $this->rfpinfo->rfp_type; ?>');" style="width:159px;"/></td>
<?php } ?>
<?php } else if($_REQUEST['show'] = 1) { ?>
<td><input type="button" class="saveasdraft"  name="draft" onclick="javascript:fn_submitRFP('draft');"/></td>
<td><input type="button" class="review_submit" name="rfpbtn" onclick="javascript:fn_submitRFP('review');" style="width:159px;"/></td>
<?php } }
?>
<!--<td><a id="" href="javascript:PrintDiv();"><img src="/dev/templates/camassistant_left/images/PRINT.gif"></a></td>
</tr></table>
</div>-->
<!-- Top menu completed -->

<?php $RFP=$this->userinfo;  ?>
<!-- sof dotshead -->
<?php if($_REQUEST['var'] == 'view'){ ?>
<div id="dotshead_blue">View RFP</div>
<?php } else if($_REQUEST['show'] == 1){ ?>
<?php } else {?> <!-- 
<div id="dotshead_blue">Edit RFP - (RFP#<?php echo sprintf('%06d', $this->rfpinfo->id); ?>)</div>-->
<?php } ?>
<!-- eof dotshead -->
<?php //echo '<pre>'; print_r($this->rfpinfo); ?>
<div id="i_bar">

<div id="i_bar_txt" style="width:600px; text-align:center;">
<?php 
if($this->rfpinfo->rfpfor == '199' || $this->rfpinfo->rfpfor == '205' || $this->rfpinfo->rfpfor=='') { 
echo "<span style='margin-left:53px;'><strong>REQUEST FOR PROPOSALS</strong> (RFP)</span>"; } 
else if($this->rfpinfo->rfpfor == '200' || $this->rfpinfo->rfpfor == '206'){ 
echo "<span style='margin-left:53px;'>Request for Budgetary Pricing</span>"; } 
else if($this->rfpinfo->rfpfor == '201' || $this->rfpinfo->rfpfor == '207'){ 
echo "<span style='margin-left:53px;'>Request for Scope of Work (SOW)</span>"; }  
else{ echo "<span><strong>REQUEST FOR PROPOSALS</strong> (RFP)</span>"; }
?>
</div>

<div id="i_icon" style="padding-right:20px;"><?php
 $user = JFactory::getUser();
if ($user->user_type=='12') { ?>
<a style="text-decoration: none;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&amp;view=article&amp;id=95&amp;Itemid=113"><img src="templates/camassistant_left/images/info_icon2.png" style="padding-left:14px; padding-top:0px;"> </a>
<?php } else { ?>
<a style="text-decoration: none;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&amp;view=article&amp;id=60&amp;Itemid=113"><img src="templates/camassistant_left/images/info_icon2.png" style="padding-left:14px; padding-top:0px;"> </a>
<?php } ?></div>
</div>


<!-- sof table pan -->
<div class="table_pannel">

<!--class="head_greenbg2"-->
<div ><!--sof rfp box-->
<div id="rpf_ifo" style="z-index:1; margin-top:-2px;">

    <div id="i_bar">
<div style="text-align:center;" id="i_bar_txt_small">
<span style="margin-left:23px;">
<strong>CONTACT INFO</strong>
<?php
 $user = JFactory::getUser();
if ($user->user_type=='12') { ?>
<a style="text-decoration: none;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&amp;view=article&amp;id=96&amp;Itemid=113"><img src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/info_icon2.png" alt="info" align="right" style="margin-top: -4px; margin-right: 8px; vertical-align:top;"></a>
<?php } else { ?>
<a style="text-decoration: none;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&amp;view=article&amp;id=94&amp;Itemid=113"><img align="right" style="margin-top: -4px; margin-right: 8px; vertical-align:top;" alt="info" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/info_icon2.png"> </a>
<?php } ?>
 </span></div>
 </div>
 
<?php
$db =& JFactory::getDBO();
$state="SELECT state_name FROM #__state where id='".$RFP->comp_state."'";
$db->Setquery($state);
$state_name = $db->loadResult();


 $manager_property="SELECT property_manager_id FROM #__cam_property where id='".$this->rfpinfo->property_id."'";
$db->Setquery($manager_property);
$managerid = $db->loadResult();

 $use_detail="SELECT name,lastname,phone,extension,email FROM #__users where id='".$RFP->cust_id."'";
$db->Setquery($use_detail);
$user_detail = $db->loadObjectlist();
//echo '<pre>'; print_r($user_detail);
?>
<div id="rpf_ifo_text"><h1 style="line-height:20px;">Property Management Company:</h1>
<?PHP echo $RFP->comp_name;  ?><br />
<?PHP echo $RFP->mailaddress;  ?><br />
<?PHP echo $RFP->comp_city;  ?>, <?PHP echo $state_name;  ?> <?PHP echo $RFP->comp_zip;  ?><br />
P: <?PHP echo $RFP->comp_phno;  ?><br />
F: <?PHP echo $RFP->comp_alt_phno;  ?><br />
<a href="http://<?PHP echo $RFP->comp_website;  ?>" target="_blank"><?PHP echo $RFP->comp_website;  ?></a>
<h1 style="line-height:20px; margin-top:10px;">Property Manager:</h1>

<p id="hiddenmanager"><?PHP echo $user_detail[0]->name;  ?> <?PHP echo $user_detail[0]->lastname;  ?><br /></p>
<p id="manager_name"></p>
<p id="hidephone">P: <?PHP echo $user_detail[0]->phone;  ?> <?PHP if($user_detail[0]->extension) {echo "(x".$user_detail[0]->extension.")";} else{}  ?></p>
<p id="showphone"></p>
<a href="mailto:<?PHP echo $user_detail[0]->email;  ?>">Email Property Manager</a>
<br /><br />
<?php
if($user->user_type == 13)
$class = 'editlinkmans';
else
$class = 'noeditlinkmans';
?>
<a  id="editlinkmans" href="index.php?option=com_camassistant&controller=rfp&task=shareinfo&tmpl=component" class="modal" rel="{ handler:'iframe', size:{x:370, y:300} }">EDIT</a>
</div>
<?php /*?><a href="index.php?option=com_camassistant&controller=rfp&task=shareinfo&tmpl=component" class="modal" rel="{ handler:'iframe', size:{x:370, y:300} }"><img align="right" style="margin-right:-3px;" alt="info sharing preferences" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/infosharing.gif"></a><?php */?> </div>
<!--eof rfp box<span style="margin-left:5px">DEFINE YOUR RFP DETAILS BELOW:</span>-->


 </div>
 <?php
$rfpinfo=$this->rfpinfo;
$rfpuploadfiles=$this->rfpuploadfiles;
$rfplinetasks=$this->rfplinetasks;
$rfpreqinfo=$this->rfpreqinfo;
//echo "<pre>"; print_r($rfpreqinfo);

$db=JFactory::getDBO();
$pimage = "SELECT property_image FROM #__cam_property WHERE id='".$rfpinfo->property_id."' ";
$db->Setquery($pimage);
$filename = $db->loadResult();
if( $filename ) {
		$path2 = $siteURL."components/com_camassistant/assets/images/property_pictures/";
		$path1 = $filename;
		$image = $path2.$path1;	
		$image = str_replace(' ','%20',$image);
		$apath= getimagesize($image);
		$height_orig=$apath[1];
		$width_orig=$apath[0];
		$aspect_ratio = (float) $height_orig / $width_orig;
		$thumb_width =438;
		$thumb_height = round($thumb_width * $aspect_ratio) ;
		if($thumb_height == 0){
		$thumb_height = '307';
		}		
		$image = "<img  width=".$thumb_width." height=".$thumb_height." src='components/com_camassistant/assets/images/property_pictures/".$filename."'>";
		}	
else{
$image = '<div style="margin-left: 2px;"><div style="margin-top:-10px; display:table-cell; text-align:center; vertical-align:middle; width:432px; height:298px; box-shadow:1px 1px 2px 1px #808080;"><a class="uploadimagetext" href="javascript:void(0);" onclick="getpopuppics('. $rfpinfo->property_id .');" >UPLOAD PROPERTY IMAGE</a></div></div>';
}			
  ?>

<div id="imagediv"><?php echo $image; ?></div>
 <br />
 
<div class="basicinfo">
<div class="clear"></div>
 <div id="i_bar" style="margin-top:20px;">
<div style="text-align:center;" id="i_bar_txt_small">
<span>
<strong>BASIC INFORMATION</strong>
 </span></div>
 </div>
 </div>
 
<div class="proposal_form">
<form action="<?php echo JRoute::_( 'index.php' );?>" method="post" name="adminForm" id="adminForm" class="form-validate" enctype="multipart/form-data">
<div class="signup">
<label>Select Property:<span class="redstar">*</span> </label>
<?php
if($_REQUEST['var']!='draft' && $_REQUEST['var']!='copy' && $_REQUEST['show']!='1'){
$disabled = 'disabled';
$style="style=background:#DDD;";
}
?>
<?php echo JHTML::_('select.genericlist', $propertyList, 'property_id',  'size="1" '.$style.' '.$disabled.' class="inputbox "  onchange="addproperty(this.value);""', 'value', 'text', $rfpinfo->property_id);?>
</div>
<br />
<p style="padding-top:10px;">Please select the type of bidding you would like to use for this Request</p>
<div style="margin-top:10px;">
<table cellpadding="0" cellspacing="0"><tr>
<td><input type="radio" onclick="javascript:showproperty()" <?php if($rfpinfo->bidding == 'open'){ echo "checked"; } ?> value="open" name="bidding" style="margin:0px; padding:0px;"></td><td><strong>&nbsp;&nbsp;Open Bidding</td></strong>
<tr><td></td><td><p style="margin-left:7px;">Open bidding allows you to see a Vendorâs quote (pricing) as soon as it is submitted into the system.</p></td></tr>
<tr><td><input type="radio"  <?php if($rfpinfo->bidding == 'seal'){ echo "checked"; } ?>  onclick="javascript:showproperty()" value="seal" name="bidding" style="padding:0px; margin:0px;"></td><td><strong>&nbsp;&nbsp;Sealed Bidding</strong></td></tr>
<tr><td></td><td><p style="margin-left:7px;">Sealed bidding allows you to see a Vendorâs quote (pricing) ONLY after you manually close the RFP.</p></td></tr></table>
</div>

<script language="javascript" type="text/javascript">
function fun_pullname(name)
{
	document.getElementById("title_task1").value=name;
}
function wizard(choose){

if(choose=='3'){

document.getElementById("licenced").checked=true;
document.getElementById("submenu1").style.display='';
document.getElementById("sub_req_id1").checked=true;
//document.getElementById("licenced").disabled=true;
//document.getElementById("sub_req_id1").disabled=true;
}
//frm.is_checked.checked= false
}
</script>
<br />
<div class="signup">
<label>Reference Name for this RFP:<span class="redstar">*</span> </label>
<input type="text" <?php if($_REQUEST['var'] == 'view') { ?> readonly="readonly" <?php }?>  onblur="if (this.value == '') this.value = 'Frequency'" onfocus="if (this.value == 'Frequency') this.value = ''" value="<?php if($rfpinfo->projectName){ echo $rfpinfo->projectName; }else{ echo"Frequency"; } ?>" style="width: 275px;" name="projectName" onchange="javascript:fun_pullname(this.value);">
</div>
<br />
<div class="signup">
<label style="width:340px;">Industry from which you would like to obtain quotes:<span class="redstar">*</span></label>
<?php
if($_REQUEST['var']!='draft' && $_REQUEST['var']!='copy' && $_REQUEST['show']!='1'){
$idisabled = 'disabled';
$style="style=background:#DDD;";
}
?>
<?php echo JHTML::_('select.genericlist', $industryList, 'industry_id', 'size="1" '.$style.' '.$idisabled.'  style="width:283px;" class="inputbox" onchange="firstindustry(this.value);""', 'value', 'text', $rfpinfo->industry_id);?>
</div>
<br />
<div class="signup">
<div class="state">
<label>I would like my proposals by:<span class="redstar">*</span>   	</label>
</div>

<div class="signup">
<div class="clear"></div>
<table cellspacing="0" cellpadding="0" border="0" width="277">
  <tbody><tr>
     <td>
	<?php
	 $date= date('m-d-Y', strtotime('+4 days'));

	if($_REQUEST['date']=='add') { ?>
	<!-- <input type="text" <?php if($_REQUEST['var'] == 'view') { ?> readonly="readonly"  <?php } ?> name="proposalDueDate" id="proposalDueDate" value="<?php echo $date; ?>" onchange="javascript:validate_proposaldate()"  onkeydown="javascript:validate_proposaldate()" onblur="javascript:validate_proposaldate()" readonly="readonly"/>-->
	 <input type="text" <?php if($_REQUEST['var'] == 'view') { ?> readonly="readonly"  <?php } ?> name="proposalDueDate" id="proposalDueDate" value="<?php echo $rfpinfo->proposalDueDate.' '.$rfpinfo->proposalDueTime; ?>"  readonly="readonly"/>
	 <?Php } else { ?>
	  <input type="text" <?php if($_REQUEST['var'] == 'view') { ?> readonly="readonly"  <?php } ?> name="proposalDueDate" id="proposalDueDate" value="<?php echo $rfpinfo->proposalDueDate.' '.$rfpinfo->proposalDueTime; ?>" readonly="readonly"  />
	 <?php } ?>
<script type="text/javascript">
/*G('#proposalDueDate').datetimepicker({
dateFormat: 'mm-dd-yy',
//minDate: '10D',
minDate: 'new',
ampm: true,
});*/
<?php
		$configaration="SELECT 	calender_on_off FROM #__cam_configuration  where id='1'";
		$db->Setquery($configaration);
		$onoff = $db->loadResult();
		if($onoff=='yes') { ?>
		G('#proposalDueDate').datetimepicker({
			dateFormat: 'mm-dd-yy',
			//minDate: '20D',
			minDate: '2D',
			//minDate: 'new',
			 timeFormat: 'hh:mm',
			changeYear: true,changeMonth:true,
			//ampm: true,

 beforeShowDay: function (date) {
        if (date.getDay() == 0 || date.getDay() == 1 || date.getDay() == 6) {
                    return [false, ''];
                } else {
                    return [true, ''];
                }

     }

});
<?php } else { ?>
G('#proposalDueDate').datetimepicker({
			dateFormat: 'mm-dd-yy',
			//minDate: '20D',
			minDate: '0D',
			//minDate: 'new',
			 timeFormat: 'hh:mm',
			changeYear: true,changeMonth:true,
			//ampm: true
			});
			
			G("#proposalDueDate").click(function () {
			 var someDate = new Date();
			var numberOfDaysToAdd = 7;
			someDate.setDate(someDate.getDate() + numberOfDaysToAdd); 
			var dd = someDate.getDate();
			var mm = someDate.getMonth() + 1;
			var y = someDate.getFullYear();
			var newdate = mm + '-'+ dd + '-'+ y + '12:00';
			 G('#proposalDueDate').datetimepicker('setDate', newdate);
                  });
				  
<?php  } ?>
/*G('#proposalDueDate').datetimepicker({
			dateFormat: 'mm-dd-yy',
			//minDate: '10D',
			//minDate: '10D',
			minDate: 'new',changeYear: true,changeMonth:true,
			ampm: true,

 beforeShowDay: function (date) {
        if (date.getDay() == 0 || date.getDay() == 1 || date.getDay() == 6) {
                    return [false, ''];
                } else {
                    return [true, ''];
                }

     }

});*/
function fun_sitevisit(id)
{
	if(id=='bid')
	{
		document.getElementById("bidtxt").style.display='';
		document.getElementById("bidinfo").style.display='';
		document.getElementById("rectxt").style.display='none';
		document.getElementById("recinfo").style.display='none';
		document.getElementById("notid").style.display='none';
	} else if(id=='rec'){
		document.getElementById("bidtxt").style.display='none';
		document.getElementById("bidinfo").style.display='none';
		document.getElementById("rectxt").style.display='';
		document.getElementById("recinfo").style.display='';
		document.getElementById("notid").style.display='none';
	} else {
		document.getElementById("bidtxt").style.display='none';
		document.getElementById("bidinfo").style.display='none';
		document.getElementById("rectxt").style.display='none';
		document.getElementById("recinfo").style.display='none';
		document.getElementById("notid").style.display='';
	}
}

//
function validate_proposaldate()
{
	var frm=document.adminForm;
	
	if(frm.startDate.value && frm.proposalDueDate.value)
	{
		//alert(frm.startDate.value);
		var dateBits1=frm.startDate.value.split('-');
		//var dateBits2=frm.endDate.value.split('-');
		var dateBits3=frm.proposalDueDate.value.split('-');
		//date1=dateBits1[2] + '-' + dateBits1[0]+ '-' + dateBits1[1] + ' 00:00:00';
		var yeartime=dateBits3[2].split(' ');
		//date2=yeartime[0] + '-' + dateBits2[0]+ '-' + dateBits2[1] + ' '+yeartime[1]+':00';
		var d1=new Date(dateBits1[2] , dateBits1[0],dateBits1[1]);
		//var d2=new Date(dateBits2[2] , dateBits2[0],dateBits2[1]);
		var d3=new Date(yeartime[0] , dateBits3[0],dateBits3[1]);
		//var diff=d1-d2;
		/*if(d1>d2) {
		document.getElementById("msg_id").style.display='none';

		}*/
		if(d1<=d3) {

		document.getElementById("msg_id").style.display='';
		} else {
		document.getElementById("msg_id").style.display='none';
		}
	}
	
}
</script>

	 </td>
  </tr>
</tbody></table>
</div>
<div id="msg_id" style="padding:5px;width:660px;border:1px solid #CDCDCD;margin-top:10px;margin-bottom:5px;background-color:#F7F7F7;display:none">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <!--<tr>
    <td style="background-color:#FFCC00"><strong>Inforamtion</strong></td>
  </tr>-->
  <tr>
    <td style="color:#FF0000">Your projected start date is before the RFP close date.  If this is intentional, be sure to include information that this is a pre-existing partially completed job, and details of your existing job status as a part of your RFP.</td>
  </tr>
</table>
<div class="clear"></div>
</div>
</div>
<br />
<div class="signup2">
<label>
Site Visit:<span class="redstar">*</span>
 </label><div class="clear"></div>
<?php //echo "<pre>"; print_r($rfpinfo); exit;
$sitevisit=explode(',',$rfpinfo->site_visit);

?>

<div class="chekbox_pan">
<input type="hidden" name="details" id="details" value="no" />
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tbody><tr>
    <td align="right" width="10%"><input type="radio" value="Required prior to bidding" name="site_visit[]" onclick="javascript:fun_sitevisit('bid');" <?php if(in_array('Required prior to bidding',$sitevisit)){echo"checked";} ?>></td>
    <td style="padding-top:5px;" width="90%">Required prior to bidding</td>
  </tr>
  <tr  align="right" id="bidtxt" <?php if(!in_array('Required prior to bidding',$sitevisit)){echo 'style="display:none"';} ?>>
    <td>&nbsp;</td>
 <?php /*?>   <td align="justify"><p style="padding-left: 15px;float:left;">Please specify required bidders meeting in text field below:</p> </td><?php */?>
  </tr>
  <tr id="bidinfo" <?php if(!in_array('Required prior to bidding',$sitevisit)){echo 'style="display:none"';} ?>>
    <td align="right">&nbsp;</td>
    <td height="50"><textarea style="border: 1px solid rgb(215, 215, 215); padding: 5px; background: rgb(247, 247, 247) none repeat scroll 0% 0%; width: 245px; height: 63px; font-family: arial; font-size: 12px; color: rgb(125, 125, 125); -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" name="bidders_info[]" onblur="if (this.value == '') this.value = 'Please provide location, availability, and/or contact information for scheduling a site visit.'" onfocus="if (this.value == 'Please provide location, availability, and/or contact information for scheduling a site visit.') this.value = ''"><?php if($rfpinfo->bidders_info == 'Not Required') { echo "Please provide location, availability, and/or contact information for scheduling a site visit."; } else {  echo $rfpinfo->bidders_info; } ?></textarea></td>
  </tr>
  <tr>
    <td align="right"><input type="radio" value="Recommended"  name="site_visit[]" onclick="javascript:fun_sitevisit('rec');" <?php if(in_array('Recommended',$sitevisit)){echo"checked";} ?>></td>
    <td style="padding-top:5px;">Recommended</td>
  </tr>
  <tr id="rectxt" <?php if(!in_array('Recommended',$sitevisit)){echo 'style="display:none"';} ?>>
    <td align="right">&nbsp;</td>
   <?php /*?> <td><p style="padding-left: 15px;">Please specify required bidders

	  meeting in text field below:</p> </td><?php */?>
  </tr>
  <tr id="recinfo" <?php if(!in_array('Recommended',$sitevisit)){echo 'style="display:none"';} ?>>
    <td align="right">&nbsp;</td>
    <td height="50"><textarea style="border: 1px solid rgb(215, 215, 215); padding: 5px; background: rgb(247, 247, 247) none repeat scroll 0% 0%; width: 245px; height: 63px; font-family: arial; font-size: 12px; color: rgb(125, 125, 125); -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" name="bidders_info[]" onblur="if (this.value == '') this.value = 'Please provide location, availability, and/or contact information for scheduling a site visit.'" onfocus="if (this.value == 'Please provide location, availability, and/or contact information for scheduling a site visit.') this.value = ''"><?php if($rfpinfo->bidders_info == 'Not Required') { echo "Please provide location, availability, and/or contact information for scheduling a site visit."; } else { echo $rfpinfo->bidders_info; } ?></textarea></td>
  </tr>
  <tr>
    <td align="right"><input type="radio" value="Not Required"  name="site_visit[]" onclick="javascript:fun_sitevisit('not');" <?php if(in_array('Not Required',$sitevisit)){echo"checked";} ?>>
	<span id='notid' <?php if(!in_array('Not Required',$sitevisit)){echo 'style="display:none"';} ?>><input type="hidden" name="bidders_info[]" value="Not Required" /></span></td>
    <td style="padding-top:5px;">Not Required </td>
  </tr>

 </tbody></table>
 </div>

 <div class="clear"></div>
</div>
<br/>
<div class="lineitem_pan_row">
<br />
<div id="i_bar_terms_rfp">
<div id="i_bar_txt_terms_rfp">
<span> <font style="font-weight:bold; color:#FFF;">COMPLIANCE STANDARDS</font></span>
</div></div>
<?php
	$generaldata = $this->general_ins;
	$autodata = $this->auto_ins;
	$workdata = $this->work_ins;
	$umbrelladata = $this->umb_ins;
	$licdata = $this->lic_ins;
	//echo "<pre>"; print_r($generaldata); echo "</pre>";
?>
<?php /*?><span class="grey_12">Special Requirements:<a style="text-decoration: none; vertical-align:middle;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&amp;view=article&amp;id=126&amp;Itemid=113"><img style="margin-top: -4px; margin-right: -8px; vertical-align:middle;" alt="info" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/info_icon3.png"></a></span><?php */?>
<div class="newspecialrequirements">
<div class="lineitem_pan"  style="border:none;">
</div>
<table cellpadding="0" cellspacing="0" border="0">
	<?php
	
		
	if($generaldata  || ($exist_workers[1]->req_parentid == '3' && $exist_workers[1]->req_subparentid == '12') ) { $general_main = 'checked="checked"'; $gen_class = 'styled'; } 
	else{ $display_gen = 'none';}
	
	
	?>
	<tr height="25"><td><input type="checkbox" value="yes" id="generalliability" class="<?php echo $gen_class; ?>" name="generalliability" <?php echo $general_main; ?> /></td><td><strong>General Liability</strong></td></tr>
	
	<tr><td></td><td>
	<ul class="pre_general" style="list-style-type:none; display:<?php echo $display_gen; ?>">
		<?php if($generaldata->occur == 'yes'){ $selected_occur = 'checked=checked'; $class = 'styled'; } ?>
		<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="occur" style="margin-left:0px;" class="<?php echo $class; ?>" <?php echo $selected_occur; ?> /></td><td>&nbsp;Occur</td></tr></table></li>
		<li>Each Occurrence: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($generaldata->each_occurrence,2); ?>" name="each_occurrence" id="each_occurrence" /></li>
		<li>Damage to Rented Premises: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($generaldata->damage_retend,2); ?>" name="damage_retend" id="damage_retend" /></li>
		<li>Med Expenses: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($generaldata->med_expenses,2); ?>" name="med_expenses" id="med_expenses" /></li>
		<li>Personal & Adv injury: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($generaldata->personal_inj,2); ?>" name="personal_inj" id="personal_inj" /></li>
		<?php
			if($exist_workers[1]->price) { $aggregate_price = $exist_workers[1]->price ; }
			else { $aggregate_price = $generaldata->general_aggr ; } 
		?>
		<li><table cellpadding="0" cellspacing="0"><tr><td>General Aggregate:</td><td> <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($aggregate_price,2); ?>" name="general_aggr" id="general_aggr" /></td> 
		<?php if($generaldata->applies_to == 'pol') 
			  $pols = 'checked="checked"';
		      else if($generaldata->applies_to == 'proj')
			  $proj = 'checked="checked"';
			  else if($generaldata->applies_to == 'loc')
			  $loc = 'checked="checked"';
		 ?>
		<td>&nbsp; &nbsp; &nbsp;| Applies To: </td>
		
		<td><input type="radio" name="applies_to" value="pol" <?php echo $pols; ?>  /></td><td> Pol&nbsp;&nbsp; </td>
		<td><input type="radio" name="applies_to" value="proj" <?php echo $proj; ?> /></td><td> Proj&nbsp;&nbsp;</td>
		<td><input type="radio" name="applies_to" value="loc" <?php echo $loc; ?> /></td><td> Loc</td></tr></table></li>

		<li>Products - COMP/OP Aggregate: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($generaldata->products_aggr,2); ?>" name="products_aggr" id="products_aggr" /></li>
		<?php if($generaldata->waiver_sub == 'yes'){ $waiv = 'checked=checked'; $class_waiver_sub = 'styled'; } ?>
		
<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="waiver_sub" style="margin-left:0px;" <?php echo $waiv; ?> class="<?php echo $class_waiver_sub; ?>" /></td><td> Waiver of Subrogation</td></tr></table></li>
<?php if($generaldata->primary_noncontr == 'yes'){ $prim = 'checked=checked'; $class_primary_noncontr = 'styled'; }?>
<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="primary_noncontr" style="margin-left:0px;" <?php echo $prim; ?> class="<?php echo $class_primary_noncontr; ?>" /></td><td> Primary Non-Contributory</td></tr></table></li>
<?php if($generaldata->additional_insured == 'yes'){ $add = 'checked=checked'; $class_additional_insured = 'styled'; } ?>
<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="additional_insured" style="margin-left:0px;" <?php echo $add; ?> class="<?php echo $class_additional_insured; ?>" /></td><td> List my Company as as "Additional Insured"</td></tr></table></li>
<?php if($generaldata->cert_holder == 'yes'){ $cert = 'checked=checked'; $class_cert_holder = 'styled'; } ?>
<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="cert_holder" style="margin-left:0px;" <?php echo $cert; ?> class="<?php echo $class_cert_holder; ?>"  /></td><td> MyVendorCenter listed as Cert. Holder</td></tr></table></li>

		</ul>		
		</td>
		</td></tr>
	<tr id="generalliability_sub"></tr>
	<?php
		if($autodata){ $auto_main = 'checked="checked"'; $class_auto="styled"; } 
		else{ $display_auto = 'none';}
	?>
	<tr height="25"><td><input type="checkbox" value="yes" id="autoliability" class="<?php echo $class_auto; ?>" name="autoliability" <?php echo $auto_main; ?> /></td><td><strong>Auto Liability</strong></td></tr>
	
	<tr><td></td><td>
	<ul class="pre_auto" style="list-style-type:none; display:<?php echo $display_auto; ?>">
		<?php 
		
			  if($autodata->applies_to_any == 'any') {
			  $any = 'checked="checked"';
			  $class_any = 'styled';
			  }
		      if($autodata->applies_to_owned == 'owned') {
			  $owned = 'checked="checked"';
			  $class_owned = 'styled';
			  }
			  if ($autodata->applies_to_nonowned == 'nonowned') {
			  $nonowned = 'checked="checked"';
			  $class_nonowned = 'styled';
			  }
			  if ($autodata->applies_to_hired == 'hired') {
			  $hired = 'checked="checked"';
			  $class_hired = 'styled';
			  }
			  if ($autodata->applies_to_scheduled == 'scheduled'){
			  $scheduled = 'checked="checked"';
			  $class_scheduled = 'styled';
			  }
		?>
		<li>
		<table cellpadding="0" cellspacing="0"><tr><td>Applies To: &nbsp;</td>
		<td><input type="checkbox" name="applies_to_any" class="<?php echo $class_any; ?>" value="any" <?php echo $any; ?>  /></td><td> Any&nbsp;&nbsp; </td>
		<td><input type="checkbox" name="applies_to_owned" class="<?php echo $class_owned; ?>" value="owned" <?php echo $owned; ?> /></td><td> Owned&nbsp;&nbsp;</td>
		<td><input type="checkbox" name="applies_to_nonowned" class="<?php echo $class_nonowned; ?>" value="nonowned" <?php echo $nonowned; ?> /></td><td> Non-Owned&nbsp;&nbsp;</td>
		<td><input type="checkbox" name="applies_to_hired" class="<?php echo $class_hired; ?>" value="hired" <?php echo $hired; ?> /></td><td> Hired&nbsp;&nbsp;</td>
		<td><input type="checkbox" name="applies_to_scheduled" class="<?php echo $class_scheduled; ?>" value="scheduled" <?php echo $scheduled; ?> /></td><td> Scheduled</td></tr></table>
		</li>
		<li>Combined Single Limit: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($autodata->combined_single,2); ?>" name="combined_single" id="combined_single" /></li>
		<li>Bodily Injury - Per Person: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($autodata->bodily_injusy_person,2); ?>" name="bodily_injusy_person" id="bodily_injusy_person" /></li>
		<li>Bodily Injury - Per Accident: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($autodata->bodily_injusy_accident,2); ?>" name="bodily_injusy_accident" id="bodily_injusy_accident" /></li>
		<li>Property Damage - Per Accident: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($autodata->property_damage,2); ?>" name="property_damage" id="property_damage" /></li>
		
<?php if($autodata->waiver == 'yes'){ $waiv = 'checked="checked"'; $class_waiver = 'styled'; }?>
<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="waiver" style="margin-left:0px;" <?php echo $waiv; ?> class="<?php echo $class_waiver; ?>" /></td><td> Waiver of Subrogation</td></tr></table></li>
<?php if($autodata->primary == 'yes'){ $prim = 'checked="checked"'; $class_primary = 'styled';} ?>
<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="primary" style="margin-left:0px;" <?php echo $prim; ?>  class="<?php echo $class_primary; ?>" /></td><td> Primary Non-Contributory</td></tr></table></li>
<?php if($autodata->additional_ins == 'yes'){ $add = 'checked="checked"'; $class_additional_ins = 'styled';} ?>
<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="additional_ins" style="margin-left:0px;" <?php echo $add; ?> class="<?php echo $class_additional_ins; ?>" /></td><td> List my Company as as "Additional Insured"</td></tr></table></li>
<?php if($autodata->cert_holder == 'yes'){ $cert = 'checked="checked"'; $class_cert_holder2 = 'styled';} ?>
<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="cert_holder" style="margin-left:0px;" <?php echo $cert; ?> class="<?php echo $class_cert_holder2; ?>"  /></td><td> MyVendorCenter listed as Cert. Holder</td></tr></table></li>

		</ul>
	
	</td></tr>
	<tr id="autoliability_sub"></tr>
	<?php
		if($workdata || $exist_workers[0]->req_subparentid == '11'){ $work_main = 'checked="checked"'; $class_work="styled";} 
		else{ $display_work = 'none';}
	?>
	<tr height="25"><td><input type="checkbox" value="yes" id="workersliability" class="<?php echo $class_work; ?>" name="workersliability" <?php echo $work_main; ?> /></td><td><strong>Worker`s Comp Policy/Employer`s Liability</strong></td></tr>
	
	<tr><td></td><td>
	<ul class="pre_workers" style="list-style-type:none; display:<?php echo $display_work; ?>">
		<?php 
		if($workdata->workers_not == 'not' || $exist_workers[0]->req_id == '19') {
		$not = 'checked="checked"';
		}
		else{
		$display_work_not = 'none';
		}
 ?>
		<li><table cellpadding="0" cellspacing="0"><tr><td><input type="radio" id="workers_not" name="workers_not" value="not" style="margin-left:0px;" <?php echo $not; ?>  /></td><td> Worker`s Comp Exemptions NOT accepted</td></tr></table></li>
		<li><ul class="notaccepted" style="list-style-type:none; display:<?php echo $display_work_not; ?>"><li>	
		<li>Each Accident: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($workdata->each_accident,2); ?>" name="each_accident" id="each_accident" /></li>
		<li>Desease - Policy Limit: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($workdata->disease_policy,2); ?>" name="disease_policy" id="disease_policy" /></li>
		<li>Desease - Each Employee: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($workdata->disease_eachemp,2); ?>" name="disease_eachemp" id="disease_eachemp" /></li>
		<?php if($workdata->waiver_work == 'yes'){ $waiver_work = 'checked="checked"'; $class_waiver_work = 'styled';}?>
		<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="waiver_work" style="margin-left:0px;" <?php echo $waiver_work; ?> class="<?php echo $class_waiver_work; ?>" /></td><td> Waiver of Subrogation</td></tr></table></li>
		<?php if($workdata->certholder_work == 'yes'){ $certholder_work = 'checked="checked"'; $class_certholder_work = 'styled';} ?>
		<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="certholder_work" style="margin-left:0px;" <?php echo $certholder_work; ?> class="<?php echo $class_certholder_work; ?>" /></td><td> MyVendorCenter listed as Cert. Holder</td></tr></table></li>
		</li></ul></li>
		<?php
		if($workdata->workers_not == 'yes' || $exist_workers[0]->req_id == '20'){ 
		$workers_accepted = 'checked="checked"';
		}
		?>
		<li><table cellpadding="0" cellspacing="0"><tr><td><input type="radio" id="workers_yes" name="workers_not" value="yes" style="margin-left:0px;" <?php echo $workers_accepted; ?>  /></td><td> Worker`s Comp Exemptions accepted</td></tr></table>
		<p style="margin-left:21px;">WARNING: Worker`s Comp. Exemption Certificates are commonly mistaken for a Worker`s Comp policy. Please be aware that this "exemption" does NOT offer the property manager/association/building owner any form of protection against liability for an injured worker`s loss of wages and/or medical expenses if an on-the-job injury occurs. Consult your legal advisor for your unique situation, as laws vary by jurisdiction.</p>
		</li>
		</ul>
	
	</td></tr>
	<tr id="workersliability_sub"></tr>
	<?php
		if($umbrelladata){ $umb_main = 'checked="checked"'; $class_umb = 'styled'; }
		else{ $display_umb = 'none';} 
	?>
	<tr height="25"><td><input type="checkbox" value="yes" id="umbrellaliability" class="<?php echo $class_umb; ?>" name="umbrellaliability" <?php echo $umb_main; ?> /></td><td><strong>Umbrella Liability</strong></td></tr>
	
	<tr><td></td><td>
	<ul class="pre_umbrella" style="list-style-type:none; display:<?php echo $display_umb; ?>">
		<li>Each Occurrence: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($umbrelladata->each_occur,2); ?>" name="each_occur" id="each_occur" /></li>
		<li>Aggregate: <input type="text" onKeyup="if(isNaN(parseInt(this.value))) { alert('Please enter valid number'); this.value=''; }" onClick="if(this.value == '0.00') this.value='';" onChange="javascript: add_commas_special(this,this.value);" value="<?php echo number_format($umbrelladata->aggregate,2); ?>" name="aggregate" id="aggregate" /></li>
		<?php if($umbrelladata->certholder_umbrella == 'yes'){ $waiver_umbrella = 'checked="checked"'; $class_certholder_umbrella = 'styled'; }?>
		<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="certholder_umbrella" style="margin-left:0px;" <?php echo $waiver_umbrella; ?> class="<?php echo $class_certholder_umbrella; ?>" /></td><td> MyVendorCenter listed as Cert. Holder</td></tr></table></li>
		</ul>
	</td></tr>
	<tr id="umbrellaliability_sub"></tr>
	<?php
		if($licdata || $exist_lic){ $lic_main = 'checked="checked"'; $class_lic = 'styled'; } 
		else{ $display_lic = 'none';}
	?>
	<tr height="25"><td><input type="checkbox" value="yes" id="licensingliability" class="<?php echo $class_lic; ?>" name="licensingliability" <?php echo $lic_main; ?> /></td><td><strong>Licensing</strong></td></tr>
	
	<tr><td></td><td>
	<ul class="pre_lic" style="list-style-type:none; display:<?php echo $display_lic; ?>">
		
		<?php if($licdata->professional  || $exist_lic[1]->req_subparentid){ $professional = 'checked="checked"'; $class_professional = 'styled';}?>
		<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="professional" style="margin-left:0px;" <?php echo $professional; ?> class="<?php echo $class_professional; ?>" /></td><td> Professional License</td></tr></table></li>
		<?php if($licdata->occupational == 'yes' || $exist_lic[0]->req_subparentid){ $occupational = 'checked="checked"'; $class_occupational = 'styled';}?>
		<li><table cellpadding="0" cellspacing="0"><tr><td><input type="checkbox" value="yes" name="occupational" style="margin-left:0px;" <?php echo $occupational; ?> class="<?php echo $class_occupational; ?>" /></td><td> Occupational License</td></tr></table></li>
		</ul>
	</td></tr>
	
	<tr id="licensingliability_sub"></tr>	
	</table>
	<?php 
		$user =& JFactory::getUser();
		$db=&JFactory::getDBO();
		
		if($user->user_type == '12'){
				$query_c = "SELECT comp_id FROM #__cam_customer_companyinfo WHERE cust_id=".$user->id." ";
				$db->setQuery($query_c);
				$cid = $db->loadResult();	
				$camfirmid = "SELECT cust_id FROM #__cam_camfirminfo WHERE id=".$cid." ";
				$db->setQuery($camfirmid);
				$camfirm = $db->loadResult();
				$masterid = "SELECT masterid FROM #__cam_masteraccounts WHERE firmid=".$camfirm." ";
				$db->setQuery($masterid);
				$master = $db->loadResult();
				}
			elseif($user->user_type == '13' && $user->accounttype!='master'){
				$masterid = "SELECT masterid FROM #__cam_masteraccounts WHERE firmid=".$user->id." "; 
				$db->setQuery($masterid);
				$master = $db->loadResult();
			}
			else{
			$master = $user->id;
			}	
			
		$query = "SELECT id FROM #__cam_master_generalinsurance_standards WHERE masterid=".$master." and industry_id=".$rfpinfo->industry_id."  ";
		$db->setQuery($query);
		$gen = $db->loadResult();
		
		$query = "SELECT id FROM #__cam_master_autoinsurance_standards WHERE masterid=".$master." and industryid=".$rfpinfo->industry_id."  ";
		$db->setQuery($query);
		$auto = $db->loadResult();
		
		$query = "SELECT id FROM #__cam_master_workers_standards WHERE masterid=".$master." and industryid=".$rfpinfo->industry_id."  ";
		$db->setQuery($query);
		$work = $db->loadResult();
		
		$query = "SELECT id FROM #__cam_master_umbrellainsurance_standards WHERE masterid=".$master." and industryid=".$rfpinfo->industry_id."  ";
		$db->setQuery($query);
		$umb = $db->loadResult();
		
		$query = "SELECT id FROM #__cam_master_licinsurance_standards WHERE masterid=".$master." and industryid=".$rfpinfo->industry_id."  ";
		$db->setQuery($query);
		$lic = $db->loadResult();
		
		$masterdi = $this->master;
		$db=&JFactory::getDBO();
		$sql_per = "SELECT permission FROM #__cam_master_email_compliance_status where masterid='".$masterdi."'";
		$db->Setquery($sql_per);
		$permission = $db->loadResult();
		
		if($user->user_type == '13' && $user->accounttype != 'master'){
		$sql_master = "SELECT masterid FROM #__cam_masteraccounts where firmid='".$user->id."'";
		$db->Setquery($sql_master);
		$exmaster = $db->loadResult();
		}
		else if($user->user_type == '13' && $user->accounttype == 'master'){
		$exmaster = $user->id;
		}
		else{
		$sql_c = "SELECT comp_id FROM #__cam_customer_companyinfo where cust_id='".$user->id."'";
		$db->Setquery($sql_c);
		$cname = $db->loadResult();
		$sql_ma = "SELECT cust_id FROM #__cam_camfirminfo where id='".$cname."'";
		$db->Setquery($sql_ma);
		$firmad = $db->loadResult();
		$sql_master = "SELECT masterid FROM #__cam_masteraccounts where firmid='".$firmad."'";
		$db->Setquery($sql_master);
		$exmaster = $db->loadResult();
		}
		
	if($permission != 'yes' && $exmaster){ ?>
	<script type="text/javascript">
	duplicatefirstindustry(<?php echo $rfpinfo->industry_id; ?>);
	</script>
	<?php } ?>
</div>

<div class="clear"></div>
</div><br/>
<?php /*?><div align="right" id="topborder_row">
</div><?php */?>
<?php /*?><span class="blue_small">Who Will Define the SCOPE OF WORK (SOW)?<a style="text-decoration: none; vertical-align:middle;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&amp;view=article&amp;id=125&amp;Itemid=113"><img style="margin-top: -4px; margin-right: -8px; vertical-align:middle;" alt="info" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/info_icon3.png"></a></span><?php */?>
<br>
<div id="i_bar_terms_rfp">
<div id="i_bar_txt_terms_rfp">
<span> <font style="font-weight:bold; color:#FFF;">SCOPE OF WORK (SOW)</font></span>
</div></div>
<br>

<!--  sof line item pan -->
<div class="downloadfile">

<div class="lineitem_pan_row">
<script language="javascript" type="text/javascript">
/*function show_linetask()
{

	document.getElementById('line_task').style.display='';
	document.getElementById('upload_file').style.display='';
	if(document.getElementById("projectName").value!='' && document.getElementById("projectName").value!='Reference')
	document.getElementById("title_task1").value=document.getElementById("projectName").value;
}*/
//Fun. to show the  specification of other value if it is checked
function specify_other(otherid)
{
	if(otherid==14)
	{
		if(document.getElementById('req_id'+otherid).checked==true)
		document.getElementById('specOther'+otherid).style.display='';
		else
		document.getElementById('specOther'+otherid).style.display='none';
	} else
	document.getElementById('specOther14').style.display='none';
}
</script>
<?php /*?><div>
<input type="radio"  <?php if($_REQUEST['var'] == 'view') { ?> readonly="readonly"  <?php } ?> name="defsow_who" value="self"  <?php  if($rfpinfo->defsow_who=='self'){echo"checked";} ?>  onclick="javascript:showme()"/><strong>Me</strong> - I am ready to define the SOW and create a RFP</div><?php */?>
<table cellspacing="0" cellpadding="0" border="0" width="100%" id="sow_me" <?php  if($rfpinfo->defsow_who=='self') echo "checked='checked'";?>>
  <tbody>
  <tr>
    <td align="left" valign="top"><input type="radio"  <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"  <?php } ?> name="choose_tasks"  <?php  if($rfpinfo->choose_tasks=='no'){echo"checked";} ?> value="no"/></td>
    <td style="padding-top:1px; width:100%;">
Define Line Items Manually</td>
  </tr>
  <tr> <td align="left" width="0%" valign="top"><input type="radio"  <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"  <?php } ?> name="choose_tasks"   class="modal"  rel="{handler: 'iframe', size: {x: 550, y: 350 }}"  <?php  if($rfpinfo->choose_tasks=='yes'){echo"checked";} ?> value="yes"/></td>
    <td style="padding-top:1px;" width="0%">Use RFP Wizard</td>

  </tr>

</tbody></table>

<!-- modified by anand kumar on 21-7-11 -->
<?php /*?><input type="radio" <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"  <?php } ?> name="defsow_who"  value="someother" <?php  if($rfpinfo->defsow_who=='someother'){echo"checked";} ?> onclick="javascript:showsomeone()"/><strong>Someone Else</strong> - This is a presolicitation to define the Scope of Work (SOW).<?php */?>

<table cellspacing="0" cellpadding="0" border="0" width="100%" id="someone_me" style="display:none">
  <tbody>
  <tr> <td align="right" width="7%" valign="top"><input type="radio"  <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"  <?php } ?> name="choose_tasks" onclick="javascript:sowrfp('pro_hired');"   value="1" <?php  if($rfpinfo->choose_tasks=='1'){echo"checked";} ?>/></td>
    <td style="padding-top:2px;" width="93%"><strong>SOW is Completed </strong>-I have a completed Scope of Work document to upload.</td>

  </tr>


  <tr> <td align="right" width="7%" valign="top"><input type="radio"  <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"  <?php } ?> name="choose_tasks" onclick="javascript:sowrfp('pro_hired_camassitant');"   value="2" <?php  if($rfpinfo->choose_tasks=='2'){echo"checked";} ?>/></td>
    <td style="padding-top:2px;" width="93%"><strong>I Need a SOW Created  </strong>- I would like to hire an <strong>Engineer/Architect </strong> to define the SOW needed to meet our project goals. (This option will allow you to get pricing for the design or design/build of a project). This option will also send your RFP to Engineers and Architects only (regardless of your Industry selection above)</td>
  </tr>
  <tr> <td align="right" colspan="2" valign="top">
		<table width="100%" border="0" cellspacing="0" cellpadding="0" id="someone_engineer" style="display:none">
			<tr> <td align="right" width="12%" valign="top"><input type="radio"  <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"  <?php } ?>  name="choose_tasks1" id="choose_tasks1a" onclick="javascript:sowrfp('pro_hired_camassitant1');"   value="2choose" <?php  if($rfpinfo->choose_tasks=='2choose'){echo"checked";} ?>/></td>
				<td style="padding-top:2px;" width="88%" align="left">I would like to use a <strong>Wizard</strong> to help define my project goals. (PREFERRED)</td>
		  </tr>
		  <tr>
				<td width="12%"></td>
			  <td align="left" valign="top" style="padding-left:7px">
				  <table width="100%" border="0" cellspacing="0" cellpadding="0" id="someone_engineer1" style="display:none">
					<tr> <td align="left" width="19%" valign="top"><input type="radio"  name="choose_tasks2" id="choose_tasks21" onclick="javascript:sowrfp('pro_hired_camassitant1_eng');"   value="Engineer"/><strong>Engineer</strong></td>
				  </tr>
					<tr> <td align="left" width="19%" valign="top"><input type="radio" name="choose_tasks2" id="choose_tasks22" onclick="javascript:sowrfp('pro_hired_camassitant2_arc');"   value="Architect"/><strong>Architect</strong></td>
				  </tr>
				</table>
			  </td>
			  </tr>
			<tr> <td align="right" width="12%" valign="top"><input type="radio"  <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"  <?php } ?> name="choose_tasks1" id="choose_tasks1b" onclick="javascript:sowrfp('pro_hired_camassitant2');"   value="2" <?php  if($rfpinfo->choose_tasks=='2'){echo"checked";} ?> /></td>
				<td style="padding-top:2px;" width="88%" align="left">I want to <strong>define</strong> all line <strong>items manually, OR</strong> I prefer to <strong>upload a document</strong> that details the desired project results.</td>
		  </tr>
		  <tr>
				<td width="12%"></td>
			  <td align="left" valign="top" style="padding-left:7px">
				  <table width="100%" border="0" cellspacing="0" cellpadding="0" id="someone_engineer2" style="display:none">
                  <tr> <td align="left" width="19%" valign="top"><input type="radio"  name="choose_tasks3" id="choose_tasks31" onclick="javascript:show_linetask();"   value="Engineer"/><strong>Engineer</strong></td>
				  </tr>
					<tr> <td align="left" width="19%" valign="top"><input type="radio" name="choose_tasks3" id="choose_tasks32" onclick="javascript:show_linetask();"   value="Architect"/> <strong>Architect</strong></td>
				  </tr>
					<?php /*?><tr> <td align="left" width="19%" valign="top"><input type="radio"  name="choose_tasks3" id="choose_tasks31" onclick="javascript:sowrfp('pro_hired_camassitant1_eng1');"   value="Engineer"/><strong>Engineer</strong></td>
				  </tr>
					<tr> <td align="left" width="19%" valign="top"><input type="radio" name="choose_tasks3" id="choose_tasks32" onclick="javascript:sowrfp('pro_hired_camassitant2_arc1');"   value="Architect"/> <strong>Architect</strong></td>
				  </tr><?php */?>
				</table>
			  </td>
			  </tr>
		</table>
  </td></tr>


  <tr> <td align="right" width="7%" valign="top"><input type="radio" <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"  <?php } ?> name="choose_tasks" onclick="javascript:sowrfp('sow_hired');"  value="3" <?php  if($rfpinfo->choose_tasks=='3'){echo"checked";} ?>/></td>
    <td style="padding-top:2px;" width="93%"><strong>Professional Consultation Needed</strong> - I want to have up to 3 Industry Professionals perform a site visit and define the SOW, for which I will create a separate RFP. I understand that this SOW is to be completed free of charge, and that I have a responsibility to meet the vendor(s) on-site.</td>

  </tr>
</tbody></table>

<!-- modified ending by anand kumar on 21-7-11 -->

</div>



<div class="clear"></div>
</div>
<!-- eof line item pan -->
<?php if(count($rfplinetasks)=='0'){ ?>
<div id='line_task' class="totalblocks">
<div class="lineitem_pan_row"><p style="padding-top: 25px;"></p>
<span class="blue_small">Line Item #1:</span>

<!--<div id="counties" style="width:800px;"></div>
<div id="totallines"></div>-->

<div class="lineitem_pan_rfpline">
  <input type="text"  id="title_task1"  value="Enter Title of Line Item Task" onblur="if (this.value == '') this.value = 'Enter Title of Line Item Task'"
   onfocus="if (this.value == 'Enter Title of Line Item Task') this.value = ''"  class="other_tfield" style="width: 300px;" name="linetaskname_210[]" >&nbsp;<span class="redstar">*</span>
  <!-- Re mModified by sateesh on 01-08-11-->

   <input type="text" value="Frequency" id="frequency1" onblur="if (this.value == '') this.value = 'Frequency'" onfocus="if (this.value == 'Frequency') this.value = ''" class="other_tfield" style="width: 239px; margin-left: 25px;" name="rfpreference_210[]">
  <span class="hasTip2" title="Info ::<div style='font-size:13px; width:500px; text-align:left'>Example: one-time, upon scheduled visits, daily, weekly, bi-weekly, monthly, quarterly, annually, or specific dates.</div>"> <img style="margin-bottom:-8px; margin-right: 0px;" alt="info" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/info_icon3.png"></span>
  <!-- Re mModified by sateesh on 01-08-11-->
  <br>
<div class="clear"></div><p style="padding-top: 5px;"></p>
<textarea style="border: 1px solid rgb(215, 215, 215); padding: 5px; background: rgb(247, 247, 247) none repeat scroll 0% 0%; width: 612px; height: 45px; font-family: arial; font-size: 12px; color: rgb(125, 125, 125); -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" id="line_taskdesc1" class="other_tfield_desc" name="task_desc_210[]">
</textarea><span class="redstarnew">*</span>


<div style="float: left; padding-left: 0px;">
<strong>
<input type="checkbox" id="price1" name="is_req_taskvendors_210[]" class="price_lines" value="1" onclick="javascript:check_hiddenvalue(1);"/>
<input type="hidden" name="hidden_taskvendors_210[]" value="0" id="hidden_price1" />
<input type="hidden"  name="linetask_uploads_210[]" id="line_uploads10"  >
<input type="hidden" checked="" id="line_taskno" name="line_taskno[]" value="210" class="linetasknumbers" >
Require</strong> vendors to assign a <strong>Dollar Value</strong> to this Line Item. </div>
<div class="clear"></div>
<span id='upload_file10' style="float:left;width:auto;padding-right:5px"><a href="javascript:addEventa2('10');"><img alt="upload a file" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif"></a></span><span id="delimg10" style="display:none" title="Remove From RFP"><img src="templates/camassistant_left/images/red.pmg" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload_line(10);"  /></span>
<div class="clear"></div><br/><br><br/><div id="newdiva210" class="newdivaclass"></div>
</div><div class="color_butons">
 <a href="javascript:addEvent1();" ><img alt="Add another line item task" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/addline.gif"></a></div>
</div>
<!-- eof line item pan -->
<div id="newdiv"></div></div>
<input name="hidden" type="hidden" id="theValue" value="0">
<input name="hidden" type="hidden" id="idval" value="0">

<?php } else { ?>
<div id='line_task' class="linetasksclass">
<?php
$i=1; // echo "<pre>"; echo print_r($rfplinetasks);
 foreach($rfplinetasks as $linetaks){ ?>
<!--  sof line item pan -->
<div id='newSelect<?php echo $i; ?>' class="totalblocks">
<div id='line_task<?php echo $i; //echo $linetaks->task_id; ?>'>

<div class="lineitem_pan_rfpline">
<h3 class="lineitemheading">Line Item #<span id="LM_<?PHP echo $i; ?>" class="blocknumbers"><?PHP echo $i; ?></span>:</h3>
<p style="height:10px"></p>
<div class="">
<input type="hidden" name="old_taskids[]" value="<?php echo $linetaks->task_id;?>" />
<strong>Title:</strong>
<input type="text"  <?php if($_REQUEST['var'] == 'view') { ?> readonly="readonly"  <?php } ?> id="title_task<?PHP echo $i; ?>"  value="<?php echo $linetaks->linetaskname;  //if($rfpinfo->frequency) { echo $linetaks->linetaskname; }else{ echo"Enter Title of Line Item Task"; } ?>" onblur="if (this.value == '') this.value = 'Enter Title of Line Item Task'"
   onfocus="if (this.value == 'Enter Title of Line Item Task') this.value = ''"  class="other_tfield" style="width: 631px; margin-top:5px;" name="linetaskname_2<?PHP echo $i; ?>[]">&nbsp;<span class="redstar">*</span>
   
   
  <br>
<div class="clear"></div><p style="padding-top: 17px;"></p>
<strong>Description:</strong>
<textarea style="border: 1px solid rgb(215, 215, 215); padding: 5px; width: 625px; height: 45px; font-family: arial; font-size: 12px; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;"  <?php if($_REQUEST['var'] == 'view') { ?> readonly="readonly"  <?php } ?> id="line_taskdesc<?PHP echo $i; ?>" name="task_desc_2<?PHP echo $i; ?>[]"><?php echo $linetaks->task_desc; ?>
</textarea><span class="redstarnew">*</span>



<div style="float: left; margin-left: -6px;">
<?php //echo "<pre>"; print_r($linetaks); ?>
<table><tr><td>
<input type="checkbox"  <?php if($_REQUEST['var'] == 'view') { ?> disabled="disabled"<?php } ?> value="1" id='price<?PHP echo $i; ?>' name="is_req_taskvendors_2<?php echo $i; ?>[]" <?php  if($linetaks->is_req_taskvendors=='1'){ echo"checked"; } ?> onclick="javascript:check_hiddenvalue(<?php echo $i; ?>);" ><input type="hidden" name="hidden_taskvendors_2<?PHP echo $i; ?>[]" value="<?php echo $linetaks->is_req_taskvendors;?>" id="hidden_price<?php echo $i; ?>" /></td><td>Require Vendors to assign a dollar value to this Line Item </td></tr></table>
<?PHP if($linetaks->is_req_taskvendors == 1) { ?>
<input type="hidden"   value="<?php echo $linetaks->task_id;?>" name="old_price_taskid[]"   >
<?PHP } ?>
<input type="hidden" checked="" id="line_taskno" name="line_taskno[]" value="2<?php echo $i; ?>" class="linetasknumbers" >
<input type="hidden"   value="<?php echo $linetaks->task_id;?>" name="old_all_taskid[]"   >

<?php /*?><input type="hidden"  value="1" name="linetask_uploads[]" id="line_uploads<?php echo $linetaks->task_id; ?>"  ><?php */?>
<!--Require</strong> vendors to assign a <strong>Dollar Value</strong> to this Line Item.--> </div>
<div class="clear"></div>


<?php //echo "<pre>"; print_r($linetaks);  ?>
<?php //echo "<pre>"; print_r($rfpinfo);

$default = 'components/com_camassistant/doc/';


 $propertd="SELECT property_id FROM #__cam_rfpinfo where id='".$rfpinfo->id."'";
$db->Setquery($propertd);
$property_id = $db->loadResult();


$property_details="SELECT property_name,tax_id FROM #__cam_property where id='".$property_id."'";
$db->Setquery($property_details);
$property = $db->loadObject();


$p_name= str_replace(' ','_',$property->property_name); ?>
 <?php if($i>=2){ ?>
<p style="height:20px;"></p><div style="float:left;">  <a class="upload_new_files_rfp" onclick="addEventa2(<?php echo $i; ?>);" href="javascript:void(0);">
</a></div>
<?php } else{ ?>
<p style="height:20px;"></p><div style="float:left;"><a class="upload_new_files_rfp" onclick="addEventa2(<?php echo $i; ?>);" href="javascript:void(0);"></a></div>
<?php } ?>
 <?php if($i>=2){ ?><div class="color_butonsremove" style="padding-top:0px; float:left; margin-left:10px;"><span id="DL_<?PHP echo $i; ?>" ><a href="javascript:removeEvent1(<?php echo $i; ?>);" class="remove_lineitem_rfp_from" ></a></span></div>
</div>
 <?php } ?>
<br/><div class="newdivaclass" id="newdiva2<?php echo $i; ?>"></div><?php //echo '<pre>'; print_r($linetaks); ?>
<!--<div class="downloadfile<?php echo $i; ?>" id="downloadfile<?php echo $i; ?>" style="width:660px;">--><?php //if($linetaks->taskuploads) { ?>
<?php  $linetaks->taskuploads = str_replace(' ,','',$linetaks->taskuploads);
    $linetaks->taskuploads = str_replace(',,',',',$linetaks->taskuploads);
    $linetaks->taskuploads = str_replace(' ','',$linetaks->taskuploads);
   // $linetaks->taskuploads = str_replace(',','/',$linetaks->taskuploads);

//echo '<pre>'; print_r($linetaks->taskuploads);
   // $linetaks->taskuploads = str_replace(',','',$linetaks->taskuploads); ?>

</div>
</div>

<table>
    <?php $uploads= explode(',',$linetaks->taskuploads );
    if(count($uploads)>0 && count($linetaks->taskuploads)>0 ){
         for ($l=0;$l<count($uploads);$l++){  ?>
    <?php  $uploads1=explode('/',$uploads[$l]);
       if($uploads[$l] && $uploads[$l]!=' '){  ?>

<?php $uploads23=explode('/',$uploads[$l]);
 // $uploads=explode('/',$linetaks->taskuploads); $upcount=count($uploads);
	if($uploads23[0]=='components' && $uploads23[1]=='com_camassistant' && $uploads23[2]=='doc' ){
 $file_link = str_replace(' ','',$uploads[$l]);
 } else if($uploads23[0]=='components' && $uploads23[1]=='com_camassistant' && $uploads23[2]=='assets' ){
     $file_link = str_replace(' ','',$uploads[$l]);
 } else {
 $file_link = $default.$p_name.'_'.$property->tax_id.'//'.str_replace(' ','',$uploads[$l]);
 }
// $file_link = $default.$p_name.'_'.$property->tax_id.'//'.$linetaks->taskuploads;
  $file_link= str_replace('// ','//',$file_link); 
  $var = JRequest::getVar('var','');
  $new_rfpid = JRequest::getVar('rfpid','');
	if($var == 'copy'){
		$propertd="SELECT old_propertyid FROM #__cam_copyrfp where new_rfpid='".$new_rfpid."'";
		$db->Setquery($propertd);
		$newpid = $db->loadResult();
		$property_details="SELECT property_name,tax_id FROM #__cam_property where id='".$newpid."'";
		$db->Setquery($property_details);
		$property_new = $db->loadObject();
		$file_link = $default.str_replace(' ','_',$property_new->property_name).'_'.$property_new->tax_id.'//'.str_replace(' ','',$uploads[$l]);
	}
	?>
    <!-- <div class="downloadfile<?php echo $i.($l+1); ?>" id="downloadfile<?php  echo $i.($l+1); ?>" style="width:660px;"> -->
   <?php $upcount=count($uploads1);//if() ?>
       <tr class="downloadfile<?php echo $i.($l+1); ?>" id="downloadfile<?php  echo $i.($l+1); ?>"> <td></td>&nbsp;<td> <a href="index2.php?option=com_camassistant&controller=popupdocs&task=open&title=<?PHP echo str_replace(' ','',$uploads1[$upcount-1]); ?>&path=<?PHP echo $file_link; ?>"><img src="templates/camassistant_left/images/green.png" alt="download file" align="absmiddle" style="float:left;"/></a></td>&nbsp;<td>&nbsp;<img src="templates/camassistant_left/images/red.png" alt="delete" style="cursor:pointer; float:left;" onclick="javascript:deletelineupload_line(<?php echo $i.($l+1); ?>);"  />&nbsp;</td><td>
<span id='upload_file<?php echo $i.($l+1); ?>' style="float:left;width:auto;"><?php  if($uploads1[$upcount-1]) { echo '<td><span style="float:left;width:auto; padding-right:5px; color:#8FD800; font-size:14px;">'.$uploads1[$upcount-1].'</span>';?></td><?php } else {?> &nbsp;&nbsp;<a href="javascript:addEventa2(<?php echo $i; ?>);"><img alt="upload a file" src="<?php echo Juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif"></a><?php }?>&nbsp;&nbsp;</span><input type="hidden"   value="<?php echo $uploads[$l];?>" name="linetask_uploads_2<?php  echo $i; ?>[]" id="line_uploads<?php echo $i.($l+1); ?>"  ></tr>

    <?php  } } }
    //}
?></table>

<div class="clr"></div>
</div>
<p style="height: 10px;"></p>
<!-- eof line item pan -->
 <?php //print_r($rfpuploadfiles); ?>
<?php $i++; } ?>
</div>
	<div id="newdiv"></div>	 <input name="shiva" type="hidden" id="theValue" value="<?PHP echo $task_cnt-1; ?>">


<?php } //echo "anand"; ?>
<?php 
$k=1; 
 foreach($rfplinetasks as $linetaks){ 
   if($k>=2){ ?>
 <?php } else { ?>
</div><br /><div id="topborder_row" align="center"> <a href="javascript:addEvent1();" ><img alt="Add another line item task" src="<?php echo Juri::base(); ?>templates/camassistant_left/images/add_another_line.png"></a></div><?php } ?>

<?php $k++; } ?>
<div class="clr"></div>
<p style="padding-top: 28px;"></p>

		<input name="hidden2" type="hidden" id="theValues" value="<?php echo count($rfpuploadfiles)-1;?>">
		<!--<a href="javascript:removealldocs();"><img alt="upload a file" src="<?php echo Juri::root(); ?>templates/camassistant_left/images/remove-all-files.gif" style="float:right;"></a>-->
<!-- eof line item pan -->

<!--  sof line item pan -->
<?php
//echo "<pre>"; print_r($rfpreqinfo[1]->price);
if($rfpreqinfo[1]->price!='') {
$rfpreq_info = explode("/", $rfpreqinfo[0]->price);
}
  ?>
<?php //echo "<pre>"; print_r($rfpreqinfo);
//if(count($rfpreqinfo)>0){
//for ($h=0;$h<count($rfpreqinfo);$h++){  ?>
<?php //echo "<pre>"; print_r($rfpreqinfo[$h]->req_subparentid==12); ?>
 <?php // } }?><br/>

<script language="javascript" type="text/javascript">
function format_val(id,fieldname,fieldvalue){
G.post("index2.php?option=com_camassistant&controller=proposals&task=vendor_proposal_edit_format_val", {id: ""+id+"",fieldname: ""+fieldname+"",fieldvalue:""+fieldvalue+""}, function(data){
if(data.length >0) {
var x= fieldname+id;
G("#"+id).val(data);

}
});
}
function add_commas(x,id)
{
	var val = parseFloat(x).toFixed(2)+'',
      rgx = /(\d+)(\d{3}[\d,]*\.\d{2})/;
  while (rgx.test(val)) {
    val = val.replace(rgx, '$1' + ',' + '$2');
  }
document.getElementById(id).value = val;
}
</script>

<!-- eof line item pan -->


<?php /*?><table width="100%">
    <tbody><tr>
      <td align="left" width="4%" valign="middle"><input type="checkbox" <?php if($_REQUEST['var'] == 'view'){ ?> disabled="disabled"<?php } ?> <?php if($rfpinfo->terms=='terms'){ ?> checked <?php } ?>  value="terms" name="terms"></td>
      <td height="50" width="96%" valign="middle">I have read and agree to the <strong>Terms and Conditions</strong> of this website.<span class="redstar">*</span></td>
    </tr>
  </tbody></table><?php */?>
  <input type="hidden" <?php if($_REQUEST['var'] == 'view'){ ?> disabled="disabled"<?php } ?> <?php if($rfpinfo->terms=='terms'){ ?> checked <?php } ?>  value="terms" name="terms">
  
<?php if ($_REQUEST['var']=='view') { ?>
<a href="javascript:history.go(-1)">
<img src="templates/camassistant_left/images/back.gif" alt="Cancel" width="85" height="46" style="vertical-align:middle;"/>
</a>
<?php } ?>
<div class="clear"></div>
<div align="center" id="topborder_row"><table><tr><td><input type="button" class="cancelrfpbutton"  onclick="javascript:fn_submitRFPd('cancel');"/></td>
<?php if($_REQUEST['var'] != 'view') { if($_REQUEST['show'] != 1){ ?>
<?php if ($_REQUEST['var']== 'draft' || $_REQUEST['var']== 'copy'){  ?>
<td><input type="button" class="saveasdraft" value="" name="draft" onclick="javascript:fn_submitRFPd('draft');"/></td>
<td><input type="button" class="review_submit" name="rfpbtn" onclick="javascript:fn_submitRFP('review');" style="width:159px;"/></td>
<?php } else if(($_REQUEST['var']== 'copy')||($_REQUEST['var']== 'draft')) { ?>
<td><input type="button" class="review_submit" name="rfpbtn" onclick="javascript:fn_submitRFP('review');" style="width:159px;"/></td>
<?php } else { ?>
<td><input type="button" class="review_submit" name="rfpbtn" onclick="javascript:fn_submitRFP('<?php echo $rfpinfo->rfp_type; ?>');" style="width:159px;"/></td>
<?php } ?>
<?php } else if($_REQUEST['show'] = 1) { ?>
<td><input type="button" class="saveasdraft"  name="draft" onclick="javascript:fn_submitRFP('draft');"/></td>
<td><input type="button" class="review_submit" name="rfpbtn" onclick="javascript:fn_submitRFP('review');" style="width:159px;"/></td>
<?php } }
if($_REQUEST['show']==1)
$task='submit_rfp';
else
$task='update_rfp';
?>
<!--<td><a id="" href="javascript:PrintDiv();"><img src="/dev/templates/camassistant_left/images/PRINT.gif"></a></td>-->
</tr></table>
</div>
</div>
<?php //echo "<pre>"; print_r($rfpinfo->cust_id); ?>
<input type="hidden" name="rfp_userid" value="<?php echo $rfpinfo->cust_id; ?>" />
<input type="hidden" name="option" value="com_camassistant" />
<input type="hidden" name="task" value="<?php echo $task;?>" />
<input type="hidden" name="show" value="<?php echo $_REQUEST['show'];?>" />
<input type="hidden" name="rfp_type" value="rfp" />
<input type="hidden" name="rfpid" value="<?php echo $_REQUEST['rfpid'];?>" />
<input type="hidden" name="controller" value="rfp" />
<input type="hidden" name="Itemid" value="<?php echo $_REQUEST['Itemid'];?>" />
<?php echo JHTML::_( 'form.token' ); ?>
</form>
</div>
<!-- eof table pan -->

</div>
