<?php
/**
 * @version		1.0.0 camassistant $
 * @package		camassistant
 * @copyright	Copyright Â© 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author		
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');

jimport( 'joomla.application.component.view' );

//class vendorsViewvendors extends Jview
class vendorsignupViewvendorsignup extends Jview
{
	function display($tpl = null){
		// global $mainframe;
		$task = JRequest::getVar("task",'');
		
		if($task == 'vendorsignup_p1')
		{
			$model = $this->getModel('vendorsignup');
			$states = $model->getstates(); 
			$this->assignRef('states',$states);
			$fail = JRequest::getVar("fail",'');
			if( $fail == 'logo' ){
			$logofail = $model->getlogofailmsg(); 
			$this->assignRef('logofail',$logofail);
			}
			$this->setLayout('vendorsignup_p1');
			parent::display();
		}
		else if($task == 'vendorsignup_p2')
		{

			$post = JRequest::get('post');
			$model = $this->getModel('vendorsignup');
			$states = $model->get_states();
			$questions = $model->getquestions();
			$row1[0] = new stdClass();
			$row1[0]->value = "";
			$row1[0]->text = "-Select Question-";
			$questions=array_merge($row1,$questions);
			//echo "<pre>"; print_r($questions); 
			$this->assignRef('questions',$questions);
			//	echo "<pre>"; print_r($questions); exit;
			$this->assignRef('states',$states);
			$Payment_details = $model->getBilling_Payment(); 
			$this->assignRef('Payment_details',$Payment_details[0]);
			$this->assignRef('company_name',$post['company_name']);
			//$post['company_address'] = $post['company_address'].'-'.$post['company_address2'];
			$this->assignRef('company_address',$post['company_address']);
			$this->assignRef('company_addresss',$post['company_addresss']);
			$this->assignRef('city',$post['city']);
			$this->assignRef('state',$post['states']);
			$this->assignRef('zipcode',$post['zipcode']);
			$this->assignRef('invitecode',$post['invitecode']);
			$this->assignRef('manager_invitecode',$post['manager_invitecode']);
			$this->setLayout('vendorsignup_p2');
			
			parent::display();
		}
		else if($task=='authorize_form') //to redirect authorize  url
		{
			$this->setLayout('authorize_form');
			parent::display($tpl);
		}
		else if($task=='paypal_form') //to redirect paypal url
		{
			$this->setLayout('paypal_form');
			parent::display($tpl);
		}
		else if($task == 'ajax_appyly_promocode') //Ajax form to "Add another ocupational lincese" - in compliance form
		{
			$model = $this->getModel('vendorsignup');
			$this->setLayout('ajax_appyly_promocode'); 
			parent::display($tpl);
		}
		else if($task == 'payment'){
		$model = $this->getModel('vendorsignup');
			$this->setLayout('pay_iframe'); 
			parent::display($tpl);
		}
		else if($task=='vendorsignup_p3') //to redirect authorize  url
		{
			$model = $this->getModel('vendorsignup');
			$satelist = $model->getstatelist();
			$this->assignRef('statelist',$satelist);
			$county = $model->getcountylist();
			$this->assignRef('county',$county);
			$industries_link = $model->getindustries_link(); 
			$this->assignRef('industries_link',$industries_link);
			$industries = $model->getindustires(); 
			$this->assignRef('industries',$industries);
			$this->setLayout('vendorsignup_p3');
			parent::display($tpl);
		}
		else if($task=='industries_form')	//to display industries form in popup
		{
			$model = $this->getModel('vendorsignup');
			$industries = $model->getindustires(); 
			$this->assignRef('industries',$industries);
			$this->setLayout('industries_form');
			parent::display($tpl);
		}
		else if($task=='thanks_redirect') //to display thankyou message after vendor registration
		{
			$model = $this->getModel('vendorsignup');
			$click_here_popup = $model->get_click_here_popup(); 
			$this->assignRef('click_here_popup',$click_here_popup);
			$this->setLayout('thanks_form');
			parent::display();
		}
		else if($task=='mail_redirect_form') // to display form after sending mail	
		{
			$this->setLayout('mail_redirect_form');
			parent::display($tpl);
		}
		else if($task=='vendor_billing_failed_form') //to display failes message if paypal process is failed	
		{
			$this->setLayout('vendor_billing_failed_form');
			parent::display($tpl);
		}
		
		else if($task=='reactivate') //to display the message after reactivate the mail 
		{
			
			$this->setLayout('activateaccount');
			parent::display($tpl);
		}
		
	}
}
?>