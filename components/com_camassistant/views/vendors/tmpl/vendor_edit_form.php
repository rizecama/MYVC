<?php
/**
 * @version		1.0.0 camassistant $
 * @package		camassistant
 * @copyright	Copyright © 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author		
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');
// Your custom code here

$industries = $this->industries ;
$results = $this->result;
$statename = $this->statename; 
$state_list = $this->state_list;
$phone = explode('-',$this->details->company_phone);  
$alt_phone = explode('-',$this->details->alt_phone);
$parent_comp_taxid = explode('-',$results[0]->in_house_parent_company_FEIN );
$user = JFactory::getUser();

 JHTML::_('behavior.modal');
/*echo '<pre>';
print_r($phone); exit;
*/$a = explode('(',$results[0]->company_phone);
if($a[1])
{
$b = explode(')',$a[1]);
$c = explode('-',$b[1]);
$phone[0]=$b[0];
$phone[1]=$c[0];
$phone[2]=$c[1];
}
//echo '<pre>'; print_r($this->details); 



/*$user = JFactory::getUser();
$db = JFactory::getDBO();
$db->setQuery("SELECT company_name AS cname, tax_id AS taxid FROM #__cam_vendor_company WHERE user_id=".$user->id);
$results = $db->loadObjectList();
$db->setQuery("SELECT s.id,s.state_name as name FROM `jos_vendor_state_counties` AS sc, jos_state as s WHERE sc.user_id=".$user->id." and sc.state_id=s.id  ");
$states = $db->loadObjectList();
$db->setQuery("SELECT c.id,c.county_name as name FROM `jos_vendor_state_counties` AS sc, jos_county as c WHERE sc.user_id=".$user->id." and sc.state_id=c.id  ");
$counties =  $db->loadObjectList();*/
//$db->setQuery("SELECT s.id,s.city_name FROM `jos_vendor_state_counties` AS sc, jos_state as s WHERE sc.user_id=".$user->id." and sc.state_id=s.id  ");
// if($this->details->image == '') $this->details->image = 'noimage.gif'; 

?>
<style type="text/css">
.signup{padding-top:10px;}
</style>
<script type="text/javascript">
G = jQuery.noConflict();
function displayField(field)
{
	if(field == "Yes") 
	{
	  document.getElementById('showparent').style.display="";  
	}
	else
	{  
	  document.getElementById('showparent').style.display="none"; 
	} 
}


function validate_data2()
	{
	 var fup = document.getElementById('image'); 
	 var fileName = fup.value; 
	 var ext = fileName.substring(fileName.lastIndexOf('.') + 1);
	 var frm = document.VendorForm2;
	  var ccemail = (frm.ccemail_1.value).split('.com');	
	  phone = frm.phone_1.value + '-' + frm.phone_2.value + '-' +  frm.phone_3.value ;
	 for (var i =1; i < ccemail.length-1; i++)
     {			
	   if(ccemail[i].charAt(0) != ";"){
		 alert('Please separate the CC Emails with Semi colon(;) ');
		 frm.ccemail_1.focus();
		 return false;	   
        }
	 }
 
	  if(ext == 'bmp'){
	  alert("Image file must be a .gif, .jpg, or .png.");
	  window.location.href = "index.php?option=com_camassistant&controller=vendors&task=vendor_edit_form&view=vendors&Itemid=114";
	  return false;
	 }


	 else if(frm.city.value == '')
	 {
		 alert('Please enter city');
		 frm.city.focus();
		 return false;
	 }
	 else if(frm.state.value == '')
	 {
		 alert('Please enter state');
		 frm.state.focus();
		 return false;
	 }
	 else if(frm.zip.value == '')
	 {
		 alert('Please enter zip');
		 frm.zip.focus();
		 return false;
	 }
	 else if(frm.yearestab.value == '')
	 {
		 alert('Please enter year established ');
		 frm.yearestab.focus();
		 return false;
	 }
	 else if(frm.phone_1.value == '000' || frm.phone_2.value == '000' || frm.phone_3.value == '0000')
	 {
		 alert('Please enter alternate phone number');
		 if(frm.phone_1.value == '000')
		 {
		 frm.phone_1.value = '';
		 frm.phone_1.focus();
		 return false;
		 }
		 else if(frm.phone_2.value == '000')
		 {
		 frm.phone_2.value = '';
		 frm.phone_2.focus();
		 return false;
		 }
		 else if(frm.phone_3.value == '0000')
		 {
		 frm.phone_3.value = '';
		 frm.phone_3.focus();
		 return false;
		 }
	 }
	
	 else if(frm.eaddress.value == '')
	 {
		 alert('Please enter your mailing address');
		 frm.eaddress.focus();
		 return false;
	 }
	 /*var eaddress=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+);
	 if(mail.test(frm.eaddress.value)==false)
	 {
		 alert("Please enter the valid email");
		 frm.eaddress.focus();
		 return false;
	 } */
	 else if(frm.city.value == '')
	 {
		 alert('Please enter city');
		 frm.city.focus();
		 return false;
	 }
	 else if(frm.state.value == '')
	 {
		 alert('Please your state');
		 frm.state.focus();
		 return false;
	 }

	 else if(frm.zip.value == '')
	 {
		 alert('Please enter your zipcode');
		 frm.zip.focus();
		 return false;
	 }

	 else if(frm.phone_1.value == '000' || frm.phone_2.value == '000' || frm.phone_3.value == '0000')
	 {
		 alert('Please enter alternate phone number');
		 if(frm.phone_1.value == '000')
		 {
		 frm.phone_1.value = '';
		 frm.phone_1.focus();
		 return false;
		 }
		 else if(frm.phone_2.value == '000')
		 {
		 frm.phone_2.value = '';
		 frm.phone_2.focus();
		 return false;
		 }
		 else if(frm.phone_3.value == '0000')
		 {
		 frm.phone_3.value = '';
		 frm.phone_3.focus();
		 return false;
		 }
	 }
	 
	 else if(document.getElementById('in_house_vendor').checked == true)
 	{
	 if(frm.name.value == '')
	 {
	 alert('Please enter parent company name');
	 frm.name.focus();
	 return false;
	 }
	 else if(frm.tax_id1.value == '' || frm.tax_id2.value == '' || frm.tax_id3.value == '')
	 {
		 alert('Please enter parent company Federal Tax ID number');
		 if(frm.tax_id1.value == '')
		 {
		 frm.tax_id1.value = '';
		 frm.tax_id1.focus();
		 return false;
		 }
		 else if(frm.tax_id2.value == '')
		 {
		 frm.tax_id2.value = '';
		 frm.tax_id2.focus();
		 return false;
		 }
		 else if(frm.tax_id3.value == '')
		 {
		 frm.tax_id3.value = '';
		 frm.tax_id3.focus();
		 return false;
		 }
	  }
    }	
	
	
	else if(phone){
	 G.post("index2.php?option=com_camassistant&controller=vendors&task=verfiryphonenumberuseinfo", {queryString: ""+phone+""}, function(pdata){
	 
	 if(pdata == 'valid'){
		
			if(fileName != '')
			{
				if(ext != 'jpg' && ext != 'gif' && ext != 'jpeg' && ext != 'png' && ext != 'JPG' && ext != 'JPEG' )
				{ 
					alert("Image file must be a .gif, .jpg, or .png.");
					return false;
				}
				else{
					G( "#vendorupdateinfo" ).submit();
				}
			}
			else{
				G( "#vendorupdateinfo" ).submit();
			}
	  
		 }
		 else{
		 alert("This Phone Number is already being used by another member. Please use a different number or contact MyVendorCenter regarding this issue.");
		frm.phone_1.value = frm.dphone_1.value;
		frm.phone_2.value = frm.dphone_2.value;
		frm.phone_3.value = frm.dphone_3.value;
		 return false;
		 }
	 });

	 }
	 
	else{
		 if(fileName != '')
     {
		 if(ext != 'jpg' && ext != 'gif' && ext != 'jpeg' && ext != 'png' && ext != 'JPG' && ext != 'JPEG' )
		  { 
		  alert("Image file must be a .gif, .jpg, or .png.");
		  return false;
		  }
	  }
	  else {
		G( "#vendorupdateinfo" ).submit();
			}
	}
}


LH = jQuery.noConflict();
LH('.proposal_opener').live('click',function(){
	        if(!LH(this).hasClass('active')){
			if( LH(this).attr('id') == 'areas' ) 
			{
				LH('.proposal_opener').removeClass('active');
	            LH('.table_blue_rowdots_submitted').removeClass('active'); 
			    LH(this).addClass('active');
                LH(this).parent().parent().addClass('active'); 	
				LH('#userdetails').slideUp('slow');
				LH('#industries').slideUp('slow');
				LH('#counties').slideDown('slow');				
			}
			else if( LH(this).attr('id') == 'industry' ){
				LH('.proposal_opener').removeClass('active');
	            LH('.table_blue_rowdots_submitted').removeClass('active'); 
			    LH(this).addClass('active');
                LH(this).parent().parent().addClass('active'); 
				LH('#userdetails').slideUp('slow');
				LH('#industries').slideDown('slow');
				LH('#counties').slideUp('slow');
			}
			else{	
			LH('.proposal_opener').removeClass('active');
	        LH('.table_blue_rowdots_submitted').removeClass('active'); 	
			LH(this).addClass('active');
            LH(this).parent().parent().addClass('active'); 	
			LH('#counties').slideUp('slow');
			LH('#industries').slideUp('slow');
			LH('#userdetails').slideDown('slow');
			}
		}else{	    
		   LH('.proposal_opener').removeClass('active');
           LH('.table_blue_rowdots_submitted').removeClass('active'); 
		   LH('#counties').slideUp('slow');
		   LH('#industries').slideUp('slow');
		   LH('#userdetails').slideUp('slow');
		}

	});

	function validate_indistries(){
		G( "#industriesform" ).submit();
	}
	
	function validate_areas(){
		G( "#areasform" ).submit();
	}
	
	G(document).ready(function(){
	G('#passwordchanges').click(function(){
		el='<?php  echo Juri::base(); ?>index.php?option=com_camassistant&controller=vendors&task=resetpassword';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
		SqueezeBox.fromElement(el,options);
	});
});	
</script>
<?php 
$user =& JFactory::getUser(); 
if($user->user_type != 11)
{ ?>
<div align="center" style="color:#0066FF; font-size:15px"> You are not authorized to view this page.</div>
<?php } else { ?>
<div id="container_inner"  style=" padding-top:10px;">
    <div id="bedcrumb" style="display:none">
    <ul>
    <li class="home"><a href="/camassistant/index.php?option=com_camassistant&amp;controller=vendors&amp;task=vendor_dashboard&amp;Itemid=112">Home  </a></li>
    <li>My User Info</li>
    </ul>
    </div>
	<p style="height:12px;"></p>
<div>
<div id="i_bar">
<div id="i_bar_txt" style="text-align:center; padding-left:30px;">
<span><strong>ACCOUNT DETAILS</strong></span>
</div>
 
<div id="i_icon"><a style="text-decoration: none;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&view=article&id=71&Itemid=113"><img src="templates/camassistant_left/images/info_icon2.png" /> </a></div>

<!--<div id="i_icon"><a href="#"><img alt="info" src="images/info_icon2.png"></a></div>-->
</div>

<div class="clear"></div>

<table width="100%" cellspacing="0" cellpadding="0" style="margin:6px 4px 6px 0;">
<tbody><tr id="table_blue_rowdots" class="table_blue_rowdots_submitted">
<td width="15" valign="middle" align="left" style="font-size:15px; font-weight:bold;">
<a style="float:left;" href="javascript:void(0);" class="proposal_opener" id="compliance"></a>&nbsp;&nbsp;&nbsp;USER DETAILS
</td>
</tr>
</tbody>
</table>
			
			
<div id="userdetails" style="display:none;">
<form enctype="multipart/form-data" action="#" method="post" name="VendorForm2" id="vendorupdateinfo">
<table cellpadding="0" cellspacing="0" border="0">
<tr>
<td align="left" valign="top">
<div id="signup-form">

<?PHP
/* added on 22-010-2011 to show the vendors company name, federal tax rate */
//echo '<pre>'; print_r($results); exit;


/*************************************************** Start Rating Code *********************************************************/
function plgVotitaly( $user_id, $page=0 ) {

	global $my, $addScriptVotitalyPlugin;
	

	$database = & JFactory::getDBO();
	$uri = & JFactory::getURI();
	$plugin = & JPluginHelper::getPlugin('content', 'ji_votitaly');
	$plgParams = new JParameter( $plugin->params );
	$show_stars = $plgParams->get('show_stars', 1);
	$star_description = $plgParams->get('star_description', '');
		
	$id = $user_id;
	$html = '';
	$document	=& JFactory::getDocument();
	$document->addScript('media/system/js/mootools.js');
	

			if(JPlugin::loadLanguage( 'plg_content_ji_votitaly' ) === false)
				JPlugin::loadLanguage( 'plg_content_ji_votitaly', JPATH_ADMINISTRATOR );		
	
			$id = $user_id;
			 $query = 'SELECT *' .
					' FROM #__content_rating' .
					' WHERE content_id 	 = '.(int) $id;
			$database->setQuery($query);
			$rating = $database->loadObject();
		
			if (!$rating)	{
				$rating_count = 0;
				$rating_sum   = 0;
				$average      = 0;
				//$width        = 0;
				$width   = 4.0 * 20;
			} else {
			    $rating_count = $rating->rating_count;
				$rating_sum = $rating->rating_sum;		
				$average = number_format(intval($rating_sum) / intval( $rating_count ),2);
				//$width   = $average * 20;
				$width   = $rating_sum * 20;
			}
			
			//$trans_star_description = _plgVotitaly_replaceDescString($star_description, $rating_count, $average);
			
			
			// +++++++++++++++++++++++++++++++++++++++
			// ++++++ Printing javascript code +++++++
			// +++++++++++++++++++++++++++++++++++++++
			$script='<!-- VOTItaly Plugin v1.1 starts here -->';

$script.='<link href="'.JURI::root().'plugins/content/ji_votitaly/css/votitaly.css" rel="stylesheet" type="text/css" />';	
$script.='<script type="text/javascript" src="'.JURI::root().'plugins/content/ji_votitaly/js/votitalyplugin.js"></script>';

$script.='
<script type="text/javascript">
'."
	window.addEvent('domready', function(){
	  var ji_vp = new VotitalyPlugin({
	  	submiturl: '".JURI::root()."plugins/content/ji_votitaly_ajax.php',
			loadingimg: '".JURI::root()."plugins/content/ji_votitaly/images/loading.gif',
			show_stars: ".($show_stars ? 'true' : 'false').",

			star_description: '".addslashes($star_description)."',		
			language: {
				updating: '".JText::_( 'VOTITALY_UPDATING')."',
				thanks: '".JText::_( 'VOTITALY_THANKS')."',
				already_vote: '".JText::_( 'VOTITALY_ALREADY_VOTE')."',
				votes: '".JText::_( 'VOTITALY_VOTES')."',
				vote: '".JText::_( 'VOTITALY_VOTE')."',
				average: '".JText::_( 'VOTITALY_AVERAGE')."',
				outof: '".JText::_( 'VOTITALY_OUTOF')."',
				error1: '".JText::_( 'VOTITALY_ERR1')."',
				error2: '".JText::_( 'VOTITALY_ERR2')."',
				error3: '".JText::_( 'VOTITALY_ERR3')."'
			}
	  });
	});
".'
</script>
<script type="text/javascript" src="'.JURI::root().'plugins/content/ji_votitaly/js/votitalyplugin.js"></script>
<!-- VOTItaly Plugin v1.1 ends here -->';		

			if(!$addScriptVotitalyPlugin){	
				$addScriptVotitalyPlugin = 1;
				JApplication::addCustomHeadTag($script);
			}
			// +++++++++++++++++++++++++++++++++++++++
			// +++++ /Printing javascript code +++++++
			// +++++++++++++++++++++++++++++++++++++++
						
// +++++++++++++++++++++++++++++++++++++++
// ++++++++ Printing html code +++++++++++
// +++++++++++++++++++++++++++++++++++++++
$html = '
<!-- Votitaly Plugin v1.1 starts here -->
<div class="votitaly-inline-rating" id="votitaly-inline-rating-'. $id .'">
	<div class="votitaly-get-id" style="display:none;">'. $id .'</div>
	<div class="customerid" style="display:none;">'.$my->id.'</div> 
';
if($width>10){
	$html .= '
	<div class="votitaly-inline-rating-stars">
	  <ul class="votitaly-star-rating">
	    <li class="current-rating" style="width:'. $width .'%;">&nbsp;</li>
	    <li><a title="1 '. JText::_( 'VOTITALY_STAR' ) .'" class="votitaly-toggler one-star">1</a></li>
	    <li><a title="2 '. JText::_( 'VOTITALY_STARS' ) .'" class="votitaly-toggler two-stars">2</a></li>
	    <li><a title="3 '. JText::_( 'VOTITALY_STARS' ) .'" class="votitaly-toggler three-stars">3</a></li>
	    <li><a title="4 '. JText::_( 'VOTITALY_STARS' ) .'" class="votitaly-toggler four-stars">4</a></li>
	    <li><a title="5 '. JText::_( 'VOTITALY_STARS' ) .'" class="votitaly-toggler five-stars">5</a></li>
	  </ul>
	</div><br/>
	';
}
else{
$html = '<font color="red"><strong>Not rated</strong></font>';
}
$html .= '<div class="votitaly-box">';
/*if ($show_votes || $show_average) {
	$html .= '('. 
		($show_votes ? $rating_count .' '. ($rating_count==1 ? JText::_( 'VOTITALY_VOTE' ) : JText::_( 'VOTITALY_VOTES' )) : '') .
		($show_votes && $show_average ? ', ' : '') .
		($show_average ? JText::_( 'VOTITALY_AVERAGE' ) .': '. $average .' '. JText::_( 'VOTITALY_OUTOF' ) : '') .
		')';
}
*/
//$html .= $trans_star_description;
$html .= '</div>';
$html .= '</div>';

// +++++++++++++++++++++++++++++++++++++++
// ++++++++ Printing html code +++++++++++
// +++++++++++++++++++++++++++++++++++++++	
	return $html;
}



/*function _plgVotitaly_replaceDescString( $string, $num_votes, $num_average ) 
{
	$patterns = array(
		'/{num_votes}/',
		'/{num_average}/',
		'/#LANG_VOTES/',
		'/#LANG_AVERAGE/',
		'/#LANG_OUTOF/',
	);
	$replacements = array( 
		$num_votes, 
		$num_average, 
		($num_votes==1 ? JText::_( 'VOTITALY_VOTE') : JText::_( 'VOTITALY_VOTES')),
		JText::_( 'VOTITALY_AVERAGE'),
		JText::_( 'VOTITALY_OUTOF')
	);
	
	return preg_replace($patterns, $replacements, $string);
}*/

/************************************************** End Rating Code *********************************************************/
?><?php //echo "<pre>"; print_r($this->details);?>
<div class="signup" style="padding-top:0px;">
<label>Company Name: </label>
<input name="cname"  readonly="readonly"  type="text"  style="width:275px; background-color:#666666; color:#ffffff;" value="<?PHP echo $results[0]->company_name; ?>" <?PHP if($user->id != '62') { ?> readonly="readonly" <?PHP } ?> />
</div>

<div class="signup">
<label>Federal Tax ID: </label>
<input name="taxid"  readonly="readonly"   type="text" style="width:275px; background-color:#666666; color:#ffffff;" value="<?PHP echo $results[0]->tax_id; ?>"  <?PHP if($user->id != '62') { ?> readonly="readonly" <?PHP } ?> />
</div>

<div class="signup">
<label>Email Address: <span class="redstar">*</span></label>
<input type="text" readonly="readonly"  style="width:275px; background-color:#666666; color:#ffffff;" name="email" value="<?php echo $this->details->email;  ?>"   />
</div>

<div class="signup">
<label>Additional Email Addresses: Add more email addresses to receive important notifications from MyVendorCenter, including project invitations and compliance document notifications.</label>
(separate multiple addresses with a semi-colon ";")
<textarea name="ccemail_1" id="ccemail_1" style=" width:275px; height:125px; background: none repeat scroll 0 0 #f7f7f7;  border: 1px solid #d7d7d7;  color: #7d7d7d;  font-size: 12px;  padding: 3px;"><?php echo $this->details->ccemail;  ?></textarea>
</div>

<div class="signup">
<label><a href="#" id="passwordchanges">Change Current Password</a></label>
</div>

<div class="signup">
<label>Mailing Address: </label>
<input name="eaddress" id="eaddress" type="text" style="width:275px;" value="<?PHP echo $this->details->company_address?>" />
</div>
<div class="signup">
<label></label>
<input name="eaddresss" id="eaddresss" type="text" style="width:275px;" value="<?PHP echo $this->details->company_addresss?>" />
</div>

<div class="signup">
<label>City: <span class="redstar">*</span></label>
<input type="text" style="width: 275px;" name="city" id="city" value="<?php echo $results[0]->city; ?>"  />
</div>

<div class="signup">
<label>State: <span class="redstar">*</span></label>
<?php // print_r($results[0]->state); exit; ?>
<select name="state" id="state">
<option value="" id=""> Select State </option>
<?php for($i=0; $i< count($state_list); $i++) {   ?>
<option id="<?php echo $state_list[$i]->id;?>" value="<?php echo $state_list[$i]->id;?>" <?php if($state_list[$i]->id == $results[0]->state) {?> selected="selected" <?php } ?> ><?php echo $state_list[$i]->state; ?></option>
<?php } ?>
</select>

<!--<input type="text" style="width:126px;" name="state" value="<?php //echo $statename[0]->state_name; ?>"  />--></div>

<!--<div class="signup">
<label>Zip : <span class="redstar">*</span></label>
<input type="text" style="width:126px;" name="zip" value="<?php //echo $results[0]->zipcode; ?>"   />
</div>
-->

<div class="signup">
<label>Zip: <span class="redstar">*</span></label>
<input type="text" id="zip" style="width:126px;" name="zip" value="<?php echo $results[0]->zipcode; ?>"   />
</div>

<div class="signup">
<label>Year Established:<span class="redstar">*</span></label>
<input name="yearestab" id="yearestab" type="text" style="width:275px;" value="<?php echo $results[0]->established_year; ?>"  />
</div>

<?php ?>
<div class="signup">
<div class="cp">
<label>Company Phone No #: <span class="redstar">*</span></label>
(
<input name="phone_1" id="phone_1" type="text" style="width:30px;" value="<?PHP echo $phone[0]; ?>"  maxlength="3"  />
)
 <input name="phone_2" id="phone_2" type="text" style="width:30px;" value="<?PHP echo $phone[1]; ?>"  maxlength="3" /> - 
 <input name="phone_3" id="phone_3" type="text" style="width:30px;" value="<?PHP echo $phone[2]; ?>"  maxlength="4" />

<input name="dphone_1" id="dphone_1" type="hidden" style="width:30px;" value="<?PHP echo $phone[0]; ?>"  maxlength="3"  />
<input name="dphone_2" id="dphone_2" type="hidden" style="width:30px;" value="<?PHP echo $phone[1]; ?>"  maxlength="3" /> - 
<input name="dphone_3" id="dphone_3" type="hidden" style="width:30px;" value="<?PHP echo $phone[2]; ?>"  maxlength="4" />

</div>

<div class="ext">
<label>Ext:</label>
<input name="extension" id="extension" type="text" style="width:50px;" maxlength="4" value="<?php echo  $this->details->phone_ext; ?>"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); " /></div>
<?php /*?><input name="extension" type="text" style="width:82px;" maxlength="4" value="<?PHP if($results[0]->phone_ext != 0) echo $results[0]->phone_ext; ?>"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); " /></div><?php */?>
<div class="clear"></div>
</div>

<div class="signup">
<div class="cp">
<label>Alternate Phone #: </label>
(<input name="cell_1" id="cell_1" type="text" style="width:30px;" value="<?PHP  echo $alt_phone[0]; ?>" maxlength="3" onclick="this.value = '';" onkeyup="moveOnMax(this,'cell_2')"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); "  />)
 <input name="cell_2" id="cell_2" type="text" style="width:30px;" value="<?PHP echo $alt_phone[1]; ?>" maxlength="3" onclick="this.value = '';" onkeyup="moveOnMax(this,'cell_3')"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); "  /> - 
 <input name="cell_3" id="cell_1"  type="text" style="width:30px;" value="<?PHP echo $alt_phone[2]; ?>" maxlength="4" onclick="this.value = '';" onkeyup="moveOnMax(this,'alt_extension')"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); "  />
</div>

<div class="ext">
<label>Ext:</label>
<input name="alt_extension" type="text" style="width:50px;" maxlength="4" value="<?php echo  $this->details->alt_phone_ext; ?>"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); " /></div>
<?php /*?><input name="alt_extension" type="text" style="width:82px;" maxlength="4" value="<?PHP if($results[0]->alt_phone_ext != 0) echo $results[0]->alt_phone_ext; ?>"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); " /></div><?php */?>
<div class="clear"></div>
</div>

</div>
<div class="signup">
<label>Cell Phone:</label>
<input name="cellphone" type="text" style="width:275px;" value="<?php echo  $this->details->cellphone; ?>"  />
</div>

<?php 
$fax = explode('-',$this->details->faxid);
$fax_acc = $this->details->fax_acc;
if( ( $fax_acc == 'yes' || $fax_acc == '' ) && $this->details->faxid != '--' && $this->details->faxid ){
	$checked_fax = 'checked="checked"';
	$fax_acc_val = 'yes';
	}
else{
    $checked_fax = '';	
	$fax_acc_val = 'no';
	}
  ?>
<div class="signup">
<div class="cp">
<label>Fax Number: </label>
(<input name="fax_1" id="fax_1" type="text" style="width:30px;" value="<?PHP  echo $fax[0]; ?>" maxlength="3" onclick="this.value = '';" onkeyup="moveOnMax(this,'fax_2')"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); "  />)
 <input name="fax_2" id="fax_2" type="text" style="width:30px;" value="<?PHP echo $fax[1]; ?>" maxlength="3" onclick="this.value = '';" onkeyup="moveOnMax(this,'fax_3')"   onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); "  /> - 
 <input name="fax_3" id="fax_3"  type="text" style="width:30px;" value="<?PHP echo $fax[2]; ?>" maxlength="4" onclick="this.value = '';"  onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); "  />
</div>
<div class="clear"></div>
</div>

<div class="signup" style="width:600px;">
<input type="checkbox" name="fax_acc" <?php echo $checked_fax; ?> /> I would also like to receive Project Invitation notifications via Fax
</div>

<div class="signup">
<label>Company Website (optional):</label>
<input type="text" value="<?php echo $results[0]->company_web_url; ?>"  style="width: 275px;" name="company_web_url"   />
</div>


<?php /*?><div class="signup2">
<label>Upload Your Company Logo(optional) <br/>(image file must be .jpg,bmp,or png)</label>
<input name="image" type="file" style="width:275px;" value="Browse..."/><br/><br/><span><img width="50px;" height="50px" src="<?PHP echo JURI::root().'components/com_camassistant/assets/images/vendors/'. $this->details->image ; ?>" /></span>
</div><?php */?>

<div class="signup2">
<br />
<label>Upload your Company logo:</label>
</div>
<div class="signup">
<?php if($this->details->image) { ?>
		<img   src="<?PHP echo JURI::root().'components/com_camassistant/assets/images/vendors/resized/'. $this->details->image ; ?>" />
<?php } else  {    ?>
		<img   src="<?PHP echo JURI::root().'components/com_camassistant/assets/images/vendors/resized/taylo.jpg' ?>"  />
<?php } ?>
		<input type="hidden" value="<?php echo $this->details->image; ?>" name="img_name" />
</div>
<div class="signup2">
<input type="text" id="image" class="file_input_textbox" readonly="readonly" style="vertical-align: top; margin-top:3px;">
<div style="float: left;" class="file_input_div2">
<input type="button" class="file_input_button2" style="margin-top:-2px;">
<input title="Company Logo"  type="file" onchange="javascript: document.getElementById('image').value = this.value" name="hidden_image" class="file_input_hidden">
</div>
<!--<input name="image" type="file" style="width:275px;" value="Browse..."/> --> <!--<br> -->
<div style="clear: left;">(image file must be a .gif, .jpg, or .png)</div>
<br />
<div class="clear"></div>
</div>
<div class="signup">
<!--<select name="sstates" readonly="readonly" style="width:275px;" ><option></option></select>-->
<?php /*for($i=0;$i<count($states);$i++)
{
echo $states[$i]->name."<br/>";
}*/
?> 

<div style="padding-bottom: 0px;" class="signup_check">
<label>Are you an in-house vendor for a<br> 
management company? <span class="redstar">*</span></label>

<div class="clear"></div>
Yes<input type="radio" value="Yes" name="in_house_vendor" id="in_house_vendor" onclick="javascript:displayField('Yes');" <?php if($results[0]->in_house_vendor == 'Yes') { echo "checked=checked";  } ?> >
No<input type="radio"  value="No"  name="in_house_vendor" id="in_house_vendor" onclick="javascript:displayField('No');"  <?php if($results[0]->in_house_vendor == 'No') { echo "checked=checked;"; } ?> >
<div class="clear"></div>
</div>

<?php //if($results[0]->preferred_vendors == "yes") { ?>
<div <?php if($results[0]->in_house_vendor == 'Yes') { ?>  <?php } else { ?>style="display:none;" <?php }?> id="showparent" >
	<div class="signup" style="float:left">
	<div class="state">
	<label>Parent Company Name : <span class="redstar">*</span></label>
	<input name="name" type="text" style="width:267px;" value="<?PHP echo $results[0]->in_house_parent_company; ?>"   />
	</div>
	</div>
	<!-- anil_05-09-2011 -->
	
	<!-- anil_05-09-2011 -->
	<div class="signup" style="float:right">
	<div class="state" style="width:150px;">
	<label>Parent Company Fedral Tax ID: <span class="redstar">*</span></label>
	<input type="text" onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); " onclick="this.value = '';" maxlength="3" value="<?PHP echo $parent_comp_taxid[0]; ?>" style="width: 30px; text-align: center;" name="tax_id1"  > -
		<input type="text" onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); " onclick="this.value = '';" maxlength="2" value="<?PHP echo $parent_comp_taxid[1]; ?>" style="width: 50px; text-align: center;" name="tax_id2"  > <?php /*?>- 
		<input type="text" onkeydown="if(isNaN(this.value)) alert('Please enter valid number'); " onclick="this.value = '';" maxlength="4" value="<?PHP echo $parent_comp_taxid[2]; ?>" style="width: 45px; text-align: center;" name="tax_id3"  ><?php */?>
	</div>
	</div>
</div>
<?php // } ?>

<div class="clear"></div>
<div class="form_checkbox">
<div class="check"></div>
<div class="checktext">
<input type="hidden" name="user_id" value="<?PHP  echo $this->user_id; ?>" readonly="readonly"  />
<input type="hidden" name="username" value="<?PHP  echo $user->username; ?>"  />
<input type="hidden" name="email" value="<?PHP  echo $user->email; ?>"  />
<input type="hidden" value="com_camassistant" name="option">
<input type="hidden" value="vendors" name="controller">
<input type="hidden" value="thanks" name="task">

<!--<input type="image" style="border:none"  src="templates/camassistant_left/images/save.gif" alt="Continue sign up!" readonly="readonly"  />-->
  </div>

</div>
<div class="clear"></div>
</div></td>
</tr>
</table>

<div align="center"><a id="savevendorinfo" onclick="javascript:validate_data2();" href="#"><img src="templates/camassistant_left/images/save.gif" /></a></div>
<br /><br />
</form>
</div>

<table width="100%" cellspacing="0" cellpadding="0" style="margin:6px 4px 6px 0">
<tbody>
<tr id="table_blue_rowdotsmarket" class="table_blue_rowdots_submitted">
<td width="15" valign="middle" align="left" style="font-size:15px; font-weight:bold;">
<a style="float:left;" href="javascript:void(0);" class="proposal_opener" id="industry"></a>&nbsp;&nbsp;&nbsp;INDUSTRIES SERVED
</td>
</tr>
</tbody></table>
<div id="industries" style="display:none;">
<div style="padding:20px; padding-left:0px;">
<form name="industriesform" id="industriesform" method="post">
<table width="100%"><tr>
<?PHP $i=0;
 foreach( $industries as $key => $obj )
 {
 echo '<td width="50%">'.$obj.'</td>'; 
 $i++;
 if($i%2 == '0' && $i != '0')
 echo "</tr><tr>";
 }
 ?>
 </td></tr>
 <tr height="30"></tr> 
 <tr><td colspan="2" align="center"><a id="savevendorinfo" onclick="javascript:validate_indistries();" href="javascript:void();"><img src="templates/camassistant_left/images/save.gif" /></a></td></tr>
 <tr height="10"></tr>
 </table>
<input type="hidden" value="com_camassistant" name="option">
<input type="hidden" value="vendors" name="controller">
<input type="hidden" value="saveindustries" name="task">
 </form>
</div>
</div>

<table width="100%" cellspacing="0" cellpadding="0" style="margin:6px 4px 6px 0;">
<tbody>
<tr id="table_blue_rowdotsmarket" class="table_blue_rowdots_submitted">
<td width="15" valign="middle" align="left" style="font-size:15px; font-weight:bold;">
<a style="float:left;" href="javascript:void(0);" class="proposal_opener" id="areas"></a>&nbsp;&nbsp;&nbsp;AREAS SERVED
</td>
</tr>
</tbody></table>
<div id="counties" style="display:none;">
<div style="padding:0 20px 20px 0;">
<form name="areasform" id="areasform" method="post">
<?php
 $businesslist = $this->businesslist;
 $existcounties = $this->vendorcounties;
  ?>
<table width="100%">
<?php for ($j=0; $j<count($this->businesslist); $j++){ ?>
<?php echo "<tr height='10'></tr><tr><td colspan='3'>State where you are licensed to do business: <strong>".$businesslist[$j]->state_name.'<strong>' ;	 ?>
</td>
</tr>
<tr height="10"></tr>
<tr>
<?php 
$allcounties = $businesslist[$j]->counties;
for ($i=0; $i<count($allcounties); $i++){ 
	$k = $i + 1 ;
	if( in_array($allcounties[$i]->id, $existcounties) ) {
		$checked = "checked='checked'";
	}
	else{
	$checked = '';
	 } 
	 ?>
	<td width="33%">
	<input type="checkbox" <?php echo $checked; ?> value="<?php echo $allcounties[$i]->id; ?>" name="cid[]" />&nbsp;<?php echo $allcounties[$i]->County; ?>
	</td>
	<?php 
	if($k%3 == '0' && $k != '0')
 	echo "</tr><tr>";	
} 
}?>
</td>
</tr>
 <tr height="30"></tr>
 <tr><td colspan="4" align="center"><a id="savevendorinfo" onclick="javascript:validate_areas();" href="javascript:void();"><img src="templates/camassistant_left/images/save.gif" /></a></td></tr>
 </table>
 
 <input type="hidden" value="com_camassistant" name="option">
<input type="hidden" value="vendors" name="controller">
<input type="hidden" value="saveareas" name="task">
 </form>
</div>
</div>


</div> 
<div class="clear"></div>
</div>
<?php } ?>