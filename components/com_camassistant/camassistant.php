<?php
/**
 * @version		1.0.0 camassistant $
 * @package		camassistant
 * @copyright	Copyright Â© 2010 - All rights reserved.
 * @license		
 * @author		
 * @author mail	allen@camassistant.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');

if($_REQUEST['controller'] == 'vendorsignup' || $_REQUEST['controller'] == 'propertymanager' && $_REQUEST['task'] != 'company_edit_form' && $_REQUEST['task'] != 'customer_edit_form' || $_REQUEST['task'] == 'view_upld_cert' || $_REQUEST['task'] == 'pdf_view_upld_cert' || $_REQUEST['task'] == 'downloadfile'|| $_REQUEST['task'] == 'open' || $_REQUEST['task'] == 'vendor_download_proposals_summary'|| $_REQUEST['task'] == 'vendor_download_awarded_proposals' || $_REQUEST['task'] == 'mail_redirect_form'  || $_REQUEST['task'] == 'invitation_pdf' ) {
$redirect=1;
}
if($_REQUEST['task'] == 'manage_properties'){
$redirect = '';
}
if($_REQUEST['task'] == 'mail_redirect_form') {
$redirect = 1;
}
if($_REQUEST['task'] == 'vendorpubliclayout') {
$redirect = 1;
}
if($_REQUEST['task'] == 'savenotify') {
$redirect = 1;
}
if($_REQUEST['task'] == 'marketdocsprofile') {
$redirect = 1;
}
if($_REQUEST['task'] == 'openmarketdocs') {
$redirect = 1;
}
if($_REQUEST['task'] == 'verfiryphonenumber') {
$redirect = 1;
}
if($_REQUEST['task'] == 'view_upld_cert_vendorprofile') {
$redirect = 1;
}
if($_REQUEST['task'] == 'openview_upld_cert') {
$redirect = 1;
}
if($_REQUEST['task'] == 'viewfile') {
$redirect = 1;
}
if($_REQUEST['task'] == 'openview_upld_cert_vendorprofile') {
$redirect = 1;
}
if($_REQUEST['task'] == 'viewmarketdocs') {
$redirect = 1;
}
if($_REQUEST['task'] == 'viewfilecomp') {
$redirect = 1;
}
if($_REQUEST['task'] == 'viewbasicfile') {
$redirect = 1;
}
if($_REQUEST['task'] == 'crefsprofile') {
$redirect = 1;
}
if($_REQUEST['task'] == 'viewcrefdocs') {
$redirect = 1;
}
if($_REQUEST['task'] == 'viewreffile') {
$redirect = 1;
}
if($_REQUEST['task'] == 'openrefdocs') {
$redirect = 1;
}
if($_REQUEST['task'] == 'getvendorinfo') {
$redirect = 1;
}
if($_REQUEST['task'] == 'getmyvendorlist') {
$redirect = 1;
}
if($_REQUEST['task'] == 'results_searchcompany') {
$redirect = 1;
}
if($_REQUEST['task'] == 'save_pcode') {
$redirect = 1;
}


if($user->id=='' && $redirect=='' ){
global $mainframe;
$return  = base64_encode($_SERVER['REQUEST_URI']);
$mainframe->redirect("index.php?option=com_user&view=login&Itemid=137&return=".$return."");
echo "<span class='blueheads'>You need to login to access this page</span>";
}

require_once (JPATH_COMPONENT.DS.'controller.php');

if( $controller = JRequest::getWord('controller') ) {
	//print_r($controller);
	$path = JPATH_COMPONENT.DS.'controllers'.DS.$controller.'.php';
	//set the controller page  
	require_once ($path);
	$classname  = $controller.'controller';
	$controller = new $classname( array('default_task' => 'display') );
}else{
	//$controller = JRequest::getVar('controller','controller' ); 
	// Create the controller
	$controller = new camassistantController();
}

// Perform the Request task
$controller->execute( JRequest::getVar('task' ));
// Redirect if set by the controller
$controller->redirect(); 





?>