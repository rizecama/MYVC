<?php

/**

 * @version		1.0.0 promocode $

 * @package		promocode

 * @copyright	Copyright © 2011 - All rights reserved.

 * @license		GNU/GPL

 * @author		anandbabu

 * @author mail	anandbabu@projectsinfo.net

 *

 *

 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com

 */



// no direct access

defined('_JEXEC') or die('Restricted access');



jimport( 'joomla.application.component.model' );



class invitecodeModelInvitecode extends Jmodel

{

	function __construct()

	{

		parent::__construct();

		global $mainframe, $context;



		//initialize class property

	  $this->_table_prefix = '#__cam_invitecode';	

	  

		//DEVNOTE: Get the pagination request variables

		$limit			= $mainframe->getUserStateFromRequest( $context.'limit', 'limit', $mainframe->getCfg('list_limit'), 0);

		$limitstart = $mainframe->getUserStateFromRequest( $context.'limitstart', 'limitstart', 0 );

		$filter_order		= $mainframe->getUserStateFromRequest( $context.'filter_order',		'filter_order',		'id',	'cmd' );

		$filter_order_Dir	= $mainframe->getUserStateFromRequest( $context.'filter_order_Dir',	'filter_order_Dir',	'asc',			'word' );



		$this->setState('limit', $limit);

		$this->setState('limitstart', $limitstart);



	}

	function getData()

	{

	

		//DEVNOTE: Lets load the content if it doesn't already exist

		if (empty($this->_data))

		{

			$query = $this->_buildQuery();

			$this->_data = $this->_getList($query, $this->getState('limitstart'), $this->getState('limit'));

		}



		return $this->_data;

	}

	/**

	 * Method to get the total number of helloworld items

	 *

	 * @access public

	 * @return integer

	 */

	function getTotal()

	{

		//DEVNOTE: Lets load the content if it doesn't already exist

		if (empty($this->_total))

		{

			$query = $this->_buildQuery();

			$this->_total = $this->_getListCount($query);

		}



		return $this->_total;

	}

	

	/**

	 * Method to get a pagination object for the helloworld

	 *

	 * @access public

	 * @return integer

	 */

	function getPagination()

	{

		// Lets load the content if it doesn't already exist

		if (empty($this->_pagination))

		{

			jimport('joomla.html.pagination');

			$this->_pagination = new JPagination( $this->getTotal(), $this->getState('limitstart'), $this->getState('limit') );

		}



		return $this->_pagination;

	}

	function _buildQuery()

	{

		$query = "SELECT id,invitecode,amount FROM `#__cam_invitecode`";



		return $query;

	}

	function delete($cid = array())

	{

		$result = false;

		if (count( $cid ))

		{

			$cids = implode( ',', $cid );

			$query = 'DELETE FROM '.$this->_table_prefix.' WHERE id IN ( '.$cids.' )';

			$this->_db->setQuery( $query );

			if(!$this->_db->query()) {

				$this->setError($this->_db->getErrorMsg());

				return false;

			}

		}

		return true;

	}



}

?>