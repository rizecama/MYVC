<?php
/**
 * @version		1.0.0 camassistant $
 * @package		camassistant
 * @copyright	Copyright Â© 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');
JHTML::_('behavior.modal');
JHTML::_('behavior.calendar');
jimport( 'joomla.html.html' );
JHTML::_('behavior.tooltip', '.hasTip2', $toolTipArray);
$propertyList=$this->propertyList;
$industryList=$this->industryList;
$reqCatList=$this->reqCatList;
$cat = $this->SPLReq_Category;
$Edit_reqCatList=$this->Edit_reqCatList;
$main = $Edit_reqCatList['main'];
$sub = $Edit_reqCatList['sub'];
$child = $Edit_reqCatList['child'];
$task_cnt = count($this->rfplinetasks);
$adddocs_cnt = count($this->rfpuploadfiles);
$model=$this->getModel('rfp');
$task = $_REQUEST['task'];
for($i=0;$i<count($reqCatList);$i++)
{
	$pid = $reqCatList[$i]['id'];
	$reqCatList2=$model->getSplRequiremntCats($pid);
	$reqCatList[$i]['subcat'] = $reqCatList2;
	//$cnt = count($reqCatList[$i]['subcat']);
	for($j=0;$j<count($reqCatList[$i]['subcat']);$j++)
	{
		$pid2 = $reqCatList[$i]['subcat'][$j]['id'];
		$reqCatList3=$model->getSplRequiremntCats($pid2);
		$reqCatList[$i]['subcat'][$j]['subcat2'] = $reqCatList3;
	}
}
//echo $reqCatList[1][subcat][0]['id'];
//$main = implode(',',$main);
//print_r($reqCatList);exit;
$user=& JFactory::getuser();
?>

<link rel="stylesheet" media="all" type="text/css" href="<?php echo Juri::root(); ?>components/com_camassistant/skin/css/jquery1.css" />
<script type="text/javascript" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/js/jquery-ui-1.8.6.custom.min.js"></script>
<script type="text/javascript" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/js/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/js/jquery.elastic.js"></script>
<script>
function validate_date(day)
 {
	 var mystring = day;
	 var myarray = mystring.split("-");
	 var d = new Date();
	 var curr_day = d.getDate();
	 var diff = parseInt(myarray[1]) - parseInt(curr_day);
	function addDays(myDate,days)
	 {
        return new Date(myDate.getTime() + days*24*60*60*1000);
	  }
     var x = addDays(new Date(),10);
 }
G = jQuery.noConflict();
window.addEvent('domready', function() {
			SqueezeBox.initialize({});
			$$('input.modal').each(function(el) {
				el.addEvent('click', function(e) {
				new Event(e).stop();
					inputString=G('#industry_id').val();
					if(inputString){
el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task=showindustryform&formid='+inputString+'&lcnt='+id1+'&tmpl=component';
var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 780, y:580}}"))
	SqueezeBox.fromElement(el,options);
					}else{
					alert('Please Select The industry');
					}
				});
			});

		});

G = jQuery.noConflict();
function deletelinetask(inputString){
	 if (confirm("Are you sure you want to delete")) {
		G.post("index2.php?option=com_camassistant&controller=rfp&task=deletelinetask", {queryString: ""+inputString+""}, function(data){
				G('#line_task'+inputString).html('');
			});

	 }
	}

function deletelineupload(taskid,num){
var res = confirm("Are you sure you want to remove this file from the RFP?");

if(res==true){
window.parent.document.getElementById('lineuploads'+taskid).value ='';
window.parent.document.getElementById('delimg'+taskid).style.display ='none';
window.parent.document.getElementById('uploadfile'+taskid).style.display ='none';
window.parent.document.getElementById('newSelector'+num).style.display ='none';
//window.parent.document.getElementById('downloadfile'+taskid).style.display ='none';
/*
if(taskid>20){
window.parent.document.getElementById('requiredoprice'+taskid).style.display ='none';
}
*/
//window.parent.document.getElementById('upload_file'+taskid).innerHTML ='<a href="javascript:linetaskupload(\''+taskid+'\');"><img src="<? //echo juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif" alt="upload a file"></a>';
    }
}
function deletelineupload_line(taskid){
var res = confirm("Are you sure you want to remove this file from the RFP?");

if(res==true){
  //alert(taskid);
window.parent.document.getElementById('line_uploads'+taskid).value ='';
window.parent.document.getElementById('upload_file'+taskid).style.display ='none';
window.parent.document.getElementById('downloadfile'+taskid).style.display ='none';
/*
if(taskid>20){
window.parent.document.getElementById('requiredoprice'+taskid).style.display ='none';
}

window.parent.document.getElementById('upload_file'+taskid).innerHTML ='<a href="javascript:linetaskupload(\''+taskid+'\');"><img src="<? echo juri::base(); ?>components/com_camassistant/skin/images/uploadfile.gif" alt="upload a file"></a>'; */
}
}
function addproperty(id){
if(id=='addp'){
el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task=addproperty';
var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
SqueezeBox.fromElement(el,options);
}
}

function linetaskupload(id){
property_id=G('#property_id').val();
inputString1=G('#industry_id').val();
//alert(property_id);
if(property_id){
    el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task=upload_select&taskid='+id+'&pid='+property_id+'&mid='+<?php echo $user->id; ?>+'&tmpl=component';

//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=popupdocs&task=opendocs&taskid='+id+'&pid='+property_id+'&mid='+<?php echo $user->id; ?>+'&tmpl=component';
//SqueezeBox.fromElement(el);
var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 700, y:450}}"))
SqueezeBox.fromElement(el,options);
}else{
alert('Please Select the Property and Industry.');
}
}

function sowrfp(task) {
industry=G('#industry_id').val();
property=G('#property_id').val();
//if((industry)&&(property)){
	if(task=='pro_hired')
	{
		document.getElementById("licenced").checked=false;
		document.getElementById("submenu1").style.display='none';
		document.getElementById("sub_req_id1").checked=false;
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		document.getElementById('someone_engineer').style.display='none';
		el="index2.php?option=com_content&view=article&id=122";
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
		SqueezeBox.fromElement(el,options);
		//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;
	} else if(task=='pro_hired_camassitant'){
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		/*document.getElementById('line_task').style.display='';
		document.getElementById('upload_file').style.display='';*/
		document.getElementById('someone_engineer1').style.display='none';
		document.getElementById('someone_engineer2').style.display='none';
		document.getElementById('someone_engineer').style.display='';
		document.getElementById("choose_tasks1a").checked=false;
		document.getElementById("choose_tasks1b").checked=false;
		document.getElementById("licenced").checked=true;
		document.getElementById("submenu1").style.display='';
		document.getElementById("sub_req_id1").checked=true;
		//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;
	}  else if(task=='pro_hired_camassitant1'){
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		task='pro_hired_camassitant';
		/*document.getElementById('line_task').style.display='';
		document.getElementById('upload_file').style.display='';*/
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer1').style.display='';
		document.getElementById('someone_engineer2').style.display='none';
		document.getElementById("choose_tasks21").checked=false;
		document.getElementById("choose_tasks22").checked=false;
		/*el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&formid=23&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);*/

	} else if(task=='pro_hired_camassitant2'){
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer1').style.display='none';
		document.getElementById('someone_engineer2').style.display='';
		document.getElementById("choose_tasks31").checked=false;
		document.getElementById("choose_tasks32").checked=false;
		/*el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&formid=47&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);*/
		//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;
	} else if(task=='pro_hired_camassitant1_eng'){
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer1').style.display='';
		el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&direct=form&formid=106&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
	} else if(task=='pro_hired_camassitant2_arc'){
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer1').style.display='';
		el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&direct=form&formid=106&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
	} else if(task=='pro_hired_camassitant1_eng1'){
		document.getElementById('line_task').style.display='';
		document.getElementById('upload_file').style.display='';
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer2').style.display='';
		el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&direct=form&formid=106&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
	} else if(task=='pro_hired_camassitant2_arc1'){
		document.getElementById('line_task').style.display='';
		document.getElementById('upload_file').style.display='';
		document.getElementById('someone_engineer').style.display='';
		document.getElementById('someone_engineer2').style.display='';
		el='index.php?option=com_camassistant&controller=rfp&task=showindustryform&direct=form&formid=106&tmpl=component';
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
	} else {
		document.getElementById("licenced").checked=false;
		document.getElementById("submenu1").style.display='none';

		document.getElementById("sub_req_id1").checked=false;
		document.getElementById('someone_engineer').style.display='none';
		//document.getElementById("licenced").checked=false;
		//document.getElementById("submenu1").style.display='';
		//document.getElementById("sub_req_id1").checked=false;
		el="index2.php?option=com_content&view=article&id=121";
		var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);
		//el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;
	}

	<?php /*?>el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task='+task+'&industry_id='+industry+'&property_id='+property;<?php */?>
	/*var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 600, y:450}}"))
	SqueezeBox.fromElement(el,options);*/
//}else{
	//alert('Please Fill the Property And Industry');
//}


}

function submitbutton(val){
if(val=='save_reject'){

id=document.adminForm.id.value;
email=document.adminForm.email.value;
name=document.adminForm.name.value;
lastname=document.adminForm.lastname.value;
search=document.adminForm.search.value;
status=document.adminForm.status.value;
industry_id=document.adminForm.industry_id.value;
rfpstatus=document.adminForm.rfpstatus.value;
rfpapproval=document.adminForm.rfpapproval.value;

el='<?php  echo Juri::base(); ?>index2.php?option=com_camassistant&controller=rfp&task=editrfpreject&email='+email+'&name='+name+'&lastname='+lastname+'&id='+id+'&search='+search+'&status='+status+'&industry_id='+industry_id+'&rfpstatus='+rfpstatus+'&rfpapproval='+rfpapproval;
var options = $merge(options || {}, Json.evaluate("{handler: 'iframe', size: {x: 780, y:580}}"))
	SqueezeBox.fromElement(el,options);
} else if(val=='save_approve'){
document.adminForm.task.value='save_approve';
document.adminForm.submit();
} else if(val=='update_rfp'){
document.adminForm.task.value='update_rfp';
document.adminForm.submit();
} else  if(val=='silent_rfp'){
document.adminForm.task.value='silent_rfp';
document.adminForm.submit();
} else if(val=='draft_save'){
document.adminForm.task.value='draft_save';
document.adminForm.submit();
} else if(val=='cancel'){
var rfpstatus= document.adminForm.rfpstatus.value;
		var industryid= document.adminForm.industryid.value;
		var rfpapproval= document.adminForm.rfpapproval.value;
		var search= document.adminForm.search.value;
        //document.adminForm.task.value='cancel';
//document.adminForm.submit();
if(industryid=='undefined'){
   industryid='';
} else {
   industryid=industryid;
}

window.location = 'index.php?option=com_camassistant&controller=rfp&industry_id='+industryid+'&rfpstatus='+rfpstatus+'&rfpapproval='+rfpapproval+'&search='+search;
//document.adminForm.task.value='cancel';
//document.adminForm.submit();
} else if(val=='deleterfp'){
 var r=confirm("Are you sure you want to delete this rfp?");
	if (r==true){
document.adminForm.task.value='deleterfp';
document.adminForm.submit();
}
} else if(val=='view_eli_vendors'){
   rfp_id =document.adminForm.id.value;
    search=document.adminForm.search.value;
   status=document.adminForm.status.value;
   industry_id=document.adminForm.industryid.value;
   rfpstatus=document.adminForm.rfpstatus.value;
   rfpapproval=document.adminForm.rfpapproval.value;
 window.location = 'index.php?option=com_camassistant&controller=rfp&task=itb_tool&rfp_id='+rfp_id+'&var=el&industry_id='+industry_id+'&rfpstatus='+rfpstatus+'&rfpapproval='+rfpapproval+'&search='+search;
} else if(val=='view_ineli_vendors'){
   rfp_id =document.adminForm.id.value;
    search=document.adminForm.search.value;
   status=document.adminForm.status.value;
   industry_id=document.adminForm.industryid.value;
   rfpstatus=document.adminForm.rfpstatus.value;
   rfpapproval=document.adminForm.rfpapproval.value;
 window.location = 'index.php?option=com_camassistant&controller=rfp&task=ineligible_vendors&rfp_id='+rfp_id+'&var=inel&industry_id='+industry_id+'&rfpstatus='+rfpstatus+'&rfpapproval='+rfpapproval+'&search='+search;
} else {
document.adminForm.submit();
}
}

//
function showperform(id,rfm)
{
	if(document.getElementById('work_perform1').checked==true)
		G('#sub_perform'+id).css('display','');
	else
		G('#sub_perform'+id).css('display','none');
}
//
function showperform2(id,rfm)
{
	//G('#sub_perform'+id).css('display','');
	if(rfm && document.getElementById('work_perform').checked==true)
		G('#sub_perform'+rfm).css('display','');
	else
		G('#sub_perform'+rfm).css('display','none');
}
//
function removeperform(){
G('#sub_performother').css('display','');
//G('#sub_perform1').css('display','none');
}
function showme(){
G('#sow_me').css('display','block');
G('#someone_me').css('display','none');
}
function showsomeone(){
G('#sow_me').css('display','none');
G('#someone_me').css('display','block');
}

function addEvent1() {
linetask=$('#line_task').html();
G('#newdiv').prepend(linetask);
}


//
function validatewp()
{
	var chks = document.getElementsByName('work_perform[]');
	var hasChecked = false;
	for (var i = 0; i < chks.length; i++)
	{
	if (chks[i].checked)
	{
		hasChecked = true;
		break;
	}
	}
	if (hasChecked == false)
	return false;
	else
	return true;
}
//
function validate_sitevisit()
{
	var chks2 = document.getElementsByName('site_visit[]');
	var bidders_info = document.getElementsByName('bidders_info[]');
	var hasChecked2 = false;
	var details=0;
	for (var i = 0; i < chks2.length; i++)
	{
	if (chks2[i].checked)
	{
		if(bidders_info[i].value=='' || bidders_info[i].value=='Please provide details here')
		{
		document.getElementById('details').value='no';
		} else {
		document.getElementById('details').value='yes';
		}
		hasChecked2 = true;
		break;
	}
	}
	if (hasChecked2 == false)
	return false;
	else
	return true;
}
function fn_submitRFPd(rfpType)
{
	var frm=document.adminForm;
	if(frm.property_id.value=='')
	{
		alert("Please choose your property name");
		frm.property_id.focus();
		return;
	} else {
	frm.controller.value="rfp";
			 frm.task.value="submit_rfp";
			 frm.rfp_type.value=rfpType;
			 frm.submit();
	}
}
function fn_submitRFP(rfpType)
{
//alert("can");
	frm=document.adminForm;

	var wpres=validatewp();
	var sitevisit=validate_sitevisit();
	//alert(diff);
	/*for(var s=1; s<=id1; s++)
	{
		 if(document.getElementById('title_task'+s).value == 'Enter Title of Line Item Task')
		 {
		 alert('Please Enter Title of Line Item Task');
		 document.getElementById('title_task'+s).value='';
		 document.getElementById('title_task'+s).focus();
		 return ;
		 }
	 }*/
	if(frm.property_id.value=='')
	{
		alert("Please choose your property name");
		frm.property_id.focus();
		return;
	} else if(frm.projectName.value=='') {
		alert("Please enter Reference name");
		frm.projectName.focus();
		return;
	} else if(frm.industry_id.value=='') {
		alert("Please choose your Industry Name");
		frm.industry_id.focus();
		return;
	} else if(wpres==false) {
		alert("Please select at least one where the work is to be performed");
		return;
	/*}
	} else if(frm.projectInfo.value=='') {
		alert("Please enter about Project details");
		frm.projectInfo.focus();
		return;*/
	} else if(frm.startDate.value=='') {
		alert("Please select your project Start date");
		frm.startDate.focus();
		return;
	} else if(frm.endDate.value=='') {
		alert("Please select your project End date");
		frm.endDate.focus();
		return;
	} else if(frm.frequency.value=='') {
		alert("Please enter Frequency");
		frm.frequency.focus();
		return;
	} else if(frm.maxProposals.value=='' || frm.maxProposals.value==0) {
		alert("Please select maximum proposals");
		frm.maxProposals.focus();
		return;
	} else if(frm.proposalDueDate.value=='') {
		alert("Please select vendor proposal due Date");
		frm.proposalDueDate.focus();
		return;
	/*} else if(frm.proposalDueTime.value=='') {
		alert("Please select vendor proposal Ending Time");
		frm.proposalDueTime.focus();
		return;*/
	} else if(frm.proposalDueDate.value) {
		var dateBits1=frm.startDate.value.split('-');
		var dateBits2=frm.endDate.value.split('-');
		var dateBits3=frm.proposalDueDate.value.split('-');
		var currentTime = new Date()
		var month = currentTime.getMonth() + 1
		var day = currentTime.getDate()
		var year = currentTime.getFullYear()
		currentTime1 = month + "/" + day + "/" + year;
		var yeartim=dateBits3[2].split(' ');
		rfptime = dateBits3[0] + "/" + dateBits3[1] + "/" + yeartim[0];
		var date1 = new Date(currentTime1);//yyyy-mm-dd format
		var date2 = new Date(rfptime);
		if(date1 > date2){
		alert("proposal date should not be less than todays date");
		frm.proposalDueDate.focus();
		return;
		}
		//date1=dateBits1[2] + '-' + dateBits1[0]+ '-' + dateBits1[1] + ' 00:00:00';
		var yeartime=dateBits3[2].split(' ');
		//date2=yeartime[0] + '-' + dateBits2[0]+ '-' + dateBits2[1] + ' '+yeartime[1]+':00';
		var d1=new Date(dateBits1[2] , dateBits1[0],dateBits1[1]);
		var d2=new Date(dateBits2[2] , dateBits2[0],dateBits2[1]);
		var d3=new Date(yeartime[0] , dateBits3[0],dateBits3[1]);
		var diff=d1-d2;

		var currentTime = new Date();
		var month = currentTime.getMonth();
		var day = currentTime.getDate();
		var year = currentTime.getFullYear();
		var current =new Date( month , day, year);
		if(d1>d2) {
		alert("Project start date must be less than Project end date");
		frm.startDate.focus();
		return;
		}  else if(sitevisit==false) {
			alert("Please select at least one from the site visit list");
			return;
		} else if(document.getElementById('details').value=='no') {
			alert("Please enter the Site Visit information");
			return;
		}  else if(frm.terms.checked==false ) {
			alert("You must accept the terms and conditions to submit your RFP");
			frm.terms.focus();
			return;
		} else {

			 var id1='1';

			for(var s=1; s<=id1; s++)
			{

				var idname = 'title_task'+s;
				 if(document.getElementById('title_task'+s).value == 'Enter Title of Line Item Task')
				 {
				 alert('Please Enter Title of Line Item Task');
				 document.getElementById('title_task'+s).value='';
				 document.getElementById('title_task'+s).focus();
				 return ;
				 }
			 }
			frm.controller.value="rfp";
			//alert(frm.task.value);
			//return false;
			//frm.task.value="update_rfp";
			frm.rfp_type.value=rfpType;
			frm.submit();
		}
	}
}

function openmenu(val)
{
	//alert(document.getElementById("submenu"+val).style.display);
	//alert(val);
	if(document.getElementById("submenu"+val).style.display=="none")
	{
	document.getElementById("submenu"+val).style.display="";
	if(val==11)
			document.getElementById('req_id19').checked=true;
	if(val==12 && document.getElementById('sub_req_id3').checked==true)
	document.getElementById('liability'+val).style.display='';
	//document.getElementById("sr_cat").checked="true";
	}
	else
	{
	document.getElementById("submenu"+val).style.display="none";
	//document.getElementById("sr_cat").checked="false";
	}

}//alert(document.getElementById("submenu"+val).style.display);
	/*if(document.getElementById("submenu"+val).style.display=="none")
	{
	document.getElementById("submenu"+val).style.display="";
	//document.getElementById("sr_cat").checked="true";
	}
	else
	{
	document.getElementById("submenu"+val).style.display="none";
	//document.getElementById("sr_cat").checked="false";
	}

}*/

	var task = '<?PHP echo $task; ?>';
	var id1 = '0';
	var cnt =  '';
	if(task == 'edit')
	 id1=<?PHP echo $task_cnt; ?>;
    else if(id1=='0' && task != 'edit'){
	 id1='1';
	}


	var endid1;

	function addEvent1(pid)
	{
		//document.getElementById("removeevent1").style.display = "block";
		/*if (id1<10)
		{ */
			//alert(id1);
			if(id1 == '0')
			id1=<?PHP echo $task_cnt; ?>;
			id1++;
			var arrlicen=new Array();
			var ni = document.getElementById('newdiv');
			var numi = document.getElementById('theValue');
			//alert(numi.value);
			var num = (document.getElementById("theValue").value -1)+ 2;
			//alert(num);
			numi.value = num;
			var divIdName = "newSelect"+id1;

	 newitem='<div id=\'line_task'+id1+'\'><div class="lineitem_pan_row"><p style="padding-top: 35px;"></p><span class="grey_12">Line Item #<span id="LM_'+id1+'">'+id1+'</span>:</span><div class="lineitem_pan"><input type="hidden" name="old_taskids[]" /><input id=\'title_task'+id1+'\' type="text" value="Enter Title of Line Item Task" onblur="if (this.value == \'\') this.value = \'Enter Title of Line Item Task\'" onfocus="if (this.value == \'Enter Title of Line Item Task\')this.value = \'\'"  class="other_tfield" style="width: 300px;" name="linetaskname_2'+id1+'[]">&nbsp;<span class="redstar">*</span><input type="text" value="Frequency" onblur="if (this.value ==\'\') this.value =\'Frequency\'" id="frequency'+id1+'" onfocus="if (this.value == \'Frequency\') this.value = \'\'" class="other_tfield" style="width: 239px; margin-left: 32px;" name="rfpreference_2'+id1+'[]"><span class="hasTip2" title="Example: one-time, upon scheduled visits, daily, weekly, bi-weekly, monthly, quarterly, annually, or specific dates."> <img align="right" style="margin-top:-8px; margin-right: 0px;" alt="info" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/images/info_icon3.png"></span><div class="clear"></div><p style="padding-top: 5px;"></p><textarea style="border: 1px solid rgb(215, 215, 215); padding: 5px; background: rgb(247, 247, 247) none repeat scroll 0% 0%; width: 612px; height: 45px; font-family: arial; font-size: 12px; color: rgb(125, 125, 125); -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous;" id="line_taskdesc'+id1+'" name="task_desc_2'+id1+'[]"></textarea></div><div style="float: left; padding-left: 10px;"><strong><input type="checkbox"  name="is_req_taskvendors_2'+id1+'[]" id="price'+id1+'" value="1" onclick="javascript:check_hiddenvalue('+id1+');"><input type="hidden" name="hidden_taskvendors_2'+id1+'[]" value="0" id="hidden_price'+id1+'" />Require</strong> vendors to assign a <strong>Dollar Value</strong> to this Line Item.</div><div class="clear"></div><div class="color_butons"><span id="DL_'+id1+'"><a href="javascript:removeEvent1('+id1+');" ><img alt="Add another line item task" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/images/removelineitemtask.gif"></a></span></div><br/><br/><a href="javascript:void(0);" onclick="addEventa2('+id1+');"><img alt="upload a file" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/images/uploadfile.gif"></a></span> <div class="clear"></div></div></div><br/><br/><div id="newdiva2'+id1+'"></div></br/><input type="hidden" checked="" id="line_taskno" name="line_taskno[]" value="2'+id1 +'" >';
			var newdiv = document.createElement('div');
			newdiv.setAttribute("id",divIdName);
			newdiv.innerHTML = newitem;
			ni.appendChild(newdiv);

	}


	function remove_Event1(divNum)
	{
			G("div").remove("#newSelect"+divNum);
	}


	function removeEvent1(divNum)
	{
		var res = confirm("Are you sure you want to permanently delete this Line Item Task?");
		var idx;
		var idx2;
		var gtid;

		if(res==true)
		{
			if(id1 == divNum)
			G("div").remove("#newSelect"+divNum);
			else{
				for(idx=1; idx<=id1; idx++)
				{
					if(idx == divNum)
					G("div").remove("#newSelect"+divNum);
					else if(idx > divNum)
					{
					idx2 = idx-1;
					G("#line_task"+idx).attr("id","line_task"+idx2);
					G("#title_task"+idx).attr("id","title_task"+idx2);
					G("#line_taskdesc"+idx).attr("id","line_taskdesc"+idx2);
					G("#newSelect"+idx).attr("id","newSelect"+idx2);
					G("#LM_"+idx).attr("id","LM_"+idx2);
					G("#LM_"+idx2).html(idx2);
					G("#DL_"+idx).attr("id","DL_"+idx2);
					G("#DL_"+idx2).html('<a href="javascript:removeEvent1('+idx2+');"><img src="components/com_camassistant/skin/images/removelineitemtask.gif" alt="Remove line item task" /></a>');
					}
				}

			}
			id1 = id1-1;
		}
	}


	/*if(id1<=cnt)
	document.getElementById("removeevent1").style.display = "none";*/

	//}
	function removeEventedit(divNum){


	//G("#title_task"+id).attr("id","title_task"+id);
		G("div").remove("#newSelect"+divNum);
		//G('#newSelect'+divNum).html('');
		id1 = id1-1;
		var x;
			for(x=2; x<=id1; x++)
			{
				gtid = parseInt(x)+1;
				if(x>=divNum)
				{
				//alert('if');
				gtid = parseInt(x)+1;
				G("#PLN_"+gtid).html(x); //to change divid value
				G("#PLN_no"+gtid).html(x);
				G("#PLN_no"+gtid).attr("id","PLN_no"+x);
				G("#newSelect"+gtid).attr("id","newSelect"+x);
				G("#line_task"+gtid).attr("id","line_task"+x);
				G("#title_task"+gtid).attr("id","title_task"+x);
				G("#line_taskdesc"+gtid).attr("id","line_taskdesc"+x);
				G("#PLN_delete"+gtid).attr("id","PLN_delete"+x);
				G("#PLN_delete"+x).html('<a href="javascript:removeEvent1('+x+');"><img src="components/com_camassistant/skin/images/removelineitemtask.gif" alt="Remove line item task" /></a>');
				}
				else
				{
				//alert('else');
				G("#PLN_"+x).html(x); //to change divid no
				G("#PLN_no"+x).html(x);
				G("#PLN_no"+x).attr("id","PLN_no"+x);
				G("#newSelect"+x).attr("id","newSelect"+x);
				G("#line_task"+x).attr("id","line_task"+x);
				G("#title_task"+x).attr("id","title_task"+x);
				G("#line_taskdesc"+x).attr("id","line_taskdesc"+x);
				G("#PLN_delete"+gtid).attr("id","PLN_delete"+x);
				G("#PLN_delete"+x).html('<a href="javascript:removeEvent1('+x+');"><img src="components/com_camassistant/skin/images/removelineitemtask.gif" alt="Remove line item task" /></a>');
				}
			}

	}

</script>

<script language="javascript">


	//

	var id2 =  '';
	var cnt2 =  '';
	if(!id2)
	id2=<?PHP echo $adddocs_cnt; ?>;
	if(id2=='0'){
	var id2='1';
	}
	var endid2;
	function addEvent2()
	{
		//document.getElementById("removeevent2").style.display = "block";
		/*if (id1<10)
		{ */

	//alert(id2);
	//var id2=1;
		id2++;
			var arrlicen2=new Array();
			var ni2 = document.getElementById('newdiv2');
			var numi2 = document.getElementById('theValues');
			var num2 = (document.getElementById("theValues").value -1)+ 2;
			//alert(num);
			numi2.value = num2;
			var divIdName2 = "newSelector"+num2;
                        newitem2='<table><tr><input type="hidden" name="old_docids[]" /><td><span id="delimg'+id2+''+num2+'" style="display:none" title="Remove From RFP"><img src="<?php echo Juri::root(); ?>templates/camassistant_left/images/delete.gif" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload('+id2+''+num2+','+num2+');"/></span></td><td><span id="uploadfile'+id2+''+num2+'" style="float:left;width:auto;padding-right:5px; font-size:14px;"></span></td><input type="hidden" checked="" id="lineuploads'+id2+''+num2+'" name="attachmnent[]" ><div class="clear"></div></tr></table>';
				//newitem2='<div id="upload_file"><div class="lineitem_pan_row"><p style="padding-top: 30px;"></p><span class="grey_12">Additional Document/Specifications #'+id2+':</span><div style="padding: 10px 0pt 10px 5px; height:30px;" class="lineitem_pan"><input type="hidden" name="old_docids[]" /><span id="delimg2'+id2+'" style="display:none" title="Remove From RFP"><img src="<?php echo Juri::root(); ?>templates/camassistant_left/images/delete.gif" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload(2'+id2+');"/></span><span id="upload_file2'+id2+'" style="float:left;font-size:10px;width:auto;padding-right:5px;"><a href="javascript:linetaskupload(2'+id2+');"><img alt="upload a file" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/images/uploadfile.gif"></a></span></div><input type="hidden" checked="" id="line_uploads2'+id2+'" name="attachmnent[]" ><div style="float: left; padding-left: 0px;"><span id="requiredoprice2'+id2+'" style="display:none;"  ><input type="checkbox" value="1" name="require_docprice[]" id="docprice'+id2+'" onclick="javascript:check_require_docprice('+id2+')"><input type="hidden" name="hidden_require_docprice[]" value="0" id="hidden_docprice'+id2+'" /><strong>Require</strong> vendors to assign a <strong>Dollar Value </strong>to this Attachment.</span></div><div class="color_butons"><a href="javascript:removeEvent2();"><img alt="Upload another attachment" src="<?php echo Juri::root(); ?>components/com_camassistant/skin/images/removeattachement.gif"></a></div><div class="clear"></div></div><div class="clear"></div>';



			var newdiv2 = document.createElement('div');
			newdiv2.setAttribute("id",divIdName2);
			newdiv2.innerHTML = newitem2;
			ni2.appendChild(newdiv2);
                         linetaskupload(id2+''+num2);
	//}
	/*if(id1==10)
		document.getElementById("addevent1").style.display = "none";*/
	}
         var id2 =  '';
	var cnt2 =  '';
	if(!id2)
	id2=<?PHP echo $adddocs_cnt; ?>;
	if(id2=='0'){
	var id2='1';
	}
	var endid2;
	function addEventa2(id2)
	{
		//document.getElementById("removeevent2").style.display = "block";
		/*if (id1<10)
		{ */

	//alert(id2);
	//var id2=1;
		//id2++;
               // alert(id2);
			var arrlicen2=new Array();
			var ni2 = document.getElementById('newdiva2'+id2);
			var numi2 = document.getElementById('theValue');
			var num2 = (document.getElementById("theValue").value -1)+ 2;
			//alert(num);
			numi2.value = num2;
			var divIdName2 = "newSelector"+num2;

                        newitem2='<table><tr><input type="hidden" name="old_docids[]" /><td><span id="delimg'+id2+''+num2+'" style="display:none" title="Remove From RFP"><img src="<?php echo Juri::root(); ?>templates/camassistant_left/images/delete.gif" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload('+id2+''+num2+','+num2+');"/></span></td><td><span id="uploadfile'+id2+''+num2+'" style="float:left;width:auto;padding-right:5px; font-size:14px;"></span></td><input type="hidden" value=" " name="linetask_uploads_2'+id2+'[]" id="lineuploads'+id2+''+num2+'"  ></tr></table>';

			var newdiv2 = document.createElement('div');
			newdiv2.setAttribute("id",divIdName2);
			newdiv2.innerHTML = newitem2;
			ni2.appendChild(newdiv2);

                        linetaskupload(id2+''+num2);
	//}
	/*if(id1==10)
		document.getElementById("addevent1").style.display = "none";*/


	}
	function remove_Event2(divNum2)
	{

		 var res = confirm("Are you sure you want to remove this file from the RFP?");

                if(res==true){
			G("tr").remove("#upload_f"+divNum2);
                }


	}
	function removeEvent2()
	{
		divNum2 = document.getElementById("theValues").value;
		if(divNum2 != 0 )
		{
			var d2 = document.getElementById('newdiv2');
			var olddiv2 = document.getElementById("newSelector"+divNum2);
			d2.removeChild(olddiv2);
			var numi2 = document.getElementById('theValues');
			var num2 = document.getElementById("theValues").value -1;
			numi2.value = num2;
		}
		id2--;


	}


</script>

<script language="javascript" type="text/javascript">
function check_hiddenvalue(price_id)
{
	//alert(document.getElementById('price'+price_id).checked);
	if(document.getElementById('price'+price_id).checked==true)
	document.getElementById('hidden_price'+price_id).value=1;
	else
	document.getElementById('hidden_price'+price_id).value=0;
}
//
function check_require_docprice(doc_id)
{
	//alert(document.getElementById('price'+price_id).checked);
	if(document.getElementById('docprice'+doc_id).checked==true)
	document.getElementById('hidden_docprice'+doc_id).value=1;
	else
	document.getElementById('hidden_docprice'+doc_id).value=0;
}
</script>

<script type="text/javascript">


<!--
	function validateForm( frm ) {
		var valid = document.formvalidator.isValid(frm);
		if (valid == false) {
			// do field validation
			// your custom code here
			return false;
		} else {
			frm.submit();
		}
	}
	function fun_showdiv()
	{
		document.getElementById('showdiv').style.display='';
	}
	/*function open_new_window(url)
	{
	new_window = window.open(url,'window_name','toolbar=0,menubar=0,resizable=0,dependent=0,status=0,width=550,height=450,left=25,top=25')
	}*/

// -->
</script>
<?php
if(!$idcnt)
$idcnt=0;

?>
<script language="javascript" type="text/javascript">
//var id1 = <?php echo $idcnt;?>;
var id3;
var endid3;
var endid1;
function addEvent3()
{

	if(id1<1000)
	{
		id1++;

		var ni = document.getElementById('myDiv');
		var numi = document.getElementById('thesValue');
		var num = (document.getElementById("thesValue").value -1)+ 2;
		numi.value = num;
		var divIdName = "newSelect"+num;
		newitem="";
		newitem+='<?php echo JHTML::_('select.genericlist', $industryList, 'industry_id[]', 'size="1" '.$style.' '.$idisabled.'  style="width:283px;" class="inputbox"', 'value', 'text', $rfpinfo->industry_id);?>';
		var newdiv = document.createElement('div');
		newdiv.setAttribute("id",divIdName);
		newdiv.innerHTML = newitem;
		ni.appendChild(newdiv);
	}
}
function deleteindus(indus_id,indus_name,rfpid){
var r = confirm("Are you sure you want to delete this industry "+indus_name+"from this RFP");
if(r == true){
		G.post("index2.php?option=com_camassistant&controller=rfp&task=deleteindustry&rfpid="+rfpid+"&indusid="+indus_id+"", function(data){
		if(data == 'deleted')
		{
		alert("Industry deleted from this RFP");
		}
		G("span#vendorstates"+indus_id).css("display","none");
		})}

		if(r == false)
		{
		window.location.href;
		}

}
function addcomment(){
document.getElementById('newcomment1').style.display = '' ;
document.getElementById('newcomment2').style.display = '' ;
}
function hidecomment(){
document.getElementById('newcomment1').style.display = 'none' ;
document.getElementById('newcomment2').style.display = 'none' ;
}

function savecomment(){
var comment = document.adminForm.comment.value;
var rfpid = document.adminForm.id.value;
var author = document.adminForm.author.value;
if(comment == ''){
alert("Please enter some notes");
}
else {
	G.post("index2.php?option=com_camassistant&controller=rfp&task=addcomments", {cmt: ""+comment+"",rfpid: ""+rfpid+"", author: ""+author+"" }, function(data){
	if(data == 'success'){
	alert("Notes added successfully");
	location.reload();
	}
	else{
	alert("Please try again");
	}
	});
	}
}


G( document ).ready(function() {
		G('.deletebasicfile').click(function(){
		fileid = G(this).attr('rel') ;
		var cnf = confirm("Are you sure you want to delete this file?");
		if(cnf == true) {
		G.post("index2.php?option=com_camassistant&controller=rfp&task=removefiles", {fileid: ""+fileid+""}, function(data){
		if(data) {
			G('.basicfiles'+fileid).hide();
			}
			});
		}
		else{
		}
		});
	});
	
</script>

<style type="text/css">
.white_light_link {
	background-color:#FFF;
	border:1px solid #5096DB;
	display:none;
	height:250px;
	left:25%;
	overflow:auto;
	padding:5px;
	position:absolute;
	top:800px;
	bottom:0px;
	width:50%;
	z-index:1002;
}
</style>


<div id="vender_right2">
<?php $userinfo=$this->userinfo;  ?>
<!-- sof dotshead -->

<!-- eof dotshead -->

<div id="i_bar">

<div id="i_icon" style="padding-right:20px;"><?php
 $user = JFactory::getUser();
if ($user->user_type=='12') { ?>
<a style="text-decoration: none;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&amp;view=article&amp;id=95&amp;Itemid=113"><?php /*?><img src="<?php echo Juri::base(); ?>templates/camassistant_left/images/info_icon2.png" style="padding-left:20px; padding-top:0px;"><?php */?> </a>
<?php } else { ?>
<a style="text-decoration: none;" title="Click here" class="modal" rel="{handler: 'iframe', size: {x: 680, y: 530}}" href="index2.php?option=com_content&amp;view=article&amp;id=60&amp;Itemid=113"><?php /*?><img src="<?php echo Juri::base(); ?>templates/camassistant_left/images/info_icon2.png" style="padding-left:20px; padding-top:0px;"><?php */?> </a>
<?php } ?></div>
</div>


<!-- sof table pan -->
<div class="table_pannel">


<div class="head_greenbg2"><!--sof rfp box-->
<div id="rpf_ifo" style="z-index:1;">

<?php
$db =& JFactory::getDBO();
$state="SELECT state_name FROM #__state where id='".$RFP->comp_state."'";
$db->Setquery($state);
$state_name = $db->loadResult();
?>

</div>
<!--eof rfp box-->&nbsp;


 </div>
 <?php
$rfpinfo=$this->rfpinfo;
$rfpuploadfiles=$this->rfpuploadfiles;
$rfplinetasks=$this->rfplinetasks;
$rfpreqinfo=$this->rfpreqinfo;
$rfpreqinfo=$this->rfpreqinfo;
//echo "<pre>"; print_r($userinfo);
	$db =& JFactory::getDBO();
	 $address = "SELECT street, city, state, zip FROM #__cam_property WHERE id='".$rfpinfo->property_id."'";
			$db->setQuery($address);
			$com_add = $db->loadObject();

 $countie = "SELECT divcounty FROM #__cam_property WHERE id='".$rfpinfo->property_id."'";
			$db->setQuery($countie);
			$counties = $db->loadResult();

			$County = "SELECT County FROM #__cam_counties WHERE id ='".$counties."'";
			$db->setQuery($County);
			$data = $db->loadResult();

		 ?>

<div class="proposal_form">
<form action="<?php echo JRoute::_( 'index.php' );?>" method="post" name="adminForm" id="adminForm" class="form-validate" enctype="multipart/form-data">
<table border="0" id="create_rfp" cellpadding="0" cellspacing="0" width="100%" />
<tr><td width="40%" valign="top">
<div class="signup">
<label><span style="color:red; font-weight:bold;">Type:</span> </label>
<span style="color:red; font-weight:bold;">
<?php 
if($rfpinfo->rfpfor == '199' || $rfpinfo->rfpfor == '205') { echo "Request for Proposals (RFP)"; } 
if($rfpinfo->rfpfor == '200' || $rfpinfo->rfpfor == '206'){ echo "Request for Budgetary Pricing"; } 
if($rfpinfo->rfpfor == '201' || $rfpinfo->rfpfor == '207'){ echo "Request for Scope of Work (SOW)"; }  
?>
</span>
</div>
<br />
<div class="signup">
<label><span style="color:red; font-weight:bold;">Created Date:</span> </label>

<span style="color:red; font-weight:bold;"><?php echo $rfpinfo->createdDate ; ?></span>
</div><div class="signup">
<label> <span style="color:red; font-weight:bold;">Updated Date:</span> </label>

<span style="color:red; font-weight:bold;"><?php  echo $rfpinfo->update_date ;?></span>
</div>
<br /><br />
<div class="signup">
<label>Select Property Manager:<span class="redstar">*</span> </label>

<?php 
$disabled = 'disabled';
$style="style=background:#DDD;";
echo JHTML::_('select.genericlist', $userinfo, 'cust_id',  'size="1" '.$style.' '.$disabled.' class="inputbox "  "', 'value', 'text', $rfpinfo->cust_id);?>
</div>
<br />
<div class="signup">
<label>Select Property:<span class="redstar">*</span> </label>
<?php
//if($_REQUEST['date']=='add'){
$disabled = 'disabled';
$style="style=background:#DDD;";
//}
?>
<?php echo JHTML::_('select.genericlist', $propertyList, 'property_id',  'size="1" '.$style.' '.$disabled.' class="inputbox "  onchange="addproperty(this.value);""', 'value', 'text', $rfpinfo->property_id);?>
<table><tr><td width="80">
Community Address:</td><td><div id="anand" class="anand" ><?php echo $data.',<br>'.$com_add->street.',<br>'.$com_add->city.',&nbsp;'.$com_add->state.',&nbsp;'.$com_add->zip; ?></div><input style="display:none; background:#ffffff; border-color:#ffffff; font-weight:bold;" type="text" name="user_email" id="user_email" value="" readonly=""/></td></tr></table>
</div>

<script language="javascript" type="text/javascript">
function fun_pullname(name)
{
	document.getElementById("title_task1").value=name;
}
function wizard(choose){

if(choose=='3'){

document.getElementById("licenced").checked=true;
document.getElementById("submenu1").style.display='';
document.getElementById("sub_req_id1").checked=true;
//document.getElementById("licenced").disabled=true;
//document.getElementById("sub_req_id1").disabled=true;
}
//frm.is_checked.checked= false
}
</script>
<div class="signup">
<label>Reference Name for this RFP:<span class="redstar">*</span> </label>
<input type="text" <?php if($_REQUEST['var'] == 'view') { ?> readonly="readonly" <?php }?>  onblur="if (this.value == '') this.value = 'Frequency'" onfocus="if (this.value == 'Frequency') this.value = ''" value="<?php if($rfpinfo->projectName){ echo $rfpinfo->projectName; }else{ echo"Frequency"; } ?>" style="width: 275px;" name="projectName" onchange="javascript:fun_pullname(this.value);">
</div>
<br />
<div class="signup">
<div class="state">
<label>Proposals must be submitted no later than:<span class="redstar">*</span>   	</label>
</div>

<div class="signup">
<div class="clear"></div>
<table cellspacing="0" cellpadding="0" border="0" width="277">
  <tbody><tr>
     <td>
	<?php
	$date= date('m-d-Y', strtotime('+4 days'));
	if($_REQUEST['date']=='add') { ?>
	 <input type="text"  name="proposalDueDate" id="proposalDueDate" value="<?php echo $date; ?>" onchange="javascript:validate_proposaldate()"  onkeydown="javascript:validate_proposaldate()" onblur="javascript:validate_proposaldate()" />
	 <?Php } else {
	//$rfpinfo->proposalDueTime = str_replace('AM',' am',$rfpinfo->proposalDueTime);
	//$rfpinfo->proposalDueTime = str_replace('PM',' pm',$rfpinfo->proposalDueTime);
	  ?>
<input style="width:150px;" type="text" readonly="readonly"  name="proposalDueDate" id="proposalDueDate" value="<?php echo $rfpinfo->proposalDueDate.' '.$rfpinfo->proposalDueTime; ?>" onchange="javascript:validate_proposaldate()"  onkeydown="javascript:validate_proposaldate()" onblur="javascript:validate_proposaldate()" />
	 <?php } ?>
<script type="text/javascript">
/*G('#proposalDueDate').datetimepicker({
dateFormat: 'mm-dd-yy',
minDate: '2D',
minDate: 'new',
ampm: true,
});*/
<?php
		$configaration="SELECT 	calender_on_off FROM #__cam_configuration  where id='1'";
		$db->Setquery($configaration);
		$onoff = $db->loadResult();
		if($onoff=='yes') {  ?>
		G('#proposalDueDate').datetimepicker({
			dateFormat: 'mm-dd-yy',
			minDate: '2D',
			//minDate: '10D',
			minDate: 'new',
			changeYear: true,changeMonth:true,
			ampm: true,

 beforeShowDay: function (date) {
        if (date.getDay() == 0 || date.getDay() == 1 || date.getDay() == 6) {
                    return [false, ''];
                } else {
                    return [true, ''];
                }

     }

});
<?php } else { ?>
G('#proposalDueDate').datetimepicker({
		
			dateFormat: 'mm-dd-yy',
			minDate: '2D',
			//minDate: '10D',
			//minDate: 'new',
			timeFormat: 'hh:00',
			changeYear: true,changeMonth:true,
			});
<?php  } ?>
/*G('#proposalDueDate').datetimepicker({
			dateFormat: 'mm-dd-yy',
			//minDate: '10D',
			//minDate: '10D',
			minDate: 'new',changeYear: true,changeMonth:true,
			ampm: true,

 beforeShowDay: function (date) {
        if (date.getDay() == 0 || date.getDay() == 1 || date.getDay() == 6) {
                    return [false, ''];
                } else {
                    return [true, ''];
                }

     }

});*/
function fun_sitevisit(id)
{
	if(id=='bid')
	{
		document.getElementById("bidtxt").style.display='';
		document.getElementById("bidinfo").style.display='';
		document.getElementById("rectxt").style.display='none';
		document.getElementById("recinfo").style.display='none';
		document.getElementById("notid").style.display='none';
	} else if(id=='rec'){
		document.getElementById("bidtxt").style.display='none';
		document.getElementById("bidinfo").style.display='none';
		document.getElementById("rectxt").style.display='';
		document.getElementById("recinfo").style.display='';
		document.getElementById("notid").style.display='none';
	} else {
		document.getElementById("bidtxt").style.display='none';
		document.getElementById("bidinfo").style.display='none';
		document.getElementById("rectxt").style.display='none';
		document.getElementById("recinfo").style.display='none';
		document.getElementById("notid").style.display='';
	}
}

//
function validate_proposaldate()
{
	var frm=document.adminForm;
	if(frm.startDate.value && frm.endDate.value && frm.proposalDueDate.value)
	{
		//alert(frm.startDate.value);
		var dateBits1=frm.startDate.value.split('-');
		var dateBits2=frm.endDate.value.split('-');
		var dateBits3=frm.proposalDueDate.value.split('-');
		//date1=dateBits1[2] + '-' + dateBits1[0]+ '-' + dateBits1[1] + ' 00:00:00';
		var yeartime=dateBits3[2].split(' ');
		//date2=yeartime[0] + '-' + dateBits2[0]+ '-' + dateBits2[1] + ' '+yeartime[1]+':00';
		var d1=new Date(dateBits1[2] , dateBits1[0],dateBits1[1]);
		var d2=new Date(dateBits2[2] , dateBits2[0],dateBits2[1]);
		var d3=new Date(yeartime[0] , dateBits3[0],dateBits3[1]);
		var diff=d1-d2;
		if(d1>d2) {
		document.getElementById("msg_id").style.display='none';

		} else if(d1<=d3) {

		document.getElementById("msg_id").style.display='';
		} else {
		document.getElementById("msg_id").style.display='none';
		}
	}
}
</script>

	 </td>
  </tr>
</tbody></table>
</div>
<div id="msg_id" style="padding:5px;width:660px;border:1px solid #CDCDCD;margin-top:10px;margin-bottom:5px;background-color:#F7F7F7;display:none">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <!--<tr>
    <td style="background-color:#FFCC00"><strong>Inforamtion</strong></td>
  </tr>-->
  <tr>
    <td style="color:#FF0000">Your projected start date is before the RFP close date.  If this is intentional, be sure to include information that this is a pre-existing partiallly completed job, and details of your existing job status as a part of your RFP.</td>
  </tr>
</table>
<div class="clear"></div>
</div>
</div>



<div class="signup2" style="margin-top:40px; display:none">
<table cellpadding="0" cellspacing="0">
<p style="font-size:20px; color:#FF00FF;">NOTES (Backend Job Notes, NOT visible to Manager):</p>
<tr><th align="left"><font color="#FF0000">Comments</font></th><th align="left"><font color="#FF0000">Author</font></th><th><font color="#FF0000">Date</font></th></tr>
<?php
$mainnotes = $this->rfpnotes ;
for($n=0; $n<count($mainnotes); $n++) { ?>
<tr style="height:23px;">
<td width="200"><?php echo html_entity_decode($mainnotes[$n]->comment) ; ?></td>
<?php
$authid = "SELECT name,lastname FROM #__users WHERE  id='".$mainnotes[$n]->author."' ";
$db->setQuery($authid);
$author = $db->loadResult();
?>
<td width="200"><?php echo $author;  ?></td>
<td width="100"><?php echo $mainnotes[$n]->date_created ; ?></td>
</tr>
<?php } ?>
<tr>
<?php $user = JFactory::getUser();	?>
<td colspan="5"><br /><br /><a href="javascript:addcomment();">Add New NOTES</a>&nbsp;&nbsp;&nbsp;<font color="#990000" style="font-weight:bold;">Author: <?php echo $user->name.' '.$user->lastname ; ?>&nbsp; on &nbsp;<?php echo date('Y-m-d H:i:s'); ?> </font></td></tr>
<tr id="newcomment1" style="display:none"><td colspan="4"><textarea name="comment" style="width:400px; height:120px;"></textarea><input type="hidden" value="<?php echo $user->id; ?>" name="author" id="author" /></td></tr><br />
<tr id="newcomment2" style="display:none"><td><a href="javascript:hidecomment();">CANCEL</a></td><td><a href="javascript:savecomment();">SAVE</a></td></tr>
<tr height="50"></tr>
<tr>
<td colspan="4" style="color:#FF00FF; font-size:17px;">JOB STATUS (Visible to Manager): {<?php echo date('Y-m-d H:i:s'); ?>}</td></tr><tr>
<td colspan="4"><textarea name="rfp_adminstatus" style="height:100px; width:500px;"><?php echo $rfpinfo->rfp_adminstatus ; ?></textarea></td>
</tr>

</table></div>


</td>
<td width="60%" style="border-left:1px solid #DEDEDE; padding-left:20px; vertical-align:top;">
<table cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="2"><span>SCOPE OF WORK (SOW)</span>
<textarea id="scopeofwork" name="jobnotes"><?php echo str_replace('<br />','\n',$rfpinfo->jobnotes); ?></textarea>
</td>
</tr>
<tr>
<td>
<?php
$bascifiles = $this->bascifiles ;
//$rfpid = JRequest::getVar('rfpid','');
//echo "<pre>"; print_r($this->bascifiles); echo "</pre>";
if($bascifiles) { ?>
<p style="height:5px;"></p>
<p>Uploaded Files</p>
<table cellpadding="0" cellspacing="0">

	<?php for( $f=0; $f<count($bascifiles); $f++ ){
			if($bascifiles[$f]->filename != '' && $bascifiles[$f]->filename != ' ') {
	 ?>
		<tr class="basicfiles<?php echo $bascifiles[$f]->id; ?>"><td><a href="javascript:void(0);" rel="<?php echo $bascifiles[$f]->id; ?>" class="deletebasicfile"><img id="redimagebasci" alt="delete" src="<?php  echo Juri::base(); ?>templates/khepri/images/red.png"></a></td><td>&nbsp;&nbsp;
		<a id="openbasicfile" href="index.php?option=com_camassistant&controller=documents&task=viewbasicfile&filename=<?php echo $bascifiles[$f]->filename; ?>&filepath=<?php echo $bascifiles[$f]->filepath; ?>&rfpid=<?php echo $rfpinfo->id; ?>"><?php  echo $bascifiles[$f]->filename ; ?> </a></td></tr>
		<tr class="basicfiles<?php echo $bascifiles[$f]->id; ?>" height="5"></tr>
	<?php } 
	}
	?><?php 
}	
	?> </table>
	</td>
	
</tr>
<tr><td>
<div class="signup">
<span id='upload_file10' style="float:left;width:auto;padding-right:5px; margin-top:15px;"><a class="upload_new_files_rfp" href="javascript:addEventa2('10');"></a><p style="height:10px;"></p></span>
<span id="delimg10" style="display:none" title="Remove From RFP"><img src="templates/camassistant_left/images/red.png" alt="delete" style="cursor:pointer;" onclick="javascript:deletelineupload_line(10);"  /></span>
<div class="clear"></div>
<div id="newdiva210"></div>
<input name="hidden" type="hidden" id="theValue" value="0">
<input name="hidden" type="hidden" id="idval" value="0">
</div>
</td></tr>
</table>
</td>
</div>
</tr></table>
</div>
</div>
</td></tr></table>



<?php
	$sql12="SELECT email,name,lastname FROM  #__users where id='".$rfpinfo->cust_id."'";
	$db->Setquery($sql12);
	$udata = $db->loadObjectlist();
	 ?>
<?php //echo "<pre>"; print_r($rfpinfo->cust_id); ?>
<input type="hidden" name="industryid" value="<?php echo $_REQUEST['industryid'];?>" />
<input type="hidden" name="rfpstatus" value="<?php echo $_REQUEST['rfpstatus'];?>" />
<input type="hidden" name="rfpapproval" value="<?php echo $_REQUEST['rfpapproval'];?>" />
<input type="hidden" name="status" value="<?php echo $_REQUEST['status'];?>" />
<input type="hidden" name="search" value="<?php echo $_REQUEST['search'];?>" />

<input type="hidden" name="email" value="<?php echo $udata[0]->email; ?>" />
<input type="hidden" name="name" value="<?php echo $udata[0]->name; ?>" />
<input type="hidden" name="lastname" value="<?php echo $udata[0]->lastname; ?>" />

<input type="hidden" name="option" value="com_camassistant" />
<input type="hidden" name="task" value="update_rfp" />
<input type="hidden" name="controller" value="rfp" />
<input type="hidden" name="Itemid" value="<?php echo $_REQUEST['Itemid'];?>" />
<input type="hidden" name="id" value="<?php echo $rfpinfo->id;?>" />
<?php /*?><input type="hidden" name="cust_id" value="<?php echo $rfpinfo->cust_id;?>" /><?php */?>
<input type="hidden" name="rfp_type" value="<?php echo $rfpinfo->rfp_type;?>" />
<input type="hidden" name="publish" value="<?php echo $rfpinfo->publish;?>" />
<input type="hidden" name="basicrequest" value="basicrequest" />
<?php echo JHTML::_( 'form.token' ); ?>
</form>
</div>
<!-- eof table pan -->

</div>
