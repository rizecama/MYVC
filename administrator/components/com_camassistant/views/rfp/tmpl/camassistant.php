<?php
/**
 * @version		1.0.0 camassistant $
 * @package		camassistant
 * @copyright	Copyright Â© 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author		
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');

$user = JFactory::getUser();
if($_REQUEST['controller'] == 'vendorsignup' || $_REQUEST['controller'] == 'propertymanager' && $_REQUEST['task'] != 'company_edit_form' && $_REQUEST['task'] != 'customer_edit_form' || $_REQUEST['task'] == 'view_upld_cert' ) {
$redirect=1;
}
if($_REQUEST['task'] == 'manage_properties'){
$redirect = '';
}
if($_REQUEST['task'] == 'mail_redirect_form') {
$redirect = 1;
}

if($user->id=='' && $redirect=='' ){
global $mainframe;
$return  = base64_encode($_SERVER['REQUEST_URI']);
$mainframe->redirect("index.php?option=com_user&view=login&Itemid=87&return=".$return."");
echo "<span class='blueheads'>You need to login to access this page</span>";
}

require_once (JPATH_COMPONENT.DS.'controller.php');

if( $controller = JRequest::getWord('controller') ) {
	//print_r($controller);
	$path = JPATH_COMPONENT.DS.'controllers'.DS.$controller.'.php';
	//set the controller page  
	require_once ($path);
	$classname  = $controller.'controller';
	$controller = new $classname( array('default_task' => 'display') );
}else{
	//$controller = JRequest::getVar('controller','controller' ); 
	// Create the controller
	$controller = new camassistantController();
}

// Perform the Request task
$controller->execute( JRequest::getVar('task' ));
// Redirect if set by the controller
$controller->redirect(); 





?>