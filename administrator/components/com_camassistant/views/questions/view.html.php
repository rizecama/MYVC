<?php
/**
 * @version		1.0.0 promocode $
 * @package		promocode
 * @copyright	Copyright © 2011 - All rights reserved.
 * @license		GNU/GPL
 * @author		anandbabu
 * @author mail	anandkumar@projectsinfo.net
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');

jimport( 'joomla.application.component.view' );

class questionsViewQuestions extends Jview
{
	function display($tpl = null)
	{
	
	$task=JRequest::getVar('task','');
	$cid= JRequest::getVar( 'cid','','post','array');
	//print_r($task);
		global $mainframe, $context;
		
	if($task == 'add'){
		JToolBarHelper::save();	
		//JToolBarHelper::apply();	
	
		JToolBarHelper::cancel();
			//print_r($_REQUEST);
			$published = ($items[0]->id) ? $items[0]->published : 1;
		$lists['published'] 		= JHTML::_('select.booleanlist',  'published', 'class="inputbox"', $published );
		//print_r($question); 
		$this->assignRef('lists',			$lists);
		$this->setLayout('addquestion');

		
		}
	//exit;
	
		//print_r($task);
	
		if(!$task){
		//JToolBarHelper::title(   JText::_( 'Security Questions' ), 'generic.png' );
		 JToolBarHelper::title(   JText::_( 'Security Questions' ), 'generic.png' );
			$uri	=& JFactory::getURI();
		$task=JRequest::getVar('task','');
		JToolBarHelper::addNewX();
 		JToolBarHelper::editListX();		
		JToolBarHelper::deleteList();
		JToolBarHelper::publishList();
		JToolBarHelper::unpublishList();
		$model	=& $this->getModel('questions');
		$total			= & $this->get( 'Total');
		$pagination = & $this->get( 'Pagination' );
		$items			= & $this->get( 'Data');

		$this->assignRef('questions',$questions); 	
		$this->assignRef('items',		$items); 	
		$this->assignRef('pagination',	$pagination);
		 $this->setLayout('default');
	}
	
		
if ($task=='edit'){
	 JToolBarHelper::title(   JText::_( 'Security Questions' ), 'generic.png' );
    JToolBarHelper::custom('controlpanel','html.png','html.png','Control Panel',false);
 	JToolBarHelper::save();	
	JToolBarHelper::apply();	
	JToolBarHelper::cancel();
	
		 $cid	= JRequest::getVar( 'cid','','post','array');
		$model			=& $this->getModel('questions');
		$question= $model->getquestion($cid[0]);
		
	$published = ($items[0]->id) ? $items[0]->published : 1;
		$lists['published'] 		= JHTML::_('select.booleanlist',  'published', 'class="inputbox"', $published );
		//print_r($question); 
		$this->assignRef('lists',			$lists);
		$this->assignRef('question',		$question); 	
		$this->setLayout('addquestion');
		
		}
	
			//call parent display
		
// $this->setLayout('default');		
parent::display($tpl);
	}

}
?>