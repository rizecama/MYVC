<?php
/**
 * @version		1.0.0 cam assistant $
 * @package		cam_assistant
 * @copyright	Copyright © 2010 - All rights reserved.
 * @license		GNU/GPL
 * @author		
 * @author mail	nobody@nobody.com
 *
 *
 * @MVC architecture generated by MVC generator tool at http://www.alphaplug.com
 */

// no direct access
defined('_JEXEC') or die('Restricted access');

jimport( 'joomla.application.component.view' );

class documentsViewDocuments extends Jview
{
	function display($tpl = null){
	JToolBarHelper::custom('lists','html.png','html.png','Control Panel',false);
		
		$task=JRequest::getVar('task','');
		
		$managers = $this->get('managers');
		$this->assignRef('managers', $managers);

		
		$pdocs = $this->get('pdocs');
		$this->assignRef('pdocs', $pdocs);
		if($task=='pdocs')
		$this->setLayout('default1');
		$pdocs = $this->get('pdocs');

		$pfiles = $this->get('pfiles');
		$this->assignRef('pfiles', $pfiles);
		if($task=='pfiles')
		$this->setLayout('default2');


		$addfolder = $this->get('documents');
		$this->assignRef('documents', $addfolder);
		$cats = $this->get('categories');
		$this->assignRef('categories', $cats);
		
		if($task=='addfolder')
		$this->setLayout('default3');


		/*$openfiles = $this->get('openfiles');
		$this->assignRef('openfiles', $openfiles);*/
		if($task=='openfiles')
		{
			$path = $_REQUEST['path'];
			$model = $this->getModel('documents');
			$openfiles = $model->getopenfiles($path);
			$this->assignRef('openfiles', $openfiles);
			$this->setLayout('default4');
		}
		
		if($task=='addfile')
		$this->setLayout('fileupload');
	
		$efiles = $this->get('fileextensions');
		//print_r($efiles); 
		$this->assignRef('efiles', $efiles);

		
/////////////////////////////////////////////Shared documents//////////////////////////////

		$model	=& $this->getModel();
		//$this->setLayout('default');
		$sdocs	=& $this->get('Data');
		//$sdocs = $this->get('sdocs');
		
		
//	$pagination = $model->getPagination();
	$pagination = & $this->get( 'Pagination' );
		$this->assignRef('pagination',	$pagination);
		$this->assignRef('sdocs', $sdocs);
		
		if($task=='sdocs')
		$this->setLayout('sdefault');
		$sdocs = $this->get('sdocs');

		$sfiles = $this->get('sfiles');
		$this->assignRef('sfiles', $sfiles);
		if($task=='sfiles')
		$this->setLayout('sdefault2');

		$saddfolder = $this->get('documents');
		$this->assignRef('documents', $saddfolder);
		$scats = $this->get('scategories');
		$this->assignRef('scategories', $scats);
		
		if($task=='saddfolder')
		$this->setLayout('sdefault3');
		if($task=='saddfile')
		$this->setLayout('sfileupload');
		
		if($task=='sopenfiles')
		{
			$spath = $_REQUEST['spath'];
			$model = $this->getModel('documents');
			$sopenfiles = $model->getsopenfiles($spath);
			$this->assignRef('sopenfiles', $sopenfiles);
			$this->setLayout('sdefault4');
		}

/////////////////////////////////////////////Shared documents Completed ///////////////////////////////
		
		parent::display($tpl);

	}
}

?>